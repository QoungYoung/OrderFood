!function(){var o=!1;window.console=window.console||{},o?window.console.log||(window.console.log=function(){}):window.console.log=function(){}}();
;!function(){var t,e;jQuery.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t=jQuery.uaMatch(navigator.userAgent),e={},t.browser&&(e[t.browser]=!0,e.version=t.version),e.webkit&&(e.safari=!0),jQuery.browser=e}(),function(){"use strict";function t(t){return 10>t?"0"+t:t}function e(t){return r.lastIndex=0,r.test(t)?'"'+t.replace(r,function(t){var e=i[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function n(t,r){var i,c,s,a,p,l=o,y=r[t];switch(y&&"object"==typeof y&&"function"==typeof y.toJSON&&(y=y.toJSON(t)),"function"==typeof f&&(y=f.call(r,t,y)),typeof y){case"string":return e(y);case"number":return isFinite(y)?String(y):"null";case"boolean":case"null":return String(y);case"object":if(!y)return"null";if(o+=u,p=[],"[object Array]"===Object.prototype.toString.apply(y)){for(a=y.length,i=0;a>i;i+=1)p[i]=n(i,y)||"null";return s=0===p.length?"[]":o?"[\n"+o+p.join(",\n"+o)+"\n"+l+"]":"["+p.join(",")+"]",o=l,s}if(f&&"object"==typeof f)for(a=f.length,i=0;a>i;i+=1)"string"==typeof f[i]&&(c=f[i],s=n(c,y),s&&p.push(e(c)+(o?": ":":")+s));else for(c in y)Object.prototype.hasOwnProperty.call(y,c)&&(s=n(c,y),s&&p.push(e(c)+(o?": ":":")+s));return s=0===p.length?"{}":o?"{\n"+o+p.join(",\n"+o)+"\n"+l+"}":"{"+p.join(",")+"}",o=l,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var r,o,u,i,f;"function"!=typeof jQuery.stringify&&(r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},jQuery.stringify=function(t,e,r){var i;if(o="",u="","number"==typeof r)for(i=0;r>i;i+=1)u+=" ";else"string"==typeof r&&(u=r);if(f=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return n("",{"":t})})}(),function(){var t=new RegExp("\\{%\\$(.*?)%\\}","g");jQuery.formatTpl=function(e,n){return e.replace(t,function(t,e){return n[e]?n[e]:""})}}();
;define("common:widget/ui/validator/validator.js",function(t,r,s){s.exports=function(){function t(){this._configs={email:"emailValidator",phone:"phoneValidator",empty:"emptyValidator",number:"numberValidator",code:"codeValidator"},this._handlers={},this._messages=[]}function r(){return void 0===s&&(s=new t),s}var s;return t.prototype={_initHandlers:function(){this._handlers[this._configs.email]={validate:function(t){var r=/^([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return r.test(t)},error_msg:"邮箱不合法"},this._handlers[this._configs.phone]={validate:function(t){var r=/^((\+86)|(0086))?1[0-9]{10}$/;return r.test(t)},error_msg:"手机号码不合法"},this._handlers[this._configs.empty]={validate:function(t){return""!==t&&void 0!==t&&null!==t},error_msg:"值为空"},this._handlers[this._configs.number]={validate:function(t){return!isNaN(t)},error_msg:"不是数字"},this._handlers[this._configs.code]={validate:function(t){return/^\d{6}$/.test(t)},error_msg:"不是6位数字"}},_hasErrors:function(){return this._messages.length>0},_verifyData:function(t){var r=this;r._initHandlers(),r._messages.length&&r._messages.splice(0,r._messages.length);for(var s in t)if(t.hasOwnProperty(s)){var e=r._configs[s],i=r._handlers[e];if(!e)throw{msg:s+"没有在_configs中进行配置"};if(!i)throw{msg:"在_handlers中找不到 "+s+"的较验方法"};var n=i.validate(t[s]);if(!n)throw{msg:i.error_msg}}},validate:function(t){try{this._verifyData(t)}catch(r){this._messages.push(r.msg)}return!this._hasErrors()}},{getInstance:r}}()});
;define("common:widget/ui/dialog/dialog.js",function(i,t,o){var e=e||window.$;e.extend({formatString:function(i,t){return t?i.replace(/#\{(.+?)\}/gi,function(i,o){var e=t[o];return"undefined"==typeof e?i:e}):i}}),e.ui=e.ui||{};var s=function(i){this._options={zIndex:210,opacity:.3,backgroundColor:"#000"},this._initOptions(i),this._render()};s.prototype={_initOptions:function(i){e.extend(this._options,i||{})},_render:function(){this.$dom=e('<div class="dialog-shadow"></div>').appendTo("body").css({width:"100%",height:"100%",top:0,left:0,backgroundColor:this._options.backgroundColor,filter:"alpha(opacity="+100*this._options.opacity+")",opacity:this._options.opacity,zIndex:this._options.zIndex})},show:function(){this.$dom.show()},hide:function(){this.$dom.hide()},dispose:function(){this.$dom.remove()}},e.ui.Mask=s;var n=function(i){this._options={title:"",content:"我是内容部分",footer:"",top:0,left:0,width:300,height:"auto",zIndex:211,mask:{enable:!0,zIndex:210},windowEvent:"resize scroll"},this._ids={},this._prefixId="nimei__",this._isRender=!1,this._disposeProcess=[],this._initOptions(i),this._render()};n.TEMPLATE=['<div class="ui-dialog" id="#{dialogId}">','<div class="ui-dialog-header clearfix" id="#{dialogHeaderId}">','<div class="ui-dialog-title">#{title}</div>','<a href="javascript:;" class="dialog-btn-close j-dialog-btn" data-event="cancel">×</a>',"</div>",'<div class="ui-dialog-body" id="#{dialogBodyId}">#{content}</div>','<div class="ui-dialog-footer" id="#{dialogFooterId}">#{footer}</div>',"</div>"].join(""),n.prototype={_initOptions:function(i){for(var t in i)if(i.hasOwnProperty(t)){var o=i[t];"function"==typeof o?this[t]=o:"object"==typeof o?e.extend(this._options[t],o):this._options[t]=o}},_render:function(){function i(){a.center()}function t(i){var t=e(i.target),o=t.data("event");a.fire(o,i)!==!1&&a.hide()}if(!this._isRender){var o=this._options,d=e.formatString(n.TEMPLATE,{dialogId:this._getId("dialog"),dialogHeaderId:this._getId("dialogHeader"),dialogBodyId:this._getId("dialogBody"),dialogFooterId:this._getId("dialogFooter"),title:o.title,content:o.content,footer:o.footer});this._options.mask.enable&&(this.mask=new s(this._options.mask),this._disposeProcess.push(function(){this.mask.dispose()})),this.$dom=e(d).appendTo("body").css({width:o.width,height:o.height,left:o.left,top:o.top,position:"absolute",zIndex:o.zIndex}),o.customClassName&&this.$dom.addClass(o.customClassName);var a=this;this.$dom.on("click",".j-dialog-btn",t),e(window).on(this._options.windowEvent,i),this._disposeProcess.push(function(){e(window).off(this._options.windowEvent,i),this.$dom.off("click",".j-dialog-btn",t),this.$dom.remove()}),this._isRender=!0,this.fire("render")}},_getId:function(i){return this._ids[i]||(this._ids[i]=this._prefixId+i)},on:function(i,t){return this["on"+i]=t,this},fire:function(i){var t=this["on"+i];return[].shift.call(arguments),"function"==typeof t?t.apply(this,arguments):!0},center:function(){var i=this.$dom.width(),t=this.$dom.height(),o=e(window).width(),s=window.innerHeight||e(window).height(),n=e(document).scrollTop(),d=e(window).scrollLeft(),a=d+(o-i)/2,r=n+(s-t)/2;return"resize"===this._options.windowEvent&&(a=a>0?a:0,r=r>0?r:0),this.$dom.css({left:a,top:r}),this._options.mask.enable&&e(".dialog-shadow").css({height:s+n}),this},setWidth:function(){},setHeight:function(){},show:function(i){return this.fire("beforeshow")!==!1?(this.$dom.show(),this.mask&&this.mask.show(),this.fire("show",i),this):void 0},hide:function(){this.fire("beforehide")!==!1&&(this.fire("hide"),this.dispose())},getDom:function(){return this.$dom},dispose:function(){for(var i=0,t=this._disposeProcess.length;t>i;i++)this._disposeProcess[i].call(this)}},n.alert=function(i){i=e.extend({title:"提示",customClassName:"ui-alert",footer:'<a href="javascript:;" class="dialog-btn-ok j-dialog-btn" data-event="ok">确定</a>'},i||{});var t=new n(i);return t.center(),t},n.confirm=function(i){i=e.extend({title:"提示",customClassName:"ui-confirm",footer:['<a href="javascript:;" class="dialog-btn-ok j-dialog-btn" data-event="ok">确定</a>','<a href="javascript:;" class="dialog-btn-cancel j-dialog-btn" data-event="cancel">取消</a>'].join("")},i||{});var t=new n(i);return t.center(),t},n.splash=function(i){i=e.extend({title:"",content:"我一会儿就消失~~~",customClassName:"ui-splash",footer:"",timeout:5e3,mask:{enable:!1}},i||{});var t=new n(i);return t.center(),setTimeout(function(){t.hide(),t.dispose()},i.timeout),t},e.ui.Dialog=n,o.exports=n});
;define("common:widget/address_form/address_form.js",function(e,t,s){var a=(e("common:widget/ui/validator/validator.js").getInstance(),e("common:widget/ui/dialog/dialog.js"));s.exports={init:function(){var e=this;e.bindEvents(),e.checkAddressInfo(),F.checkAddressInfoForSubmit=function(){return function(){return e.checkAddressInfoForSubmit()}}(),F.getAddressParams=function(){return function(){return e.getAddressParams()}}()},bindEvents:function(){var e=this;e.renderProvince(),$("#province").change(function(){e.renderCity()}),$("#city").change(function(){e.renderDistrict()}),$("#j-searchPostCode").hover(function(){e.changeSelectPostUrl()})},checkAddressInfo:function(){var e={empty:/^\s*$/,name:/^[\sA-Za-z0-9\-\u4E00-\u9FA5]{2,15}$/,mobile:/^1\d{10}$/,tel:/^[1-9]\d{6,7}$/,postCode:/^[0-9]\d{5}(?!\d)$/},t={emptyProvince:"您还没有选择您所在的省份",emptyCity:"您还没有选择您所在的城市",emptyDistrict:"您还没有选择您所在的区域",emptyStreet:"您还没有填写街道地址",emptyPostcode:"您还没有填写邮政编码",emptyName:"您还没有填写收货人姓名",emptyPhone:"您还没有填写手机号码",checkStreet:"街道地址不少于5个字，不多于60个字",checkPostcode:"请填写正确邮政编码",checkName:"收货人姓名不少于2个字，不多于15个字",checkPhone:"请正确填写手机号码",checkTel:"请正确填写电话号码"};$("#province").blur(function(){"省份"==$("#province option:selected").text()?($("#area-msg").html(t.emptyProvince),$("#area-msg").hasClass("hide")&&$("#area-msg").removeClass("hide")):$("#area-msg").addClass("hide")}),$("#city").blur(function(){return"城市"==$("#city option:selected").text()?($("#area-msg").html(t.emptyCity),$("#area-msg").hasClass("hide")&&$("#area-msg").removeClass("hide"),!1):void($("#area-msg").hasClass("hide")||$("#area-msg").addClass("hide"))}),$("#district").blur(function(){"区域"==$("#district option:selected").text()?($("#area-msg").html(t.emptyDistrict),$("#area-msg").hasClass("hide")&&$("#area-msg").removeClass("hide")):$("#area-msg").hasClass("hide")||$("#area-msg").addClass("hide")}),$("#street").blur(function(){var s=$.trim($("#street").val());e.empty.test(s)?($("#street-msg").html(t.emptyStreet),$("#street-msg").hasClass("hide")&&$("#street-msg").removeClass("hide")):s.length<5||s.length>60?($("#street-msg").html(t.checkStreet),$("#street-msg").hasClass("hide")&&$("#street-msg").removeClass("hide")):$("#street-msg").addClass("hide")}),$("#post-code").blur(function(){var s=$.trim($("#post-code").val());e.empty.test(s)?($("#postcode-msg").html(t.emptyPostcode),$("#postcode-msg").hasClass("hide")&&$("#postcode-msg").removeClass("hide")):e.postCode.test(s)?$("#postcode-msg").addClass("hide"):($("#postcode-msg").html(t.checkPostcode),$("#postcode-msg").hasClass("hide")&&$("#postcode-msg").removeClass("hide"))}),$("#name").blur(function(){var s=$.trim($("#name").val());e.empty.test(s)?($("#name-msg").html(t.emptyName),$("#name-msg").hasClass("hide")&&$("#name-msg").removeClass("hide")):e.name.test(s)?$("#name-msg").addClass("hide"):($("#name-msg").html(t.checkName),$("#name-msg").hasClass("hide")&&$("#name-msg").removeClass("hide"))}),$("#phone").blur(function(){var s=$.trim($("#phone").val());e.empty.test(s)?($("#phone-msg").html(t.emptyPhone),$("#phone-msg").hasClass("hide")&&$("#phone-msg").removeClass("hide")):e.mobile.test(s)?$("#phone-msg").addClass("hide"):($("#phone-msg").html(t.checkPhone),$("#phone-msg").hasClass("hide")&&$("#phone-msg").removeClass("hide"))}),$("#tel").blur(function(){var s=$.trim($("#tel").val());e.empty.test(s)||e.tel.test(s)?$("#tel-msg").addClass("hide"):($("#tel-msg").html(t.checkTel),$("#tel-msg").hasClass("hide")&&$("#tel-msg").removeClass("hide"))})},checkAddressInfoForSubmit:function(){var e={empty:/^\s*$/,name:/^[\sA-Za-z0-9\-\u4E00-\u9FA5]{2,15}$/,mobile:/^1\d{10}$/,tel:/^[1-9]\d{6,7}$/,postCode:/^[0-9]\d{5}(?!\d)$/},t={emptyProvince:"您还没有选择您所在的省份",emptyCity:"您还没有选择您所在的城市",emptyDistrict:"您还没有选择您所在的区域",emptyStreet:"您还没有填写街道地址",emptyPostcode:"您还没有填写邮政编码",emptyName:"您还没有填写收货人姓名",emptyPhone:"您还没有填写手机号码",checkStreet:"街道地址不少于5个字，不多于60个字",checkPostcode:"请填写正确邮政编码",checkName:"收货人姓名不少于2个字，不多于15个字",checkPhone:"请正确填写手机号码",checkTel:"请正确填写电话号码"},s=!0;"省份"==$("#province option:selected").text()?($("#area-msg").html(t.emptyProvince),$("#area-msg").hasClass("hide")&&$("#area-msg").removeClass("hide"),s=!1):$("#area-msg").hasClass("hide")||$("#area-msg").addClass("hide"),"城市"==$("#city option:selected").text()?($("#area-msg").html(t.emptyCity),$("#area-msg").hasClass("hide")&&$("#area-msg").removeClass("hide"),s=!1):$("#area-msg").hasClass("hide")||$("#area-msg").addClass("hide"),"区域"==$("#district option:selected").text()?($("#area-msg").html(t.emptyDistrict),$("#area-msg").hasClass("hide")&&$("#area-msg").removeClass("hide"),s=!1):$("#area-msg").hasClass("hide")||$("#area-msg").addClass("hide");var a=$.trim($("#street").val());e.empty.test(a)?($("#street-msg").html(t.emptyStreet),$("#street-msg").hasClass("hide")&&$("#street-msg").removeClass("hide"),s=!1):a.length<5||a.length>60?($("#street-msg").html(t.checkStreet),$("#street-msg").hasClass("hide")&&$("#street-msg").removeClass("hide"),s=!1):$("#street-msg").addClass("hide");var d=$.trim($("#post-code").val());e.empty.test(d)?($("#postcode-msg").html(t.emptyPostcode),$("#postcode-msg").hasClass("hide")&&$("#postcode-msg").removeClass("hide"),s=!1):e.postCode.test(d)?$("#postcode-msg").addClass("hide"):($("#postcode-msg").html(t.checkPostcode),$("#postcode-msg").hasClass("hide")&&$("#postcode-msg").removeClass("hide"),s=!1);var i=$.trim($("#name").val());e.empty.test(i)?($("#name-msg").html(t.emptyName),$("#name-msg").hasClass("hide")&&$("#name-msg").removeClass("hide"),s=!1):e.name.test(i)?$("#name-msg").addClass("hide"):($("#name-msg").html(t.checkName),$("#name-msg").hasClass("hide")&&$("#name-msg").removeClass("hide"),s=!1);var o=$.trim($("#phone").val());e.empty.test(o)?($("#phone-msg").html(t.emptyPhone),$("#phone-msg").hasClass("hide")&&$("#phone-msg").removeClass("hide"),s=!1):e.mobile.test(o)?$("#phone-msg").addClass("hide"):($("#phone-msg").html(t.checkPhone),$("#phone-msg").hasClass("hide")&&$("#phone-msg").removeClass("hide"),s=!1);var r=$.trim($("#tel").val());return e.empty.test(r)||e.tel.test(r)?$("#tel-msg").addClass("hide"):($("#tel-msg").html(t.checkTel),$("#tel-msg").hasClass("hide")&&$("#tel-msg").removeClass("hide"),s=!1),s},getAddressParams:function(){var e={};return e.area_id=0!=$("#district option:selected").val()?$("#district option:selected").val():$("#city option:selected").val(),e.address=$("#province option:selected").text()+" "+$("#city option:selected").text()+" "+$("#district option:selected").text()+" "+$.trim($("#street").val()),e.post_code=$.trim($("#post-code").val()),e.name=$.trim($("#name").val()),e.phone=$.trim($("#phone").val()),e.telephone_district=$.trim($("#tel-district").val()),e.telephone=$.trim($("#tel").val()),e.telephone_ext=$.trim($("#tel-ext").val()),e.is_default=$("#j-isDefault").prop("checked")?"1":"0",e},modifyAddress:function(e){$.ajax({type:"post",url:"/uc/user/addrmod",dataType:"json",data:{action:"modc",id:e.id,area_id:e.areaId},success:function(t){if(0==t.errno){var s=t.data,d=$("#J-add-address");d.hasClass("J-modify-address")||d.addClass("J-modify-address"),d.hasClass("add-address-active")||d.addClass("add-address-active"),$("#J-add-address .add-address-btn").find("a").html("修改地址"),$("#J-add-address .w-add-address-form li.msg").addClass("hide"),$("#J-save-address").attr("data-id",e.id),d.find(".add-address-form").hasClass("hide")&&d.find(".add-address-form").removeClass("hide");var i,o,r,n=0,c=0,m=0,l="<option value='0'>省份</option>";$.each(s.provs,function(e,t){return l+="<option value='"+t.area_code+"'>"+t.name+"</option>",n+=1,t.area_code==s.curaddr.area_id.substring(0,6)?i=n:void 0}),$("#province").html(l),0!=i?$("#province").find("option").eq(i).attr("selected",!0):($("#province").find("option").eq(0).attr("selected",!0),$("#province").attr("disabled",!0));var h="<option value='0'>城市</option>";$.each(s.cits,function(e){h+="<option value='"+s.cits[e].area_code+"'>"+s.cits[e].name+"</option>",c+=1,s.cits[e].area_code==s.curaddr.area_id.substring(0,9)&&(o=c)}),$("#city").html(h),0!=o?($("#city").find("option").eq(o).attr("selected",!0),$("#city").attr("disabled",!1)):($("#city").find("option").eq(0).attr("selected",!0),$("#city").attr("disabled",!0));var p="<option value='0'>区域</option>";$.each(s.counts,function(e){p+="<option value='"+s.counts[e].area_code+"'>"+s.counts[e].name+"</option>",m+=1,s.counts[e].area_code==s.curaddr.area_id&&(r=m)}),$("#district").html(p),0!=r?($("#district").find("option").eq(r).attr("selected",!0),$("#district").attr("disabled",!1)):($("#district").find("option").eq(0).attr("selected",!0),$("#district").attr("disabled",!0)),$("#is-default").val(s.curaddr.is_default),$("#street").val(s.curaddr.address),$("#post-code").val(s.curaddr.post_code),$("#name").val(s.curaddr.name),$("#phone").val(s.curaddr.phone),$("#tel-district").val(s.curaddr.telephone_district),$("#tel").val(s.curaddr.telephone),$("#tel-ext").val(s.curaddr.telephone_ext)}else{var v=t.errmsg,u=a.alert({width:400,title:"错误提示",content:v,customClassName:"ui-alert-address",mask:{enable:!0,opacity:.25}});u.center()}}})},modifyDefaultAddress:function(e){e.target.parents("tr").addClass("default-address").siblings().removeClass("default-address"),$.ajax({type:"post",url:"/uc/user/addrmod",dataType:"json",data:{action:"setd",id:e.id}})},renderProvince:function(){$.ajax({type:"post",url:"/uc/user/addrmod",dataType:"json",data:{action:"getp"},success:function(e){if(""==e.errno){var t="<option value='0'>省份</option>",s=e.data;$.each(s,function(e){t+="<option value='"+s[e].area_code+"'>"+s[e].name+"</option>"}),$("#province").html(t),$("#province").find("option").eq(0).attr("selected",!0),$("#city").find("option").eq(0).attr("selected",!0),$("#city").attr("disabled",!0),$("#district").find("option").eq(0).attr("selected",!0),$("#district").attr("disabled",!0)}else{var d=e.errmsg,i=a.alert({width:400,title:"错误提示",content:d,customClassName:"ui-alert-uc",mask:{enable:!0,opacity:.25}});i.center()}}})},renderCity:function(){var e=$("#province option:selected").val();return 0==e?($("#city").find("option").eq(0).attr("selected",!0),$("#city").attr("disabled",!0),$("#district").find("option").eq(0).attr("selected",!0),$("#district").attr("disabled",!0),!1):($("#city").attr("disabled",!1),void $.ajax({type:"post",url:"/uc/user/addrmod",dataType:"json",data:{pid:e,action:"getcp"},success:function(e){if(""==e.errno){var t="<option value='0'>城市</option>",s=e.data;$.each(s,function(e){t+="<option value='"+s[e].area_code+"'>"+s[e].name+"</option>"}),$("#city").html(t),$("#city").find("option").eq(0).attr("selected",!0),$("#district").find("option").eq(0).attr("selected",!0),$("#district").attr("disabled",!0)}else{var d=e.errmsg,i=a.alert({width:400,title:"错误提示",content:d,customClassName:"ui-alert-uc",mask:{enable:!0,opacity:.25}});i.center()}}}))},renderDistrict:function(){var e=$("#city option:selected").val();return 0==e?($("#district").find("option").eq(0).attr("selected",!0),$("#district").attr("disabled",!0),!1):($("#district").attr("disabled",!1),void $.ajax({type:"post",url:"/uc/user/addrmod",dataType:"json",data:{cid:e,action:"getcc"},success:function(e){if(""==e.errno){var t="<option value='0'>区域</option>",s=e.data;$.each(s,function(e){t+="<option value='"+s[e].area_code+"'>"+s[e].name+"</option>"}),$("#district").html(t),$("#district").find("option").eq(0).attr("selected",!0)}else{var d=e.errmsg,i=a.alert({width:400,title:"错误提示",content:d,customClassName:"ui-alert-uc",mask:{enable:!0,opacity:.25}});i.center()}}}))},changeSelectPostUrl:function(){var e="http://opendata.baidu.com/post/s",t="";"省份"!=$("#province option:selected").text()&&(t+=encodeURIComponent($("#province option:selected").text())),"城市"!=$("#city option:selected").text()&&$("#province option:selected").text().indexOf($("#city option:selected").text())<0&&(t+=encodeURIComponent($("#city option:selected").text())),"区域"!=$("#district option:selected").text()&&(t+=encodeURIComponent($("#district option:selected").text())),""!=$("#street").val()&&(t+=encodeURIComponent($("#street").val())),e=e+"?wd="+t+"&rn=20&ie=utf-8",$("#j-searchPostCode").attr("href",e)}}});
;define("common:widget/ui/template/template.js",function(e,n,t){!function(e){e.baidu=e.baidu||{};var n="undefined"==typeof t?e.baidu:t.exports;e.baidu.template=n.template=function(n,t){var r=function(){if(!e.document)return a._compile(n);var t=document.getElementById(n);if(t){if(a.cache[n])return a.cache[n];var r=/^(textarea|input)$/i.test(t.nodeName)?t.value:t.innerHTML;return a._compile(r)}return a._compile(n)}(),p=a._isObject(t)?r(t):r;return r=null,p};var a=n.template;a.versions=a.versions||[],a.versions.push("1.0.6"),a.cache={},a.LEFT_DELIMITER=a.LEFT_DELIMITER||"<%",a.RIGHT_DELIMITER=a.RIGHT_DELIMITER||"%>",a.ESCAPE=!0,a._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},a._encodeReg=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},a._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")},a._compile=function(e){var n="var _template_fun_array=[];\nvar fn=(function(__data__){\nvar _template_varName='';\nfor(name in __data__){\n_template_varName+=('var '+name+'=__data__[\"'+name+'\"];');\n};\neval(_template_varName);\n_template_fun_array.push('"+a._analysisStr(e)+"');\n_template_varName=null;\n})(_template_object);\nfn = null;\nreturn _template_fun_array.join('');\n";return new Function("_template_object",n)},a._isObject=function(e){return"function"==typeof e||!(!e||"object"!=typeof e)},a._analysisStr=function(e){var n=a.LEFT_DELIMITER,t=a.RIGHT_DELIMITER,r=a._encodeReg(n),p=a._encodeReg(t);return e=String(e).replace(new RegExp("("+r+"[^"+p+"]*)//.*\n","g"),"$1").replace(new RegExp("<!--.*?-->","g"),"").replace(new RegExp(r+"\\*.*?\\*"+p,"g"),"").replace(new RegExp("[\\r\\t\\n]","g"),"").replace(new RegExp(r+"(?:(?!"+p+")[\\s\\S])*"+p+"|((?:(?!"+r+")[\\s\\S])+)","g"),function(e,n){var t="";if(n)for(t=n.replace(/\\/g,"&#92;").replace(/'/g,"&#39;");/<[^<]*?&#39;[^<]*?>/g.test(t);)t=t.replace(/(<[^<]*?)&#39;([^<]*?>)/g,"$1\r$2");else t=e;return t}),e=e.replace(new RegExp("("+r+"[\\s]*?var[\\s]*?.*?[\\s]*?[^;])[\\s]*?"+p,"g"),"$1;"+t).replace(new RegExp("("+r+":?[hvu]?[\\s]*?=[\\s]*?[^;|"+p+"]*?);[\\s]*?"+p,"g"),"$1"+t).split(n).join("	"),e=a.ESCAPE?e.replace(new RegExp("\\t=(.*?)"+p,"g"),"',typeof($1) === 'undefined'?'':baidu.template._encodeHTML($1),'"):e.replace(new RegExp("\\t=(.*?)"+p,"g"),"',typeof($1) === 'undefined'?'':$1,'"),e=e.replace(new RegExp("\\t:h=(.*?)"+p,"g"),"',typeof($1) === 'undefined'?'':baidu.template._encodeHTML($1),'").replace(new RegExp("\\t(?::=|-)(.*?)"+p,"g"),"',typeof($1)==='undefined'?'':$1,'").replace(new RegExp("\\t:u=(.*?)"+p,"g"),"',typeof($1)==='undefined'?'':encodeURIComponent($1),'").replace(new RegExp("\\t:v=(.*?)"+p,"g"),"',typeof($1)==='undefined'?'':baidu.template._encodeEventHTML($1),'").split("	").join("');").split(t).join("_template_fun_array.push('").split("\r").join("\\'")}}(window)});
;define("common:widget/bind_phone/bind_phone.js",function(e,n,t){var i=e("common:widget/ui/dialog/dialog.js"),o=e("common:widget/ui/template/template.js");t.exports={init:function(){this.renderTpl(),$("#J-oldphone-num").length>0&&(this.oldPhoneObj=$("#J-oldphone-num")),$("#J-newphone-num").length>0&&(this.newPhoneObj=$("#J-newphone-num")),$("#J-validate-code").length>0&&(this.codeObj=$("#J-validate-code")),$("#J-msg-oldphone").length>0&&(this.oldWarningMsg=$("#J-msg-oldphone")),$("#J-msg-newphone").length>0&&(this.newWarningMsg=$("#J-msg-newphone")),$("#J-msg-code").length>0&&(this.codeWarningMsg=$("#J-msg-code")),$("#J-check-phone-btn").length>0&&(this.checkPhoneBtn=$("#J-check-phone-btn")),$("#J-get-code").length>0&&(this.getCodeBtn=$("#J-get-code")),$("#J-confirm-bind").length>0&&(this.confirmBindBtn=$("#J-confirm-bind")),this.monitorTime=60,this.sendCodeFlag=!1,this.isClickFlag=!1,this.POSTURL="/uc/user/bindphone",this.bindEvents()},bindEvents:function(){var e=this;$("#J-get-code").length>0&&e.getCodeBtn.click(function(){if(!e.sendCodeFlag){var n=e.newPhoneObj.val();if(!e.checkPhoneNo(n))return e.newWarningMsg.html("请输入正确手机号"),!1;var t={phone:n,action:"bindCode"};$.post(e.POSTURL,t,function(n){0==n.errno?(e.newWarningMsg.html("&nbsp;"),e.monitorButton()):e.newWarningMsg.html(n.errmsg)},"json")}}),$("#J-confirm-bind").length>0&&e.confirmBindBtn.click(function(){if(e.isClickFlag){var n=e.newPhoneObj.val(),t=e.codeObj.val();if(!e.checkPhoneNo(n))return e.newWarningMsg.html("请输入正确手机号"),!1;if(!e.checkCode(t))return e.codeWarningMsg.html("请输入正确验证码"),!1;var i={phone:n,code:t,action:"bindPhone"};$.post(e.POSTURL,i,function(t){0!=t.errno||t.data?0==t.errno&&t.data?($("#J-checkphone").addClass("hide"),e.resetSendCode(),$("#J-phone-txt").html(n),$("#J-replaceconfirm").removeClass("hide"),$("#J-confirm-replace").click(function(){e.sendConfirmRequest(t.data)}),$("#J-go-back").click(function(){$("#J-replaceconfirm").addClass("hide"),$("#J-checkphone").removeClass("hide")})):(e.bindphoneDialogTpl.dispose(),e.bindFail()):(e.bindphoneDialogTpl.dispose(),e.bindSuccess())},"json")}}),$("#J-check-phone-btn").length>0&&e.checkPhoneBtn.click(function(){var n=e.oldPhoneObj.val();if(!e.checkPhoneNo(n))return e.oldWarningMsg.html("请输入正确手机号"),!1;var t={phone:e.oldPhoneObj.val(),action:"accountBind"};$.post(e.POSTURL,t,function(n){0==n.errno?(e.oldWarningMsg.html("&nbsp;"),$("#J-checkoldphone").remove(),$("#J-checkphone").removeClass("hide")):e.oldWarningMsg.html(n.errmsg)},"json")}),$("#J-tips").length>0&&$("#J-tips").click(function(){$(this).parent("li").toggleClass("relative")})},renderTpl:function(){var e="新手机号绑定",n=o.template,t={},s=n("J-bindphonetpl",t);clearTimeout(this.timer),this.monitorTime=60,this.sendCodeFlag=!1,this.bindphoneDialogTpl=new i({width:570,title:e,content:s,customClassName:"check-phone-dialog",mask:{enable:!0,opacity:.25}}),this.bindphoneDialogTpl.center()},sendConfirmRequest:function(e){var n=this,t={code:e,action:"bindConfirm"};$.post(n.POSTURL,t,function(e){0==e.errno?(n.bindphoneDialogTpl.dispose(),n.bindSuccess()):(n.bindphoneDialogTpl.dispose(),n.bindFail())},"json")},bindSuccess:function(){var e=o.template,n={},t=e("J-bindSuccesstpl",n),s=i.splash({width:540,title:"提示",content:t,customClassName:"ui-splash-tips",timeout:3e3,mask:{enable:!0,opacity:.25}});s.center(),setTimeout(function(){location.reload()},3e3)},bindFail:function(){var e=o.template,n={},t=e("J-bindFailtpl",n),s=i.splash({width:540,title:"提示",content:t,customClassName:"ui-splash-tips",timeout:3e3,mask:{enable:!0,opacity:.25}});s.center()},checkPhoneNo:function(e){var n=e.toString(),t=/^1\d{2,10}$/i;return 11==n.length&&t.test(n)?!0:!1},checkCode:function(e){var n=e.toString(),t=/^[0-9]\d{2,5}$/;return t.test(n)?!0:!1},monitorButton:function(){var e=this;e.sendCodeFlag=!0,e.isClickFlag=!0,this.timer=setTimeout(function(){60==e.monitorTime&&(e.getCodeBtn.html("重新获取("+e.monitorTime+")").addClass("btn-gray").removeClass("btn-pink"),e.getCodeBtn.attr("disabled",!0).removeAttr("href"),e.newPhoneObj.attr("readonly",!0).addClass("form-disabled"),e.confirmBindBtn.addClass("btn-pink").removeClass("btn-gray"),e.confirmBindBtn.attr("disabled",!1).attr("href","javascript:;")),e.monitorTime>0?(e.getCodeBtn.html("重新获取("+e.monitorTime+")"),e.monitorTime--,e.monitorButton.call(e)):e.clearSendCode()},1e3)},clearSendCode:function(){this.getCodeBtn.html("重新获取").addClass("btn-pink").removeClass("btn-gray"),this.getCodeBtn.removeAttr("disabled").attr("href","javascript:;"),this.newPhoneObj.attr("readonly",!1).removeClass("form-disabled"),clearTimeout(this.timer),this.monitorTime=60,this.sendCodeFlag=!1},resetSendCode:function(){clearTimeout(this.timer),this.getCodeBtn.html("获取验证码").addClass("btn-pink").removeClass("btn-gray"),this.getCodeBtn.removeAttr("disabled").attr("href","javascript:;"),this.newPhoneObj.attr("readonly",!1).removeClass("form-disabled").val(""),this.confirmBindBtn.removeClass("btn-pink").addClass("btn-gray"),this.confirmBindBtn.attr("disabled",!0).removeAttr("href"),this.codeObj.val(""),this.monitorTime=60,this.sendCodeFlag=!1}}});
;define("common:widget/dep/avalon/avalon.js",function(e,t,n){function r(){window.console&&avalon.config.debug&&Function.apply.call(console.log,console,arguments)}function a(){}function i(e,t){"string"==typeof e&&(e=e.match(Ot)||[]);for(var n={},r=void 0!==t?t:1,a=0,i=e.length;i>a;a++)n[e[a]]=r;return n}function o(){if(window.VBArray){var e=document.documentMode;return e?e:window.XMLHttpRequest?7:6}return 0}function l(e){return Lt.test(Pt.call(e))}function s(e,t){return e=Math.floor(e)||0,0>e?Math.max(t+e,0):Math.min(e,t)}function c(e){if(!e)return!1;var t=e.length;if(t===t>>>0){var n=Pt.call(e).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(n))return!1;if("Array"===n)return!0;try{return{}.propertyIsEnumerable.call(e,"length")===!1?/^\s?function/.test(e.item||e.callee):!0}catch(r){return!e.window}}return!1}function u(e,t,n){var r="for(var "+e+"i=0,n = this.length; i < n; i++){"+t.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+n;return Function("fn,scope",r)}function f(e,t){try{for(;t=t.parentNode;)if(t===e)return!0;return!1}catch(n){return!1}}function d(){return(new XMLSerializer).serializeToString(this)}function p(e,t){if(e&&e.childNodes)for(var n,r=e.childNodes,a=0;n=r[a++];)if(n.tagName){var i=$t.createElementNS(an,n.tagName.toLowerCase());Dt.forEach.call(n.attributes,function(e){i.setAttribute(e.name,e.value)}),p(n,i),t.appendChild(i)}}function v(e){var t={};for(var n in e)t[n]=e[n];var r=t.target=e.srcElement;if(0===e.type.indexOf("key"))t.which=null!=e.charCode?e.charCode:e.keyCode;else if(ln.test(e.type)){var a=r.ownerDocument||$t,i="BackCompat"===a.compatMode?a.body:a.documentElement;t.pageX=e.clientX+(i.scrollLeft>>0)-(i.clientLeft>>0),t.pageY=e.clientY+(i.scrollTop>>0)-(i.clientTop>>0),t.wheelDeltaY=t.wheelDelta,t.wheelDeltaX=0}return t.timeStamp=new Date-0,t.originalEvent=e,t.preventDefault=function(){e.returnValue=!1},t.stopPropagation=function(){e.cancelBubble=!0},t}function h(e){for(var t in e)if(Ht.call(e,t)){var n=e[t];"function"==typeof h.plugins[t]?h.plugins[t](n):"object"==typeof h[t]?avalon.mix(h[t],n):h[t]=n}return this}function m(e){return(e+"").replace(mn,"\\$&")}function g(e,t,n){if(qt(t)||t&&t.nodeType)return!1;if(-1!==n.indexOf(e))return!1;if(-1!==xn.indexOf(e))return!1;var r=n.$special;return e&&"$"===e.charAt(0)&&!r[e]?!1:!0}function y(e,t,n,r){switch(e.type){case 0:var a=e.get,i=e.set;if(qt(i)){var o=r.$events,l=o[t];o[t]=[],i.call(r,n),o[t]=l}return a.call(r);case 1:return n;case 2:if(n!==r.$model[t]){var s=e.svmodel=$(r,t,n,e.valueType);n=s.$model;var c=Cn[s.$id];c&&c()}return n}}function b(e,t,n){if(Array.isArray(e)){var r=e.concat();e.length=0;var i=C(e);return i.pushArray(r),i}if(!e||e.nodeType>0||e.$id&&e.$events)return e;Array.isArray(e.$skipArray)||(e.$skipArray=[]),e.$skipArray.$special=t||{};var o={};n=n||{};var l={},s={},c=[];for(var u in e)!function(t,r){if(n[t]=r,g(t,r,e.$skipArray)){l[t]=[];var i=avalon.type(r),u=function(e){var t=u._name,n=this,r=n.$model,a=r[t],i=n.$events;return arguments.length?void(_t||(1===u.type||(e=y(u,t,e,n),u.type))&&(Mn(a,e)||(r[t]=e,S(i[t]),w(n,t,e,a)))):0===u.type?(e=u.get.call(n),a!==e&&(r[t]=e,w(n,t,e,a)),e):(k(i[t]),u.svmodel||a)};"object"===i&&qt(r.get)&&Object.keys(r).length<=2?(u.set=r.set,u.get=r.get,u.type=0,c.push(function(){var e={evaluator:function(){e.type=Math.random(),e.element=null,n[t]=u.get.call(o)},element:xt,type:Math.random(),handler:a,args:[]};Bt[wt]=e,u.call(o),delete Bt[wt]})):Nt.test(i)?(u.type=2,u.valueType=i,c.push(function(){var e=b(r,0,n[t]);u.svmodel=e,e.$events[At]=l[t]})):u.type=1,u._name=t,s[t]=u}}(u,e[u]);xn.forEach(function(t){delete e[t],delete n[t]}),o=An(o,_n(s),e);for(var f in e)s[f]||(o[f]=e[f]);o.$id=Xt(),o.$model=n,o.$events=l;for(u in wn){var d=wn[u];It||(d=d.bind(o)),o[u]=d}return En?Object.defineProperty(o,"hasOwnProperty",{value:function(e){return e in this.$model},writable:!1,enumerable:!1,configurable:!0}):o.hasOwnProperty=function(e){return e in o.$model},c.forEach(function(e){e()}),o}function w(e,t,n,r){e.$events&&wn.$fire.call(e,t,n,r)}function $(e,t,n,r){var a=e[t];if("array"===r)return Array.isArray(n)&&a!==n?(a._.$unwatch(),a.clear(),a._.$watch(),a.pushArray(n.concat()),a):a;var i=e.$events[t],o=a.$events.$withProxyPool;o&&(mt(o,"with"),a.$events.$withProxyPool=null);var l=b(n);return l.$events[At]=i,Cn[l.$id]=function(e){for(;e=i.shift();)!function(e){avalon.nextTick(function(){var t=e.type;t&&Jt[t]&&(e.rollback&&e.rollback(),Jt[t](e,e.vmodels))})}(e);delete Cn[l.$id]},l}function x(e,t,n,r){var a=t[n];return 4!==arguments.length?a.call(e):void a.call(e,r)}function C(e){var t=[];t.$id=Xt(),t.$model=e,t.$events={},t.$events[At]=[],t._=b({length:e.length}),t._.$watch("length",function(e,n){t.$fire("length",e,n)});for(var n in wn)t[n]=wn[n];return avalon.mix(t,Nn),t}function T(e,t,n,r,a,i,o){for(var l=this.length,s=2;--s;){switch(e){case"add":var c=this.$model.slice(t,t+n).map(function(e){return Nt.test(avalon.type(e))?e.$id?e:b(e,0,e):e});On.apply(this,[t,0].concat(c)),this._fire("add",t,n);break;case"del":var u=this._splice(t,n);this._fire("del",t,n)}a&&(e=a,t=i,n=o,s=2,a=0)}return this._fire("index",r),this.length!==l&&(this._.length=this.length),u}function E(e,t){for(var n={},r=0,a=t.length;a>r;r++){n[r]=e[r];var i=t[r];i in n?(e[r]=n[i],delete n[i]):e[r]=e[i]}}function A(e){Bt[wt]=e,avalon.openComputedCollect=!0;var t=e.evaluator;if(t)try{var n=Sn.test(e.type)?e:t.apply(0,e.args);e.handler(n,e.element,e)}catch(r){delete e.evaluator;var a=e.element;if(3===a.nodeType){var i=a.parentNode;h.commentInterpolate?i.replaceChild($t.createComment(e.value),a):a.data=fn+e.value+dn}}avalon.openComputedCollect=!1,delete Bt[wt]}function k(e){var t=Bt[wt];e&&t&&avalon.Array.ensure(e,t)&&t.element&&M(t,e)}function M(e,t){e.$uuid=e.$uuid||Xt(),t.$uuid=t.$uuid||Xt();var n={data:e,list:t,$$uuid:e.$uuid+t.$uuid};Ln[n.$$uuid]||(Ln[n.$$uuid]=1,Ln.push(n))}function _(e){e.element=null,e.rollback&&e.rollback();for(var t in e)e[t]=null}function O(e){try{if(!e.parentNode)return!0}catch(t){return!0}return e.msRetain?0:1===e.nodeType?"number"==typeof e.sourceIndex?0===e.sourceIndex:!Rt.contains(e):!avalon.contains(Rt,e)}function N(){for(var e,t=Ln.length,n=t,r=0,a=[],i={},o={};e=Ln[--t];){var l=e.data,s=l.type;i[s]?i[s]++:(i[s]=1,a.push(s))}var c=!1;if(a.forEach(function(e){Hn[e]!==i[e]&&(o[e]=1,c=!0)}),t=n,c)for(;e=Ln[--t];)l=e.data,void 0!==l.element&&o[l.type]&&O(l.element)&&(r++,Ln.splice(t,1),delete Ln[e.$$uuid],avalon.Array.remove(e.list,l),_(l),e.data=e.list=null);Hn=i,jn=new Date}function S(e){if(e&&e.length){new Date-jn>444&&"object"==typeof e[0]&&N();for(var t,n=Ft.call(arguments,1),r=e.length;t=e[--r];){var i=t.element;if(i&&i.parentNode)if(t.$repeat)t.handler.apply(t,n);else if("on"!==t.type){var o=t.evaluator||a;t.handler(o.apply(0,t.args||[]),i,t)}}}}function L(e){var t=e.nodeName;return t.toLowerCase()===t&&e.scopeName&&""===e.outerText}function j(e){"url(#default#VML)"!==e.currentStyle.behavior&&(e.style.behavior="url(#default#VML)",e.style.display="inline-block",e.style.zoom=1)}function H(e,t,n){var r=setTimeout(function(){var a=e.innerHTML;clearTimeout(r),a===n?t():H(e,t,a)})}function P(e,t){var n=e.getAttribute("avalonctrl")||t.$id;e.setAttribute("avalonctrl",n),t.$events.expr=e.tagName+'[avalonctrl="'+n+'"]'}function D(e,t){for(var n,r=0;n=e[r++];)n.vmodels=t,Jt[n.type](n,t),n.evaluator&&n.element&&1===n.element.nodeType&&n.element.removeAttribute(n.name);e.length=0}function F(e,t){return e.priority-t.priority}function B(e,t){for(var n,a,i=ar?ar(e):avalon.slice(e.attributes),o=[],l={},s=0;a=i[s++];)if(a.specified&&(n=a.name.match(qn))){var c=n[1],u=n[2]||"",f=a.value,d=a.name;if(l[d]=f,Un[c]?(u=c,c="on"):Jn[c]&&(r("warning!请改用ms-attr-"+c+"代替ms-"+c+"！"),"enabled"===c&&(r("warning!ms-enabled或ms-attr-enabled已经被废弃"),c="disabled",f="!("+f+")"),u=c,c="attr",e.removeAttribute(d),d="ms-attr-"+u,e.setAttribute(d,f),n=[d],l[d]=f),"function"==typeof Jt[c]){var p={type:c,param:u,element:e,name:n[0],value:f,priority:c in Gn?Gn[c]:10*c.charCodeAt(0)+(Number(u)||0)};if("html"===c||"text"===c){var v=z(f);avalon.mix(p,v),p.filters=p.filters.replace(ir,function(){return p.type="html",p.group=1,""})}"ms-if-loop"===d&&(p.priority+=100),t.length&&(o.push(p),"widget"===c&&(e.msData=e.msData||l))}}if(o.sort(F),"form"in e&&l["ms-duplex"]){var h=e.type;l["ms-attr-checked"]&&/radio|checkbox/.test(h)&&r("warning!"+h+"控件不能同时定义ms-attr-checked与ms-duplex"),l["ms-attr-value"]&&/text|password/.test(h)&&r("warning!"+h+"控件不能同时定义ms-attr-value与ms-duplex")}var m=!0;for(s=0;p=o[s];s++){if(c=p.type,Zn.test(c))return D(o.slice(0,s+1),t);m&&(m=!Kn.test(c))}D(o,t),m&&!zn[e.tagName]&&hn.test(e.innerHTML.replace(lr,"<").replace(sr,">"))&&(Yn&&Yn(e),I(e,t))}function I(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;V(n,n.nodeType,t),n=r}}function R(e,t){for(var n,r=0;n=e[r++];)V(n,n.nodeType,t)}function V(e,t,n){1===t?W(e,n):3===t&&pn.test(e.data)?Y(e,n):h.commentInterpolate&&8===t&&!pn.test(e.nodeValue)&&Y(e,n)}function W(e,t,n){var a=e.getAttribute("ms-skip");if(!e.getAttributeNode)return r("warning "+e.tagName+" no getAttributeNode method");var i=e.getAttributeNode("ms-important"),o=e.getAttributeNode("ms-controller");if("string"!=typeof a){if(n=i||o){var l=avalon.vmodels[n.value];if(!l)return;t=n===i?[l]:[l].concat(t);var s=n.name;e.removeAttribute(s),avalon(e).removeClass(s),P(e,l)}B(e,t)}}function z(e){if(e.indexOf("|")>0){var t=e.replace(rstringLiteral,function(e){return Array(e.length+1).join("1")}),n=t.replace(or,"ᄢ㍄").indexOf("|");if(n>-1)return{filters:e.slice(n),value:e.slice(0,n),expr:!0}}return{value:e,filters:"",expr:!0}}function X(e){for(var t,n,r=[],a=0;;){if(n=e.indexOf(fn,a),-1===n)break;if(t=e.slice(a,n),t&&r.push({value:t,filters:"",expr:!1}),a=n+fn.length,n=e.indexOf(dn,a),-1===n)break;t=e.slice(a,n),t&&r.push(z(t)),a=n+dn.length}return t=e.slice(a),t&&r.push({value:t,expr:!1,filters:""}),r}function Y(e,t){var n=[];if(8===e.nodeType)var r=z(e.nodeValue),a=[r];else a=X(e.data);if(a.length){for(var i=0;r=a[i++];){var o=$t.createTextNode(r.value);r.expr&&(r.type="text",r.element=o,r.filters=r.filters.replace(ir,function(){return r.type="html",r.group=1,""}),n.push(r)),Vt.appendChild(o)}e.parentNode.replaceChild(Vt,e),n.length&&D(n,t)}}function q(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function G(e){return!e||e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}function U(e){if(!("classList"in e)){e.classList={node:e};for(var t in cr)e.classList[t.slice(1)]=cr[t]}return e.classList}function J(e){try{if("object"==typeof e)return e;e="true"===e?!0:"false"===e?!1:"null"===e?null:+e+""===e?+e:ur.test(e)?avalon.parseJSON(e):e}catch(t){}return e}function Z(e){return e.window&&e.document?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}function K(e,t){if(e.offsetWidth<=0){if(Er.test(hr["@:get"](e,"display"))){var n={node:e};for(var r in Tr)n[r]=e.style[r],e.style[r]=Tr[r];t.push(n)}var a=e.parentNode;a&&1===a.nodeType&&K(a,t)}}function Q(e){var t=e.tagName.toLowerCase();return"input"===t&&/checkbox|radio/.test(e.type)?"checked":t}function et(e,t,n,r){for(var a,i=[],o=" = "+n+".",l=e.length;a=e[--l];)t.hasOwnProperty(a)&&(i.push(a+o+a),r.vars.push(a),"duplex"===r.type&&(e.get=n+"."+a),e.splice(l,1));return i}function tt(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r],i=a&&"string"==typeof a.$id?a.$id:a;n[i]||(n[i]=t.push(a))}return t}function nt(e,t){return t=t.replace(Rr,"").replace(Vr,function(){return"],|"}).replace(Wr,function(e,t){return"["+_r(t)}).replace(zr,function(){return'"],["'}).replace(Xr,function(){return'",'})+"]","return avalon.filters.$filter("+e+", "+t+")"}function rt(e,t,n){var i=n.type,o=n.filters||"",l=t.map(function(e){return String(e.$id).replace(Ir,"$1")})+e+i+o,s=Dr(e).concat(),c=[],u=[],f=[],d="";t=tt(t),n.vars=[];for(var p=0,v=t.length;v>p;p++)if(s.length){var h="vm"+wt+"_"+p;u.push(h),f.push(t[p]),c.push.apply(c,et(s,t[p],h,n))}if(c.length||"duplex"!==i){"duplex"!==i&&(e.indexOf("||")>-1||e.indexOf("&&")>-1)&&n.vars.forEach(function(t){var n=new RegExp("\\b"+t+"(?:\\.\\w+|\\[\\w+\\])+","ig");e=e.replace(n,function(n){var r=n.charAt(t.length),a=Yt?e.slice(arguments[1]+n.length):RegExp.rightContext,i=/^\s*\(/.test(a);if("."===r||"["===r||i){var o="var"+String(Math.random()).replace(/^0\./,"");if(i){var l=n.split(".");if(l.length>2){var s=l.pop();return c.push(o+" = "+l.join(".")),o+"."+s}return n}return c.push(o+" = "+n),o}return n})}),n.args=f;var m=Fr.get(l);if(m)return void(n.evaluator=m);if(d=c.join(", "),d&&(d="var "+d),/\S/.test(o)){if(!/text|html/.test(n.type))throw Error("ms-"+n.type+"不支持过滤器");e="\nvar ret"+wt+" = "+e+";\r\n",e+=nt("ret"+wt,o)}else{if("duplex"===i){var g="'use strict';\nreturn function(vvv){\n	"+d+";\n	if(!arguments.length){\n		return "+e+"\n	}\n	"+(Br.test(e)?e:s.get)+"= vvv;\n} ";try{m=Function.apply(a,u.concat(g)),n.evaluator=Fr.put(l,m)}catch(y){r("debug: parse error,"+y.message)}return}if("on"===i){-1===e.indexOf("(")?e+=".call(this, $event)":e=e.replace("(",".call(this,"),u.push("$event"),e="\nreturn "+e+";";var b=e.lastIndexOf("\nreturn"),w=e.slice(0,b),$=e.slice(b);e=w+"\n"+$}else e="\nreturn "+e+";"}try{m=Function.apply(a,u.concat("'use strict';\n"+d+e)),n.evaluator=Fr.put(l,m)}catch(y){r("debug: parse error,"+y.message)}finally{s=c=u=null}}}function at(e,t,n,r,a){Array.isArray(r)&&(e=r.map(function(e){return e.expr?"("+e.value+")":_r(e.value)}).join(" + ")),rt(e,t,n),n.evaluator&&!a&&(n.handler=Zt[n.handlerName||n.type],A(n))}function it(e,t,n){var r=e.templateCache&&e.templateCache[t];if(r){for(var a,i=$t.createDocumentFragment();a=r.firstChild;)i.appendChild(a);return i}return avalon.parseHTML(n)}function ot(e){return null==e?"":e}function lt(e,t,n){return t.param.replace(/\w+/g,function(r){var a=avalon.duplexHooks[r];a&&"function"==typeof a[n]&&(e=a[n](e,t))}),e}function st(){for(var e=na.length-1;e>=0;e--){var t=na[e];t()===!1&&na.splice(e,1)}na.length||clearInterval(ta)}function ct(e,t,n,r){var a=e.template.cloneNode(!0),i=avalon.slice(a.childNodes);n.$stamp&&a.insertBefore(n.$stamp,a.firstChild),t.appendChild(a);var o=[n].concat(e.vmodels),l={nodes:i,vmodels:o};r.push(l)}function ut(e,t){var n=e.proxies[t];return n?n.$stamp:e.element}function ft(e,t,n){for(;;){var r=t.previousSibling;if(!r)break;if(r.parentNode.removeChild(r),n&&n.call(r),r===e)break}}function dt(e){var t={$host:[],$outer:{},$stamp:1,$index:0,$first:!1,$last:!1,$remove:avalon.noop};t[e]={get:function(){return this.$host[this.$index]},set:function(e){this.$host.set(this.$index,e)}};var n={$last:1,$first:1,$index:1},r=b(t,n),a=r.$events;return a[e]=a.$first=a.$last=a.$index,r.$id=Xt("$proxy$each"),r}function pt(e,t){for(var n,r=t.param||"el",a=0,i=oa.length;i>a;a++){var o=oa[a];o&&o.hasOwnProperty(r)&&(n=o,oa.splice(a,1))}n||(n=dt(r));var l=t.$repeat,s=l.length-1;return n.$index=e,n.$first=0===e,n.$last=e===s,n.$host=l,n.$outer=t.$outer,n.$stamp=t.clone.cloneNode(!1),n.$remove=function(){return l.removeAt(n.$index)},n}function vt(){var e=b({$key:"",$outer:{},$host:{},$val:{get:function(){return this.$host[this.$key]},set:function(e){this.$host[this.$key]=e}}},{$val:1});return e.$id=Xt("$proxy$with"),e}function ht(e,t){var n=la.pop();n||(n=vt());var r=t.$repeat;return n.$key=e,n.$host=r,n.$outer=t.$outer,r.$events?n.$events.$val=r.$events[e]:n.$events={},n}function mt(e,t){var n="each"===t?oa:la;avalon.each(e,function(e,t){if(t.$events){for(var r in t.$events)Array.isArray(t.$events[r])&&(t.$events[r].forEach(function(e){"object"==typeof e&&_(e)}),t.$events[r].length=0);t.$host=t.$outer={},n.unshift(t)>h.maxRepeatSize&&n.pop()}}),"each"===t&&(e.length=0)}function gt(e,t){var n="_"+e;if(!gt[n]){var r=$t.createElement(e);Rt.appendChild(r),t=It?getComputedStyle(r,null).display:r.currentStyle.display,Rt.removeChild(r),gt[n]=t}return gt[n]}function yt(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+e)?+e:0,i=isFinite(+t)?Math.abs(t):3,o=r||",",l=n||".",s="",c=function(e,t){var n=Math.pow(10,t);return""+(Math.round(e*n)/n).toFixed(t)};return s=(i?c(a,i):""+Math.round(a)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(s[1]||"").length<i&&(s[1]=s[1]||"",s[1]+=new Array(i-s[1].length+1).join("0")),s.join(l)}function bt(){try{Rt.doScroll("left"),ya()}catch(e){setTimeout(bt)}}var wt=new Date-0,$t=window.document,xt=$t.getElementsByTagName("head")[0],Ct=xt.insertBefore(document.createElement("avalon"),xt.firstChild);Ct.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>",Ct.setAttribute("ms-skip","1"),Ct.className="avalonHide";var Tt,Et=/\[native code\]/,At="$"+wt,kt=window.require,Mt=window.define,_t=!1,Ot=/[^, ]+/g,Nt=/^(?:object|array)$/,St=/^\[object SVG\w*Element\]$/,Lt=/^\[object (?:Window|DOMWindow|global)\]$/,jt=Object.prototype,Ht=jt.hasOwnProperty,Pt=jt.toString,Dt=Array.prototype,Ft=Dt.slice,Bt={},It=window.dispatchEvent,Rt=$t.documentElement,Vt=$t.createDocumentFragment(),Wt=$t.createElement("div"),zt={};"Boolean Number String Function Array Date RegExp Object Error".replace(Ot,function(e){zt["[object "+e+"]"]=e.toLowerCase()});var Xt=function(e){return e=e||"avalon",(e+Math.random()+Math.random()).replace(/0\./g,"")},Yt=o();avalon=function(e){return new avalon.init(e)},avalon.nextTick=new function(){function e(){for(var e=a.length,t=0;e>t;t++)a[t]();a=a.slice(e)}var t=window.setImmediate,n=window.MutationObserver,r=It&&window.postMessage;if(t)return t.bind(window);var a=[];if(n){var i=document.createTextNode("avalon");return new n(e).observe(i,{characterData:!0}),function(e){a.push(e),i.data=Math.random()}}return r?(window.addEventListener("message",function(t){var n=t.source;n!==window&&null!==n||"process-tick"!==t.data||(t.stopPropagation(),e())}),function(e){a.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}},avalon.init=function(e){this[0]=this.element=e},avalon.fn=avalon.prototype=avalon.init.prototype,avalon.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?zt[Pt.call(e)]||"object":typeof e};var qt="object"==typeof alert?function(e){try{return/^\s*\bfunction\b/.test(e+"")}catch(t){return!1}}:function(e){return"[object Function]"===Pt.call(e)};avalon.isFunction=qt,avalon.isWindow=function(e){return e?e==e.document&&e.document!=e:!1},l(window)&&(avalon.isWindow=l);var Gt;for(Gt in avalon({}))break;var Ut="0"!==Gt;avalon.isPlainObject=function(e,t){if(!e||"object"!==avalon.type(e)||e.nodeType||avalon.isWindow(e))return!1;try{if(e.constructor&&!Ht.call(e,"constructor")&&!Ht.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(Ut)for(t in e)return Ht.call(e,t);for(t in e);return void 0===t||Ht.call(e,t)},Et.test(Object.getPrototypeOf)&&(avalon.isPlainObject=function(e){return"[object Object]"===Pt.call(e)&&Object.getPrototypeOf(e)===jt}),avalon.mix=avalon.fn.mix=function(){var e,t,n,r,a,i,o=arguments[0]||{},l=1,s=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},l++),"object"==typeof o||qt(o)||(o={}),l===s&&(o=this,l--);s>l;l++)if(null!=(e=arguments[l]))for(t in e){n=o[t];try{r=e[t]}catch(u){continue}o!==r&&(c&&r&&(avalon.isPlainObject(r)||(a=Array.isArray(r)))?(a?(a=!1,i=n&&Array.isArray(n)?n:[]):i=n&&avalon.isPlainObject(n)?n:{},o[t]=avalon.mix(c,i,r)):void 0!==r&&(o[t]=r))}return o},avalon.mix({rword:Ot,subscribers:At,version:1.42,ui:{},log:r,slice:It?function(e,t,n){return Ft.call(e,t,n)}:function(e,t,n){var r=[],a=e.length;if(void 0===n&&(n=a),"number"==typeof n&&isFinite(n)){t=s(t,a),n=s(n,a);for(var i=t;n>i;++i)r[i-t]=e[i]}return r},noop:a,error:function(e,t){throw(t||Error)(e)},oneObject:i,range:function(e,t,n){n||(n=1),null==t&&(t=e||0,e=0);for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e,e+=n;return i},eventHooks:{},bind:function(e,t,n,r){var a=avalon.eventHooks,i=a[t];"object"==typeof i&&(t=i.type,i.deel&&(n=i.deel(e,t,n,r)));var o=It?n:function(t){n.call(e,v(t))};return It?e.addEventListener(t,o,!!r):e.attachEvent("on"+t,o),o},unbind:function(e,t,n,r){var i=avalon.eventHooks,o=i[t],l=n||a;"object"==typeof o&&(t=o.type,o.deel&&(n=o.deel(e,t,n,!1))),It?e.removeEventListener(t,l,!!r):e.detachEvent("on"+t,l)},css:function(e,t,n){e instanceof avalon&&(e=e[0]);var r,a=/[_-]/.test(t)?G(t):t;if(t=avalon.cssName(a)||a,void 0===n||"boolean"==typeof n){r=hr[a+":get"]||hr["@:get"],"background"===t&&(t="backgroundColor");var i=r(e,t);return n===!0?parseFloat(i)||0:i}if(""===n)e.style[t]="";else{if(null==n||n!==n)return;isFinite(n)&&!avalon.cssNumber[a]&&(n+="px"),r=hr[a+":set"]||hr["@:set"],r(e,t,n)}},each:function(e,t){if(e){var n=0;if(c(e))for(var r=e.length;r>n&&t(n,e[n])!==!1;n++);else for(n in e)if(e.hasOwnProperty(n)&&t(n,e[n])===!1)break}},getWidgetData:function(e,t){var n=avalon(e).data(),r={};for(var a in n)0===a.indexOf(t)&&(r[a.replace(t,"").replace(/\w/,function(e){return e.toLowerCase()})]=n[a]);return r},Array:{ensure:function(e,t){return-1===e.indexOf(t)?e.push(t):void 0},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var n=e.indexOf(t);return~n?avalon.Array.removeAt(e,n):!1}}});var Jt=avalon.bindingHandlers={},Zt=avalon.bindingExecutors={},Kt=new function(){function e(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap={}}var t=e.prototype;return t.put=function(e,t){var n={key:e,value:t};return this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():this.size++,t},t.shift=function(){var e=this.head;e&&(this.head=this.head.newer,this.head.older=e.newer=e.older=this._keymap[e.key]=void 0)},t.get=function(e){var t=this._keymap[e];if(void 0!==t)return t===this.tail?t.value:(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t,t.value)},e};if(!"司徒正美".trim){var Qt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(Qt,"")}}var en=!{toString:null}.propertyIsEnumerable("toString"),tn=function(){}.propertyIsEnumerable("prototype"),nn=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],rn=nn.length;if(Object.keys||(Object.keys=function(e){var t=[],n=tn&&"function"==typeof e;if("string"==typeof e||e&&e.callee)for(var r=0;r<e.length;++r)t.push(String(r));else for(var a in e)n&&"prototype"===a||!Ht.call(e,a)||t.push(String(a));if(en)for(var i=e.constructor,o=i&&i.prototype===e,l=0;rn>l;l++){var s=nn[l];o&&"constructor"===s||!Ht.call(e,s)||t.push(s)}return t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Pt.call(e)}),a.bind||(Function.prototype.bind=function(e){if(arguments.length<2&&void 0===e)return this;var t=this,n=arguments;return function(){var r,a=[];for(r=1;r<n.length;r++)a.push(n[r]);for(r=0;r<arguments.length;r++)a.push(arguments[r]);return t.apply(e,a)}}),Et.test([].map)||avalon.mix(Dt,{indexOf:function(e,t){var n=this.length,r=~~t;for(0>r&&(r+=n);n>r;r++)if(this[r]===e)return r;return-1},lastIndexOf:function(e,t){var n=this.length,r=null==t?n-1:t;for(0>r&&(r=Math.max(0,n+r));r>=0;r--)if(this[r]===e)return r;return-1},forEach:u("","_",""),filter:u("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:u("r=[],","r[i]=_","return r"),some:u("","if(_)return true","return false"),every:u("","if(!_)return false","return true")}),avalon.contains=f,$t.contains||($t.contains=function(e){return f($t,e)}),window.SVGElement){$t.createTextNode("x").contains||(Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))});var an="http://www.w3.org/2000/svg",on=$t.createElementNS(an,"svg");on.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />',St.test(on.firstChild)||Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:d,set:function(e){var t=this.tagName.toLowerCase(),n=this.parentNode,r=avalon.parseHTML(e);if("svg"===t)n.insertBefore(r,this);else{var a=$t.createDocumentFragment();p(r,a),n.insertBefore(a,this)}n.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(n,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var t=avalon.parseHTML(e);p(t,this)}}}})}!Rt.outerHTML&&window.HTMLElement&&HTMLElement.prototype.__defineGetter__("outerHTML",d);var ln=/^(?:mouse|contextmenu|drag)|click/,sn=avalon.eventHooks;if("onmouseenter"in Rt||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){sn[e]={type:t,deel:function(t,n,r){return function(n){var a=n.relatedTarget;return a&&(a===t||16&t.compareDocumentPosition(a))?void 0:(delete n.type,n.type=e,r.call(t,n))}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,t){window[e]&&!sn.animationend&&(sn.animationend={type:t})}),"oninput"in $t.createElement("input")||(sn.input={type:"propertychange",deel:function(e,t,n){return function(t){return"value"===t.propertyName?(t.type="input",n.call(e,t)):void 0}}}),void 0===$t.onmousewheel){var cn=void 0!==$t.onwheel?"wheel":"DOMMouseScroll",un="wheel"===cn?"deltaY":"detail";sn.mousewheel={type:cn,deel:function(e,t,n){return function(t){t.wheelDeltaY=t.wheelDelta=t[un]>0?-120:120,t.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(t,"type",{value:"mousewheel"}),n.call(e,t)}}}}var fn,dn,pn,vn,hn,mn=/[-.*+?^${}()|[\]\/\\]/g,gn={loader:function(e){var t=Tt&&e;window.require=t?Tt:kt,window.define=t?Tt.define:Mt},interpolate:function(e){if(fn=e[0],dn=e[1],fn===dn)throw new SyntaxError("openTag!==closeTag");if(e+""=="<!--,-->")h.commentInterpolate=!0;else{var t=fn+"test"+dn;if(Wt.innerHTML=t,Wt.innerHTML!==t&&Wt.innerHTML.indexOf("&lt;")>-1)throw new SyntaxError("此定界符不合法");Wt.innerHTML=""}var n=m(fn),r=m(dn);pn=new RegExp(n+"(.*?)"+r),vn=new RegExp(n+"(.*?)"+r,"g"),hn=new RegExp(n+".*?"+r+"|\\sms-")}};h.debug=!0,h.plugins=gn,h.plugins.interpolate(["{{","}}"]),h.paths={},h.shim={},h.maxRepeatSize=100,avalon.config=h;var yn=/(\w+)\[(avalonctrl)="(\S+)"\]/,bn=$t.querySelectorAll?function(e){return $t.querySelectorAll(e)}:function(e){for(var t,n=e.match(yn),r=$t.getElementsByTagName(n[1]),a=[],i=0;t=r[i++];)t.getAttribute(n[2])===n[3]&&a.push(t);return a},wn={$watch:function(e,t){if("function"==typeof t){var n=this.$events[e];n?n.push(t):this.$events[e]=[t]}else this.$events=this.$watch.backup;return this},$unwatch:function(e,t){var n=arguments.length;if(0===n)this.$watch.backup=this.$events,this.$events={};else if(1===n)this.$events[e]=[];else for(var r=this.$events[e]||[],a=r.length;~--a<0;)if(r[a]===t)return r.splice(a,1);return this},$fire:function(e){var t,n,r,a;/^(\w+)!(\S+)$/.test(e)&&(t=RegExp.$1,e=RegExp.$2);var i=this.$events;if(i){var o=Ft.call(arguments,1),l=[e].concat(o);if("all"===t)for(n in avalon.vmodels)r=avalon.vmodels[n],r!==this&&r.$fire.apply(r,l);else if("up"===t||"down"===t){var s=i.expr?bn(i.expr):[];if(0===s.length)return;for(n in avalon.vmodels)if(r=avalon.vmodels[n],r!==this&&r.$events.expr){var c=bn(r.$events.expr);if(0===c.length)continue;Array.prototype.forEach.call(c,function(e){Array.prototype.forEach.call(s,function(n){var a="down"===t?n.contains(e):e.contains(n);a&&(e._avalon=r)})})}var u=$t.getElementsByTagName("*"),f=[];for(Array.prototype.forEach.call(u,function(e){e._avalon&&(f.push(e._avalon),e._avalon="",e.removeAttribute("_avalon"))}),"up"===t&&f.reverse(),n=0;(a=f[n++])&&a.$fire.apply(a,l)!==!1;);}else{var d=i[e]||[],p=i.$all||[];for(n=0;a=d[n++];)qt(a)&&a.apply(this,o);for(n=0;a=p[n++];)qt(a)&&a.apply(this,arguments)}}}},$n=avalon.vmodels={};avalon.define=function(e,t){var n=e.$id||e;if(n||r("warning: vm必须指定$id"),$n[n]&&r("warning: "+n+" 已经存在于avalon.vmodels中"),"object"==typeof e)var i=b(e);else{var o={$watch:a};t(o),i=b(o),_t=!0,t(i),_t=!1}return i.$id=n,$n[n]=i};var xn=String("$id,$watch,$unwatch,$fire,$events,$model,$skipArray").match(Ot),Cn={},Tn=Object.defineProperty,En=!0;try{Tn({},"_",{value:"x"});var An=Object.defineProperties}catch(kn){En=!1}var Mn=Object.is||function(e,t){return 0===e&&0===t?1/e===1/t:e!==e?t!==t:e===t},_n=It?function(e){var t={};for(var n in e)t[n]={get:e[n],set:e[n],enumerable:!0,configurable:!0};return t}:function(e){return e};En||("__defineGetter__"in avalon&&(Tn=function(e,t,n){return"value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e},An=function(e,t){for(var n in t)t.hasOwnProperty(n)&&Tn(e,n,t[n]);return e}),Yt&&(window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function","Dim VBClassBodies",'Set VBClassBodies=CreateObject("Scripting.Dictionary")',"Function findOrDefineVBClass(name,body)","	Dim found",'	found=""',"	For Each key in VBClassBodies","		If body=VBClassBodies.Item(key) Then","			found=key","			Exit For","		End If","	next",'	If found="" Then','		parseVB("Class " + name + body)',"		VBClassBodies.Add name, body","		found=name","	End If","	findOrDefineVBClass=found","End Function"].join("\n"),"VBScript"),An=function(e,t,n){var r="VBClass"+setTimeout("1"),a=[];a.push("\r\n	Private [__data__], [__proxy__]","	Public Default Function [__const__](d, p)","		Set [__data__] = d: set [__proxy__] = p","		Set [__const__] = Me","	End Function");for(e in n)t.hasOwnProperty(e)||a.push("	Public ["+e+"]");xn.forEach(function(e){t.hasOwnProperty(e)||a.push("	Public ["+e+"]")}),a.push("	Public [hasOwnProperty]");for(e in t)a.push("	Public Property Let ["+e+"](val"+wt+")",'		Call [__proxy__](Me,[__data__], "'+e+'", val'+wt+")","	End Property","	Public Property Set ["+e+"](val"+wt+")",'		Call [__proxy__](Me,[__data__], "'+e+'", val'+wt+")","	End Property","	Public Property Get ["+e+"]","	On Error Resume Next","		Set["+e+'] = [__proxy__](Me,[__data__],"'+e+'")',"	If Err.Number <> 0 Then","		["+e+'] = [__proxy__](Me,[__data__],"'+e+'")',"	End If","	On Error Goto 0","	End Property");a.push("End Class");var i=a.join("\r\n"),o=window.findOrDefineVBClass(r,i);o===r&&window.parseVB(["Function "+r+"Factory(a, b)","	Dim o","	Set o = (New "+r+")(a, b)","	Set "+r+"Factory = o","End Function"].join("\r\n"));var l=window[o+"Factory"](t,x);return l}));var On=Dt.splice,Nn={_splice:On,_fire:function(e,t,n){S(this.$events[At],e,t,n)},size:function(){return this._.length},pushArray:function(e){var t=e.length,n=this.length;return t&&(Dt.push.apply(this.$model,e),T.call(this,"add",n,t,Math.max(0,n-1))),t+n},push:function(){var e,t=[],n=arguments.length;for(e=0;n>e;e++)t[e]=arguments[e];return this.pushArray(t)},unshift:function(){var e=arguments.length,t=this.length;return e&&(Dt.unshift.apply(this.$model,arguments),T.call(this,"add",0,e,0)),e+t},shift:function(){if(this.length){var e=this.$model.shift();return T.call(this,"del",0,1,0),e}},pop:function(){var e=this.length;if(e){var t=this.$model.pop();return T.call(this,"del",e-1,1,Math.max(0,e-2)),t}},splice:function(e){var t,n=arguments.length,r=[],a=On.apply(this.$model,arguments);return a.length&&(r.push("del",e,a.length,0),t=!0),n>2&&(t?r.splice(3,1,0,"add",e,n-2):r.push("add",e,n-2,0),t=!0),t?T.apply(this,r):[]},contains:function(e){return-1!==this.indexOf(e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return e>=0?(this.$model.splice(e,1),T.call(this,"del",e,1,0)):[]},clear:function(){return this.$model.length=this.length=this._.length=0,this._fire("clear",0),this},removeAll:function(e){if(Array.isArray(e))e.forEach(function(e){this.remove(e)},this);else if("function"==typeof e)for(var t=this.length-1;t>=0;t--){var n=this[t];e(n,t)&&this.removeAt(t)}else this.clear()},ensure:function(e){return this.contains(e)||this.push(e),this},set:function(e,t){if(e>=0){var n=avalon.type(t);t&&t.$model&&(t=t.$model);var r=this[e];if("object"===n)for(var a in t)r.hasOwnProperty(a)&&(r[a]=t[a]);else"array"===n?r.clear().push.apply(r,t):r!==t&&(this[e]=t,this.$model[e]=t,this._fire("set",e,t))
}return this}};"sort,reverse".replace(Ot,function(e){Nn[e]=function(){var t,n=this.$model,r=n.concat(),a=Math.random(),i=[];Dt[e].apply(n,arguments);for(var o=0,l=r.length;l>o;o++){var s=n[o],c=r[o];if(Mn(s,c))i.push(o);else{var u=r.indexOf(s);i.push(u),r[u]=a,t=!0}}return t&&(E(this,i),this._fire("move",i),this._fire("index",0)),this}});var Sn=/^(duplex|on)$/,Ln=avalon.$$subscribers=[],jn=new Date,Hn={},Pn={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:It?[0,"",""]:[1,"X<div>","</div>"]};Pn.th=Pn.td,Pn.optgroup=Pn.option,Pn.tbody=Pn.tfoot=Pn.colgroup=Pn.caption=Pn.thead,String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(Ot,function(e){Pn[e]=Pn.g});var Dn=/<([\w:]+)/,Fn=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Bn=It?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/gi,In=i(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]),Rn=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/,Vn=$t.createElement("script"),Wn=/<|&#?\w+;/;avalon.parseHTML=function(e){var t=Vt.cloneNode(!1);if("string"!=typeof e)return t;if(!Wn.test(e))return t.appendChild($t.createTextNode(e)),t;e=e.replace(Fn,"<$1></$2>").trim();var n,r,a=(Dn.exec(e)||["",""])[1].toLowerCase(),i=Pn[a]||Pn._default,o=Wt;It||(e=e.replace(Bn,"<br class=msNoScope>$1")),o.innerHTML=i[1]+e+i[2];var l=o.getElementsByTagName("script");if(l.length)for(var s,c=0;s=l[c++];)In[s.type]&&(r=Vn.cloneNode(!1),Dt.forEach.call(s.attributes,function(e){e&&e.specified&&(r[e.name]=e.value,r.setAttribute(e.name,e.value))}),r.text=s.text,s.parentNode.replaceChild(r,s));if(!It){var u="X<div>"===i[1]?o.lastChild.firstChild:o.lastChild;if(u&&"TABLE"===u.tagName&&"tbody"!==a)for(l=u.childNodes,c=0;s=l[c++];)if("TBODY"===s.tagName&&!s.innerHTML){u.removeChild(s);break}l=o.getElementsByTagName("br");for(var f=l.length;s=l[--f];)"msNoScope"===s.className&&s.parentNode.removeChild(s);for(l=o.all,c=0;s=l[c++];)L(s)&&j(s)}for(c=i[0];c--;o=o.lastChild);for(;n=o.firstChild;)t.appendChild(n);return t},avalon.innerHTML=function(e,t){if(!It&&!Bn.test(t)&&!Rn.test(t))try{return void(e.innerHTML=t)}catch(n){}var r=this.parseHTML(t);this.clearHTML(e).appendChild(r)},avalon.clearHTML=function(e){for(e.textContent="";e.firstChild;)e.removeChild(e.firstChild);return e},avalon.scan=function(e,t){e=e||Rt;var n=t?[].concat(t):[];W(e,n)};var zn=i("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase()),Xn=function(e,t,n){var r=e.getAttribute(t);if(r)for(var a,i=0;a=n[i++];)if(a.hasOwnProperty(r)&&"function"==typeof a[r])return a[r]},Yn=Yt&&window.MutationObserver?function(e){for(var t,n=e.firstChild;n;){var r=n.nextSibling;3===n.nodeType?t?(t.nodeValue+=n.nodeValue,e.removeChild(n)):t=n:t=null,n=r}}:0,qn=/ms-(\w+)-?(.*)/,Gn={"if":10,repeat:90,data:100,widget:110,each:1400,"with":1500,duplex:2e3,on:3e3},Un=i("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit"),Jn=i("value,title,alt,checked,selected,disabled,readonly,enabled"),Zn=/^if|widget|repeat$/,Kn=/^each|with|html|include$/;if(!"1"[0])var Qn=new Kt(512),er=/\s+(ms-[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,tr=/^['"]/,nr=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,rr=/&amp;/g,ar=function(e){var t=e.outerHTML;if("</"===t.slice(0,2)||!t.trim())return[];var n,r,a,i=t.match(nr)[0],o=[],l=Qn.get(i);if(l)return l;for(;r=er.exec(i);){a=r[2],a&&(a=(tr.test(a)?a.slice(1,-1):a).replace(rr,"&"));var s=r[1].toLowerCase();n=s.match(qn);var c={name:s,specified:!0,value:a||""};o.push(c)}return Qn.put(i,o)};var ir=/\|\s*html\s*/,or=/\|\|/g,lr=/&lt;/g,sr=/&gt;/g;rstringLiteral=/(['"])(\\\1|.)+?\1/g;var cr={_toString:function(){var e=this.node,t=e.className,n="string"==typeof t?t:t.baseVal;return n.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){this.contains(e)||this._set(this+" "+e)},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var t=this.node;St.test(t)?t.setAttribute("class",e):t.className=e}};"add,remove".replace(Ot,function(e){avalon.fn[e+"Class"]=function(t){var n=this[0];return t&&"string"==typeof t&&n&&1===n.nodeType&&t.replace(/\S+/g,function(t){U(n)[e](t)}),this}}),avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return 1===t.nodeType&&U(t).contains(e)},toggleClass:function(e,t){for(var n,r=0,a=String(e).split(/\s+/),i="boolean"==typeof t;n=a[r++];){var o=i?t:!this.hasClass(n);this[o?"addClass":"removeClass"](n)}return this},attr:function(e,t){return 2===arguments.length?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},data:function(e,t){switch(e="data-"+q(e||""),arguments.length){case 2:return this.attr(e,t),this;case 1:var n=this.attr(e);return J(n);case 0:var r={};return Dt.forEach.call(this[0].attributes,function(t){t&&(e=t.name,e.indexOf("data-")||(e=G(e.slice(5)),r[e]=J(t.value)))}),r}},removeData:function(e){return e="data-"+q(e),this[0].removeAttribute(e),this},css:function(e,t){if(avalon.isPlainObject(e))for(var n in e)avalon.css(this,n,e[n]);else var r=avalon.css(this,e,t);return void 0!==r?r:this},position:function(){var e,t,n=this[0],r={top:0,left:0};if(n)return"fixed"===this.css("position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),"HTML"!==e[0].tagName&&(r=e.offset()),r.top+=avalon.css(e[0],"borderTopWidth",!0),r.left+=avalon.css(e[0],"borderLeftWidth",!0),r.top-=e.scrollTop(),r.left-=e.scrollLeft()),{top:t.top-r.top-avalon.css(n,"marginTop",!0),left:t.left-r.left-avalon.css(n,"marginLeft",!0)}},offsetParent:function(){for(var e=this[0].offsetParent;e&&"static"===avalon.css(e,"position");)e=e.offsetParent;return avalon(e||Rt)},bind:function(e,t,n){return this[0]?avalon.bind(this[0],e,t,n):void 0},unbind:function(e,t,n){return this[0]&&avalon.unbind(this[0],e,t,n),this},val:function(e){var t=this[0];if(t&&1===t.nodeType){var n=0===arguments.length,r=n?":get":":set",a=kr[Q(t)+r];if(a)var i=a(t,e);else{if(n)return(t.value||"").replace(/\r/g,"");t.value=e}}return n?i:this}});var ur=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,fr=/^[\],:{}\s]*$/,dr=/(?:^|:|,)(?:\s*\[)+/g,pr=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,vr=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=window.JSON?JSON.parse:function(e){if("string"==typeof e){if(e=e.trim(),e&&fr.test(e.replace(pr,"@").replace(vr,"]").replace(dr,"")))return new Function("return "+e)();avalon.error("Invalid JSON: "+e)}return e},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){avalon.fn[e]=function(n){var r=this[0]||{},a=Z(r),i="scrollTop"===e;return arguments.length?void(a?a.scrollTo(i?avalon(a).scrollLeft():n,i?n:avalon(a).scrollTop()):r[e]=n):a?t in a?a[t]:Rt[e]:r[e]}});var hr=avalon.cssHooks={},mr=["","-webkit-","-o-","-moz-","-ms-"],gr={"float":It?"cssFloat":"styleFloat"};if(avalon.cssNumber=i("columnCount,order,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(e,t,n){if(gr[e])return gr[e];t=t||Rt.style;for(var r=0,a=mr.length;a>r;r++)if(n=G(mr[r]+e),n in t)return gr[e]=n;return null},hr["@:set"]=function(e,t,n){try{e.style[t]=n}catch(r){}},window.getComputedStyle)hr["@:get"]=function(e,t){if(!e||!e.style)throw new Error("getComputedStyle要求传入一个节点 "+e);var n,r=getComputedStyle(e,null);return r&&(n="filter"===t?r.getPropertyValue(t):r[t],""===n&&(n=e.style[t])),n},hr["opacity:get"]=function(e){var t=hr["@:get"](e,"opacity");return""===t?"1":t};else{var yr=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,br=/^(top|right|bottom|left)$/,wr=/alpha\([^)]*\)/i,$r=!!window.XDomainRequest,xr="DXImageTransform.Microsoft.Alpha",Cr={thin:$r?"1px":"2px",medium:$r?"3px":"4px",thick:$r?"5px":"6px"};hr["@:get"]=function(e,t){var n=e.currentStyle,r=n[t];if(yr.test(r)&&!br.test(r)){var a=e.style,i=a.left,o=e.runtimeStyle.left;e.runtimeStyle.left=n.left,a.left="fontSize"===t?"1em":r||0,r=a.pixelLeft+"px",a.left=i,e.runtimeStyle.left=o}return"medium"===r&&(t=t.replace("Width","Style"),"none"===n[t]&&(r="0px")),""===r?"auto":Cr[r]||r},hr["opacity:set"]=function(e,t,n){var r=e.style,a=isFinite(n)&&1>=n?"alpha(opacity="+100*n+")":"",i=r.filter||"";r.zoom=1,r.filter=(wr.test(i)?i.replace(wr,a):i+" "+a).trim(),r.filter||r.removeAttribute("filter")},hr["opacity:get"]=function(e){var t=e.filters.alpha||e.filters[xr],n=t&&t.enabled?t.opacity:100;return n/100+""}}"top,left".replace(Ot,function(e){hr[e+":get"]=function(t){var n=hr["@:get"](t,e);return/px$/.test(n)?n:avalon(t).position()[e]+"px"}});var Tr={position:"absolute",visibility:"hidden",display:"block"},Er=/^(none|table(?!-c[ea]).+)/;"Width,Height".replace(Ot,function(e){var t=e.toLowerCase(),n="client"+e,r="scroll"+e,a="offset"+e;hr[t+":get"]=function(t,n,r){var i=-4;"number"==typeof r&&(i=r),n="Width"===e?["Left","Right"]:["Top","Bottom"];var o=t[a];return 2===i?o+avalon.css(t,"margin"+n[0],!0)+avalon.css(t,"margin"+n[1],!0):(0>i&&(o=o-avalon.css(t,"border"+n[0]+"Width",!0)-avalon.css(t,"border"+n[1]+"Width",!0)),-4===i&&(o=o-avalon.css(t,"padding"+n[0],!0)-avalon.css(t,"padding"+n[1],!0)),o)},hr[t+"&get"]=function(e){var n=[];K(e,n);for(var r,a=hr[t+":get"](e),i=0;r=n[i++];){e=r.node;for(var o in r)"string"==typeof r[o]&&(e.style[o]=r[o])}return a},avalon.fn[t]=function(i){var o=this[0];if(0===arguments.length){if(o.setTimeout)return o["inner"+e]||o.document.documentElement[n];if(9===o.nodeType){var l=o.documentElement;return Math.max(o.body[r],l[r],o.body[a],l[a],l[n])}return hr[t+"&get"](o)}return this.css(t,i)},avalon.fn["inner"+e]=function(){return hr[t+":get"](this[0],void 0,-2)},avalon.fn["outer"+e]=function(e){return hr[t+":get"](this[0],void 0,e===!0?2:0)}}),avalon.fn.offset=function(){var e=this[0],t={left:0,top:0};if(!e||!e.tagName||!e.ownerDocument)return t;var n=e.ownerDocument,r=n.body,a=n.documentElement,i=n.defaultView||n.parentWindow;if(!avalon.contains(a,e))return t;e.getBoundingClientRect&&(t=e.getBoundingClientRect());var o=a.clientTop||r.clientTop,l=a.clientLeft||r.clientLeft,s=Math.max(i.pageYOffset||0,a.scrollTop,r.scrollTop),c=Math.max(i.pageXOffset||0,a.scrollLeft,r.scrollLeft);return{top:t.top+s-o,left:t.left+c-l}};var Ar=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,kr={"option:get":Yt?function(e){return Ar.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,t){for(var n,r=e.options,a=e.selectedIndex,i=kr["option:get"],o="select-one"===e.type||0>a,l=o?null:[],s=o?a+1:r.length,c=0>a?s:o?a:0;s>c;c++)if(n=r[c],(n.selected||c===a)&&!n.disabled){if(t=i(n),o)return t;l.push(t)}return l},"select:set":function(e,t,n){t=[].concat(t);for(var r,a=kr["option:get"],i=0;r=e.options[i++];)(r.selected=t.indexOf(a(r))>-1)&&(n=!0);n||(e.selectedIndex=-1)}},Mr={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},_r=window.JSON&&JSON.stringify||function(e){return'"'+e.replace(/[\\\"\x00-\x1f]/g,function(e){var t=Mr[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'},Or=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(","),Nr=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,Sr=/[^\w$]+/g,Lr=new RegExp(["\\b"+Or.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),jr=/\b\d[^,]*/g,Hr=/^,+|,+$/g,Pr=new Kt(512),Dr=function(e){var t=","+e.trim(),n=Pr.get(t);if(n)return n;var r=e.replace(Nr,"").replace(Sr,",").replace(Lr,"").replace(jr,"").replace(Hr,"").split(/^$|,+/);return Pr.put(t,tt(r))},Fr=new Kt(128),Br=/\w\[.*\]|\w\.\w/,Ir=/(\$proxy\$[a-z]+)\d+$/,Rr=/\)\s*$/,Vr=/\)\s*\|/g,Wr=/\|\s*([$\w]+)/g,zr=/"\s*\["/g,Xr=/"\s*\(/g;avalon.parseExprProxy=at;var Yr=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(","),qr={};Yr.replace(Ot,function(e){qr[e.toLowerCase()]=e});var Gr={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"},Ur=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");Ur.replace(Ot,function(e){Gr[e.toLowerCase()]=e});var Jr=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/gim,Zr=/<noscript.*?>([\s\S]+?)<\/noscript>/im,Kr=function(){return new(window.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")},Qr=avalon.templateCache={};Jt.attr=function(e,t){var n=e.value.trim(),r=!0;if(n.indexOf(fn)>-1&&n.indexOf(dn)>2&&(r=!1,pn.test(n)&&""===RegExp.rightContext&&""===RegExp.leftContext&&(r=!0,n=RegExp.$1)),"include"===e.type){var a=e.element;e.includeRendered=Xn(a,"data-include-rendered",t),e.includeLoaded=Xn(a,"data-include-loaded",t);var i=e.includeReplace=!!avalon(a).data("includeReplace");avalon(a).data("includeCache")&&(e.templateCache={}),e.startInclude=$t.createComment("ms-include"),e.endInclude=$t.createComment("ms-include-end"),i?(e.element=e.startInclude,a.parentNode.insertBefore(e.startInclude,a),a.parentNode.insertBefore(e.endInclude,a.nextSibling)):(a.insertBefore(e.startInclude,a.firstChild),a.appendChild(e.endInclude))}e.handlerName="attr",at(n,t,e,r?0:X(e.value))},Zt.attr=function(e,t,n){var r=n.type,a=n.param;if("css"===r)avalon(t).css(a,e);else if("attr"===r){var i=e===!1||null===e||void 0===e;!It&&Gr[a]&&(a=Gr[a]);var o=qr[a];if("boolean"==typeof t[o]&&(t[o]=!!e,e||(i=!0)),i)return t.removeAttribute(a);var l=St.test(t)?!1:$t.namespaces&&L(t)?!0:a in t.cloneNode(!1);l?t[a]=e:t.setAttribute(a,e)}else if("include"===r&&e){var s=n.vmodels,c=n.includeRendered,u=n.includeLoaded,f=n.includeReplace,d=f?t.parentNode:t,p=function(t){if(u){var r=u.apply(d,[t].concat(s));"string"==typeof r&&(t=r)}c&&H(d,function(){c.call(d)},0/0);var a=n.includeLastID;if(n.templateCache&&a&&a!==e){var i=n.templateCache[a];i||(i=n.templateCache[a]=$t.createElement("div"),Ct.appendChild(i))}for(n.includeLastID=e;;){var o=n.startInclude.nextSibling;if(!o||o===n.endInclude)break;d.removeChild(o),i&&i.appendChild(o)}var l=it(n,e,t),f=avalon.slice(l.childNodes);d.insertBefore(l,n.endInclude),R(f,s)};if("src"===n.param)if("string"==typeof Qr[e])avalon.nextTick(function(){p(Qr[e])});else if(Array.isArray(Qr[e]))Qr[e].push(p);else{var v=Kr();v.onreadystatechange=function(){if(4===v.readyState){var t=v.status;if(t>=200&&300>t||304===t||1223===t){for(var n,r=v.responseText,a=0;n=Qr[e][a++];)n(r);Qr[e]=r}}},Qr[e]=[p],v.open("GET",e,!0),"withCredentials"in v&&(v.withCredentials=!0),v.setRequestHeader("X-Requested-With","XMLHttpRequest"),v.send(null)}else{var h=e&&1===e.nodeType?e:$t.getElementById(e);if(h){if("NOSCRIPT"===h.tagName&&!h.innerHTML&&!h.fixIE78){v=Kr(),v.open("GET",location,!1),v.send(null);for(var m=$t.getElementsByTagName("noscript"),g=(v.responseText||"").match(Jr)||[],y=g.length,b=0;y>b;b++){var w=m[b];w&&(w.style.display="none",w.fixIE78=(g[b].match(Zr)||["","&nbsp;"])[1])}}avalon.nextTick(function(){p(h.fixIE78||h.value||h.innerText||h.innerHTML)})}}}else if(Rt.hasAttribute||"string"!=typeof e||"src"!==r&&"href"!==r||(e=e.replace(/&amp;/g,"&")),t[r]=e,window.chrome&&"EMBED"===t.tagName){var $=t.parentNode,x=document.createComment("ms-src");$.replaceChild(x,t),$.replaceChild(t,x)}},"title,alt,src,value,css,include,href".replace(Ot,function(e){Jt[e]=Jt.attr}),Jt["class"]=function(e,t){var n,a=e.param,i=e.value;if(e.handlerName="class",!a||isFinite(a)){e.param="";var o=i.replace(vn,function(e){return e.replace(/./g,"0")}),l=o.indexOf(":");if(-1===l)var s=i;else{if(s=i.slice(0,l),n=i.slice(l+1),rt(n,t,e),!e.evaluator)return r("debug: ms-class '"+(n||"").trim()+"' 不存在于VM中"),!1;e._evaluator=e.evaluator,e._args=e.args}var c=pn.test(s);c||(e.immobileClass=s),at("",t,e,c?X(s):0)}else e.immobileClass=e.oldStyle=e.param,at(i,t,e)},Zt["class"]=function(e,t,n){var r=avalon(t),a=n.type;if("class"===a&&n.oldStyle)r.toggleClass(n.oldStyle,!!e);else switch(n.toggleClass=n._evaluator?!!n._evaluator.apply(t,n._args):!0,n.newClass=n.immobileClass||e,n.oldClass&&n.newClass!==n.oldClass&&r.removeClass(n.oldClass),n.oldClass=n.newClass,a){case"class":r.toggleClass(n.newClass,n.toggleClass);break;case"hover":case"active":if(!n.hasBindEvent){var i="mouseenter",o="mouseleave";if("active"===a){t.tabIndex=t.tabIndex||-1,i="mousedown",o="mouseup";var l=r.bind("mouseleave",function(){n.toggleClass&&r.removeClass(n.newClass)})}var s=r.bind(i,function(){n.toggleClass&&r.addClass(n.newClass)}),c=r.bind(o,function(){n.toggleClass&&r.removeClass(n.newClass)});n.rollback=function(){r.unbind("mouseleave",l),r.unbind(i,s),r.unbind(o,c)},n.hasBindEvent=!0}}},"hover,active".replace(Ot,function(e){Jt[e]=Jt["class"]}),Zt.data=function(e,t,n){var r="data-"+n.param;e&&"object"==typeof e?t[r]=e:t.setAttribute(r,String(e))};var ea=Jt.duplex=function(e,t){var n,o=e.element;if(at(e.value,t,e,0,1),e.changed=Xn(o,"data-duplex-changed",t)||a,e.evaluator&&e.args){var l=[],s=i("string,number,boolean,checked");"radio"===o.type&&""===e.param&&(e.param="checked"),o.msData&&(o.msData["ms-duplex"]=e.value),e.param.replace(/\w+/g,function(t){/^(checkbox|radio)$/.test(o.type)&&/^(radio|checked)$/.test(t)&&("radio"===t&&r("ms-duplex-radio已经更名为ms-duplex-checked"),t="checked",e.isChecked=!0),"bool"===t?(t="boolean",r("ms-duplex-bool已经更名为ms-duplex-boolean")):"text"===t&&(t="string",r("ms-duplex-text已经更名为ms-duplex-string")),s[t]&&(n=!0),avalon.Array.ensure(l,t)}),n||l.push("string"),e.param=l.join("-"),e.bound=function(t,n){o.addEventListener?o.addEventListener(t,n,!1):o.attachEvent("on"+t,n);var r=e.rollback;e.rollback=function(){o.avalonSetter=null,avalon.unbind(o,t,n),r&&r()}};for(var c in avalon.vmodels){var u=avalon.vmodels[c];u.$fire("avalon-ms-duplex-init",e)}var f=e.pipe||(e.pipe=lt);f(null,e,"init");var d=o.tagName;ea[d]&&ea[d](o,e.evaluator.apply(null,e.args),e)}};avalon.duplexHooks={checked:{get:function(e,t){return!t.element.oldValue}},string:{get:function(e){return e},set:ot},"boolean":{get:function(e){return"true"===e},set:ot},number:{get:function(e,t){var n=parseFloat(e);if(-e===-n)return n;var r=/strong|medium|weak/.exec(t.element.getAttribute("data-duplex-number"))||["medium"];switch(r[0]){case"strong":return 0;case"medium":return""===e?"":0;case"weak":return e}},set:ot}};var ta,na=[];avalon.tick=function(e){1===na.push(e)&&(ta=setInterval(st,60))};var ra=a,aa=/text|password|hidden/;!new function(){function e(e){if(avalon.contains(Rt,this)){if(t[this.tagName].call(this,e),!aa.test(this.type))return;!this.msFocus&&this.avalonSetter&&this.avalonSetter()}}try{var t={},n=HTMLInputElement.prototype,r=HTMLTextAreaElement.prototype,a=HTMLInputElement.prototype;Object.getOwnPropertyNames(a),t.INPUT=Object.getOwnPropertyDescriptor(n,"value").set,Object.defineProperty(n,"value",{set:e}),t.TEXTAREA=Object.getOwnPropertyDescriptor(r,"value").set,Object.defineProperty(r,"value",{set:e})}catch(i){ra=avalon.tick}},Yt&&avalon.bind($t,"selectionchange",function(){var e=$t.activeElement;e&&"function"==typeof e.avalonSetter&&e.avalonSetter()}),ea.INPUT=function(e,t,n){function a(e){n.changed.call(this,e,n)}function i(){f=!0}function o(){f=!1}function l(e){setTimeout(function(){d(e)})}var s=e.type,c=n.bound,u=avalon(e),f=!1,d=function(){if(!f){var r=e.oldValue=e.value,i=n.pipe(r,n,"get");u.data("duplexObserve")!==!1&&(t(i),a.call(e,i),u.data("duplex-focus")&&avalon.nextTick(function(){e.focus()}))}};if(n.handler=function(){var r=n.pipe(t(),n,"set")+"";r!==e.oldValue&&(e.value=r)},n.isChecked||"radio"===s){var p=6===Yt;d=function(){if(u.data("duplexObserve")!==!1){var r=n.pipe(e.value,n,"get");t(r),a.call(e,r)}},n.handler=function(){var r=t(),a=n.isChecked?!!r:r+""===e.value;e.oldValue=a,p?setTimeout(function(){e.defaultChecked=a,e.checked=a},31):e.checked=a},c("click",d)}else if("checkbox"===s)d=function(){if(u.data("duplexObserve")!==!1){var i=e.checked?"ensure":"remove",o=t();Array.isArray(o)||(r("ms-duplex应用于checkbox上要对应一个数组"),o=[o]),avalon.Array[i](o,n.pipe(e.value,n,"get")),a.call(e,o)}},n.handler=function(){var r=[].concat(t());e.checked=r.indexOf(n.pipe(e.value,n,"get"))>-1},c(It?"change":"click",d);else{var v=e.getAttribute("data-duplex-event")||"input";e.attributes["data-event"]&&r("data-event指令已经废弃，请改用data-duplex-event"),v.replace(Ot,function(e){switch(e){case"input":Yt?(Yt>8?c("input",d):c("propertychange",function(e){"value"===e.propertyName&&d()}),c("dragend",l)):(c("input",d),c("compositionstart",i),c("compositionend",o),c("DOMAutoComplete",d));break;default:c(e,d)}}),c("focus",function(){e.msFocus=!0}),c("blur",function(){e.msFocus=!1}),aa.test(s)&&ra(function(){if(Rt.contains(e))e.msFocus||e.oldValue===e.value||d();else if(!e.msRetain)return!1}),e.avalonSetter=d}e.oldValue=e.value,A(n),a.call(e,e.value)},ea.TEXTAREA=ea.INPUT,ea.SELECT=function(e,t,n){function a(){if(i.data("duplexObserve")!==!1){var r=i.val();r=Array.isArray(r)?r.map(function(e){return n.pipe(e,n,"get")}):n.pipe(r,n,"get"),r+""!==e.oldValue&&t(r),n.changed.call(e,r,n)}}var i=avalon(e);n.handler=function(){var n=t();n=n&&n.$model||n,Array.isArray(n)?e.multiple||r("ms-duplex在<select multiple=true>上要求对应一个数组"):e.multiple&&r("ms-duplex在<select multiple=false>不能对应一个数组"),n=Array.isArray(n)?n.map(String):n+"",n+""!==e.oldValue&&(i.val(n),e.oldValue=n+"")},n.bound("change",a),H(e,function(){A(n),n.changed.call(e,t(),n)},0/0)},Zt.html=function(e,t,n){e=null==e?"":e;var r="group"in n,a=r?t.parentNode:t;if(a){if(11===e.nodeType)var i=e;else if(1===e.nodeType||e.item){var o=1===e.nodeType?e.childNodes:e.item?e:[];for(i=Vt.cloneNode(!0);o[0];)i.appendChild(o[0])}else i=avalon.parseHTML(e);var l=$t.createComment("ms-html");if(r){a.insertBefore(l,t);for(var s=n.group,c=1;s>c;){var u=t.nextSibling;u&&(a.removeChild(u),c++)}a.removeChild(t),n.element=l}else avalon.clearHTML(a).appendChild(l);r&&(n.group=i.childNodes.length||1),o=avalon.slice(i.childNodes),o[0]&&(l.parentNode&&l.parentNode.replaceChild(i,l),r&&(n.element=o[0])),R(o,n.vmodels)}},Jt["if"]=Jt.data=Jt.text=Jt.html=function(e,t){at(e.value,t,e)},Zt["if"]=function(e,t,n){if(e)8===t.nodeType&&(t.parentNode.replaceChild(n.template,t),t=n.element=n.template),t.getAttribute(n.name)&&(t.removeAttribute(n.name),B(t,n.vmodels)),n.rollback=null;else if(1===t.nodeType){var r=n.element=$t.createComment("ms-if");t.parentNode.replaceChild(r,t),n.template=t,Ct.appendChild(t),n.rollback=function(){t.parentNode===Ct&&Ct.removeChild(t)}}},Jt.layout=function(){};var ia=/\(([^)]*)\)/;Jt.on=function(e,t){var n=e.value;e.type="on";var r=e.param.replace(/-\d+$/,"");if("function"==typeof Jt.on[r+"Hook"]&&Jt.on[r+"Hook"](e),n.indexOf("(")>0&&n.indexOf(")")>-1){var a=(n.match(ia)||["",""])[1].trim();(""===a||"$event"===a)&&(n=n.replace(ia,""))}at(n,t,e)},Zt.on=function(e,t,n){e=function(e){var t=n.evaluator||a;return t.apply(this,n.args.concat(e))};var r=n.param.replace(/-\d+$/,"");if("scan"===r)e.call(t,{type:r});else if("function"==typeof n.specialBind)n.specialBind(t,e);else var i=avalon.bind(t,r,e);n.rollback=function(){"function"==typeof n.specialUnbind?n.specialUnbind():avalon.unbind(t,r,i)}},Jt.repeat=function(e,t){var n=e.type;at(e.value,t,e,0,1),e.proxies=[];var r=!1;try{var a=e.$repeat=e.evaluator.apply(0,e.args||[]),i=avalon.type(a);"object"!==i&&"array"!==i&&(r=!0,avalon.log("warning:"+e.value+"只能是对象或数组"))}catch(o){r=!0}var l=e.value.split(".")||[];if(l.length>1){l.pop();for(var s,c=l[0],u=0;s=t[u++];)if(s&&s.hasOwnProperty(c)){var f=s[c].$events||{};f[At]=f[At]||[],f[At].push(e);break}}var d=e.element;d.removeAttribute(e.name),e.sortedCallback=Xn(d,"data-with-sorted",t),e.renderedCallback=Xn(d,"data-"+n+"-rendered",t);var p=Xt(n),v=e.element=$t.createComment(p+":end");if(e.clone=$t.createComment(p),Vt.appendChild(v),"each"===n||"with"===n?(e.template=d.innerHTML.trim(),avalon.clearHTML(d).appendChild(v)):(e.template=d.outerHTML.trim(),d.parentNode.replaceChild(v,d)),e.template=avalon.parseHTML(e.template),e.rollback=function(){var t=e.element;if(t){Zt.repeat.call(e,"clear");var n=t.parentNode,r=e.template,a=r.firstChild;n.replaceChild(r,t);var i=e.$stamp;i&&i.parentNode&&i.parentNode.removeChild(i),a=e.element="repeat"===e.type?a:n}},!r){e.handler=Zt.repeat,e.$outer={};var h="$key",m="$val";for(Array.isArray(a)&&(h="$first",m="$last"),u=0;s=t[u++];)if(s.hasOwnProperty(h)&&s.hasOwnProperty(m)){e.$outer=s;break}var g=a.$events,y=(g||{})[At];if(y&&avalon.Array.ensure(y,e)&&M(e,y),"object"===i){e.$with=!0;var b=g?g.$withProxyPool||(g.$withProxyPool={}):{};e.handler("append",a,b)}else a.length&&e.handler("add",0,a.length)}},Zt.repeat=function(e,t,n){if(e){var r=this,i=r.element,o=i.parentNode,l=r.proxies,s=Vt.cloneNode(!1);switch(e){case"add":for(var c,u=t+n,f=r.$repeat,d=f.length-1,p=[],v=ut(r,t),h=t;u>h;h++){var m=pt(h,r);l.splice(h,0,m),ct(r,s,m,p)}for(o.insertBefore(s,v),h=0;c=p[h++];)R(c.nodes,c.vmodels),c.nodes=c.vmodels=null;break;case"del":v=l[t].$stamp,i=ut(r,t+n),ft(v,i);var g=l.splice(t,n);mt(g,"each");break;case"clear":var y=r.$stamp||l[0];y&&(v=y.$stamp||y,ft(v,i)),mt(l,"each");break;case"move":v=l[0].$stamp;var b,w=v.nodeValue,$=[],x=[];for(ft(v,i,function(){x.unshift(this),this.nodeValue===w&&($.unshift(x),x=[])}),E(l,t),E($,t);x=$.shift();)for(;b=x.shift();)s.appendChild(b);o.insertBefore(s,i);break;case"index":for(d=l.length-1;n=l[t];t++)n.$index=t,n.$first=0===t,n.$last=t===d;return;case"set":return m=l[t],void(m&&S(m.$events.$index));case"append":var C=n,T=[];p=[];for(var A in t)t.hasOwnProperty(A)&&"hasOwnProperty"!==A&&T.push(A);if(r.sortedCallback){var k=r.sortedCallback.call(o,T);k&&Array.isArray(k)&&k.length&&(T=k)}for(h=0;A=T[h++];)"hasOwnProperty"!==A&&(C[A]||(C[A]=ht(A,r)),ct(r,s,C[A],p));var M=r.$stamp=r.clone;for(o.insertBefore(M,i),o.insertBefore(s,i),h=0;c=p[h++];)R(c.nodes,c.vmodels),c.nodes=c.vmodels=null}"clear"===e&&(e="del");var _=r.renderedCallback||a,O=arguments;H(o,function(){_.apply(o,O),o.oldValue&&"SELECT"===o.tagName&&avalon(o).val(o.oldValue.split(","))},0/0)}},"with,each".replace(Ot,function(e){Jt[e]=Jt.repeat});var oa=[],la=[];Zt.text=function(e,t){if(e=null==e?"":e,3===t.nodeType)try{t.data=e}catch(n){}else"textContent"in t?t.textContent=e:t.innerText=e},avalon.parseDisplay=gt,Jt.visible=function(e,t){var n=avalon(e.element),r=n.css("display");if("none"===r){var a=n[0].style,i=/visibility/i.test(a.cssText),o=n.css("visibility");a.display="",a.visibility="hidden",r=n.css("display"),"none"===r&&(r=gt(n[0].nodeName)),a.visibility=i?o:""}e.display=r,at(e.value,t,e)},Zt.visible=function(e,t,n){t.style.display=e?n.display:"none"},Jt.widget=function(e,t){var n=e.value.match(Ot),r=e.element,i=n[0],o=n[1];o&&"$"!==o||(o=Xt(i));var l=n[2]||i,s=avalon.ui[i];if("function"==typeof s){t=r.vmodels||t;for(var c,u=0;c=t[u++];)if(c.hasOwnProperty(l)&&"object"==typeof c[l]){var f=c[l];f=f.$model||f;break}if(f){var d=f[i+"Id"];"string"==typeof d&&(o=d)}var p=avalon.getWidgetData(r,i);e.value=[i,o,l].join(","),e[i+"Id"]=o,e.evaluator=a,r.msData["ms-widget-id"]=o;var v=e[i+"Options"]=avalon.mix({},s.defaults,f||{},p);r.removeAttribute("ms-widget");var h=s(r,e,t)||{};if(h.$id){avalon.vmodels[o]=h,P(r,h);try{h.$init(function(){avalon.scan(r,[h].concat(t)),"function"==typeof v.onInit&&v.onInit.call(r,h,v,t)})}catch(m){}e.rollback=function(){try{h.widgetElement=null,h.$remove()}catch(e){}r.msData={},delete avalon.vmodels[h.$id]},M(e,sa),window.chrome&&r.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(N)})}else avalon.scan(r,t)}else t.length&&(r.vmodels=t)};var sa=[],ca=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,ua=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,fa=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,da={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi},pa=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,va=/([^\#-~| |!])/g,ha=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,n){return t=t||30,n=void 0===n?"...":n,e.length>t?e.slice(0,t-n.length)+n:String(e)},$filter:function(e){for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t],a=avalon.filters[r.shift()];if("function"==typeof a){var i=[e].concat(r);e=a.apply(null,i)}}return e},camelize:G,sanitize:function(e){return e.replace(ca,"").replace(fa,function(e){var t=e.toLowerCase().match(/<(\w+)\s/);if(t){var n=da[t[1]];n&&(e=e.replace(n,function(e,t,n){var r=n.charAt(0);return t+"="+r+"javascript:void(0)"+r}))}return e.replace(ua," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(pa,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(va,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,t,n){return(t||"￥")+yt(e,isFinite(n)?n:2)},number:yt};!new function(){function e(e){return parseInt(e,10)||0}function t(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function n(e,n,r,a){return function(i){var o=i["get"+e]();return(r>0||o>-r)&&(o+=r),0===o&&-12===r&&(o=12),t(o,n,a)}}function r(e,t){return function(n,r){var a=n["get"+e](),i=(t?"SHORT"+e:e).toUpperCase();return r[i][a]}}function a(e){var n=-1*e.getTimezoneOffset(),r=n>=0?"+":"";return r+=t(Math[n>0?"floor":"ceil"](n/60),2)+t(Math.abs(n%60),2)}function i(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}var o={yyyy:n("FullYear",4),yy:n("FullYear",2,0,!0),y:n("FullYear",1),MMMM:r("Month"),MMM:r("Month",!0),MM:n("Month",2,1),M:n("Month",1,1),dd:n("Date",2),d:n("Date",1),HH:n("Hours",2),H:n("Hours",1),hh:n("Hours",2,-12),h:n("Hours",1,-12),mm:n("Minutes",2),m:n("Minutes",1),ss:n("Seconds",2),s:n("Seconds",1),sss:n("Milliseconds",3),EEEE:r("Day"),EEE:r("Day",!0),a:i,Z:a},l=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,s=/^\/Date\((\d+)\)\/$/;ha.date=function(t,n){var r,a,i=ha.date.locate,c="",u=[];if(n=n||"mediumDate",n=i[n]||n,"string"==typeof t)if(/^\d+$/.test(t))t=e(t);else if(s.test(t))t=+RegExp.$1;else{var f=t.trim(),d=[0,0,0,0,0,0,0],p=new Date(0);f=f.replace(/^(\d+)\D(\d+)\D(\d+)/,function(t,n,r,a){var i=4===a.length?[a,n,r]:[n,r,a];return d[0]=e(i[0]),d[1]=e(i[1])-1,d[2]=e(i[2]),""});var v=p.setFullYear,h=p.setHours;f=f.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(t,n,r,a,i){return d[3]=e(n),d[4]=e(r),d[5]=e(a),i&&(d[6]=Math.round(1e3*parseFloat("0."+i))),""});var m=0,g=0;f=f.replace(/Z|([+-])(\d\d):?(\d\d)/,function(t,n,r,a){return v=p.setUTCFullYear,h=p.setUTCHours,n&&(m=e(n+r),g=e(n+a)),""}),d[3]-=m,d[4]-=g,v.apply(p,d.slice(0,3)),h.apply(p,d.slice(3)),t=p}if("number"==typeof t&&(t=new Date(t)),"date"===avalon.type(t)){for(;n;)a=l.exec(n),a?(u=u.concat(a.slice(1)),n=u.pop()):(u.push(n),n=null);return u.forEach(function(e){r=o[e],c+=r?r(t,i):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}};var c={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};
c.SHORTMONTH=c.MONTH,ha.date.locate=c};var ma,ga=[],ya=function(e){for(ma=!0,Tt&&(modules["domReady!"].state=4,Tt.checkDeps());e=ga.shift();)e(avalon)};if("complete"===$t.readyState)setTimeout(ya);else if(It)$t.addEventListener("DOMContentLoaded",ya);else{$t.attachEvent("onreadystatechange",function(){"complete"===$t.readyState&&ya()});try{var ba=null===window.frameElement}catch(kn){}Rt.doScroll&&ba&&window.external&&bt()}avalon.bind(window,"load",ya),avalon.ready=function(e){ma?e(avalon):ga.push(e)},avalon.config({loader:!1}),avalon.ready(function(){avalon.scan($t.body)});var wa=window.avalon;avalon.noConflict=function(e){return e&&window.avalon===avalon&&(window.avalon=wa),avalon},window.avalon=avalon,n.exports=avalon});
;define("common:widget/dep/etpl/main.js",function(t,e,n){!function(t){function r(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function i(){this.raw=[],this.length=0}function o(){return"___"+B++}function s(t,e){var n=new Function;n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t){return I[t]}function p(t){return'"'+t.replace(/\x5C/g,"\\\\").replace(/"/g,'\\"').replace(/\x0A/g,"\\n").replace(/\x09/g,"\\t").replace(/\x0D/g,"\\r")+'"'}function h(t){return t.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(t){return"\\"+t})}function c(t){var e=arguments;return t.replace(/\{([0-9]+)\}/g,function(t,n){return e[n-0+1]})}function l(t){return t=t.replace(/^\s*\*/,""),c('gv({0},["{1}"])',p(t),t.replace(/\[['"]?([^'"]+)['"]?\]/g,function(t,e){return"."+e}).split(".").join('","'))}function u(t,e,n,r,i,o){for(var s=n.length,a=t.split(e),p=0,h=[],c=0,l=a.length;l>c;c++){var u=a[c];if(c){var f=1;for(p++;;){var d=u.indexOf(n);if(0>d){h.push(p>1&&f?e:"",u);break}if(p=r?p-1:0,h.push(p>0&&f?e:"",u.slice(0,d),p>0?n:""),u=u.slice(d+s),f=0,0===p)break}0===p&&(i(h.join("")),o(u),h=[])}else u&&o(u)}p>0&&h.length>0&&(o(e),o(h.join("")))}function f(t,e,n){var r,i=[],o=e.options,s="",a="",h="",c="";return n&&(s="ts(",a=")",h=z,c=S,r=o.defaultFilter),u(t,o.variableOpen,o.variableClose,1,function(t){n&&t.indexOf("|")<0&&r&&(t+="|"+r);var o=t.indexOf("|"),p=(o>0?t.slice(0,o):t).replace(/^\s+/,"").replace(/\s+$/,""),u=o>0?t.slice(o+1):"",d=0===p.indexOf("*"),g=[d?"":s,l(p),d?"":a];if(u){u=f(u,e);for(var y=u.split("|"),v=0,m=y.length;m>v;v++){var R=y[v];/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(R)&&(g.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3&&g.push(",",RegExp.$3),g.push(")"))}}i.push(h,g.join(""),c)},function(t){i.push(h,n?p(t):t,c)}),i.join("")}function d(t,e){this.value=t,this.engine=e}function g(t,e){this.value=t,this.engine=e,this.children=[],this.cloneProps=[]}function y(t,e){var n=t.stack,r=e?n.find(function(t){return t instanceof e}):n.bottom();if(r){for(var i;(i=n.top())!==r;){if(!i.autoClose)throw new Error(i.type+" must be closed manually: "+i.value);i.autoClose(t)}r.close(t)}return r}function v(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.master=RegExp.$3,this.name=RegExp.$1,g.call(this,t,e),this.blocks={}}function m(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,g.call(this,t,e),this.cloneProps=["name"]}function R(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,g.call(this,t,e),this.cloneProps=["name","state","blocks"],this.blocks={}}function x(t,e){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,this.expr=RegExp.$2,g.call(this,t,e),this.cloneProps=["name","expr"]}function E(t,e){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,this.args=RegExp.$3,g.call(this,t,e),this.cloneProps=["name","args"]}function w(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,this.args=RegExp.$3,g.call(this,t,e),this.cloneProps=["name","args"]}function b(t,e){var n=new RegExp(c("^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$",h(e.options.variableOpen),h(e.options.variableClose)),"i");if(!n.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,g.call(this,t,e),this.cloneProps=["list","item","index"]}function $(t,e){g.call(this,t,e)}function k(t,e){$.call(this,t,e)}function A(t,e){g.call(this,t,e)}function C(t,e){e.target=t;var n=e.engine,r=t.name;if(n.targets[r])switch(n.options.namingConflict){case"override":n.targets[r]=t,e.targets.push(r);case"ignore":break;default:throw new Error("Target exists: "+r)}else n.targets[r]=t,e.targets.push(r)}function O(t,e){G[t]=e,e.prototype.type=t}function P(t){this.options={commandOpen:"<!--",commandClose:"-->",commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:"${",variableClose:"}",defaultFilter:"html"},this.config(t),this.targets={},this.filters=r({},_)}function D(t,e){function n(){var t;if(c.length>0&&(t=c.join(""))){var n=new d(t,e);n.beforeAdd(h),p.top().addChild(n),c=[],e.options.strip&&h.current instanceof g&&(n.value=t.replace(/^[\x20\t\r]*\n/,"")),h.current=n}}var r,o=e.options.commandOpen,s=e.options.commandClose,a=e.options.commandSyntax,p=new i,h={engine:e,targets:[],stack:p,target:null},c=[];return u(t,o,s,0,function(t){var i=a.exec(t);if(i&&(r=G[i[2].toLowerCase()])&&"function"==typeof r){n();var p=h.current;e.options.strip&&p instanceof d&&(p.value=p.value.replace(/\r?\n[\x20\t]*$/,"\n")),i[1]?p=y(h,r):(p=new r(i[3],e),"function"==typeof p.beforeOpen&&p.beforeOpen(h),p.open(h)),h.current=p}else/^\s*\/\//.test(t)||c.push(o,t,s);r=null},function(t){c.push(t)}),n(),y(h),h.targets}i.prototype={push:function(t){this.raw[this.length++]=t},pop:function(){if(this.length>0){var t=this.raw[--this.length];return this.raw.length=this.length,t}},top:function(){return this.raw[this.length-1]},bottom:function(){return this.raw[0]},find:function(t){for(var e=this.length;e--;){var n=this.raw[e];if(t(n))return n}}};var B=178245,I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_={html:function(t){return t.replace(/[&<>"']/g,a)},url:encodeURIComponent,raw:function(t){return t}},j='var r="";',z="r+=",S=";",F="return r;";"undefined"!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8&&(j="var r=[],ri=0;",z="r[ri++]=",F='return r.join("");'),d.prototype={getRendererBody:function(){var t=this.value,e=this.engine.options;return!t||e.strip&&/^\s*$/.test(t)?"":f(t,this.engine,1)},clone:function(){return this}},g.prototype={addChild:function(t){this.children.push(t)},open:function(t){var e=t.stack.top();e&&e.addChild(this),t.stack.push(this)},close:function(t){t.stack.top()===this&&t.stack.pop()},getRendererBody:function(){for(var t=[],e=this.children,n=0;n<e.length;n++)t.push(e[n].getRendererBody());return t.join("")},clone:function(){for(var t=this.constructor,e=new t(this.value,this.engine),n=0,r=this.children.length;r>n;n++)e.addChild(this.children[n].clone());for(var n=0,r=this.cloneProps.length;r>n;n++){var i=this.cloneProps[n];e[i]=this[i]}return e}};var L='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';s(v,g),s(m,g),s(R,g),s(x,g),s(E,g),s(w,g),s(b,g),s($,g),s(k,$),s(A,$);var M={READING:1,READED:2,APPLIED:3,READY:4};R.prototype.applyMaster=v.prototype.applyMaster=function(t){function e(t){var r=t.children;if(r instanceof Array)for(var i=0,o=r.length;o>i;i++){var s=r[i];s instanceof m&&n[s.name]&&(s=r[i]=n[s.name]),e(s)}}if(this.state>=M.APPLIED)return 1;var n=this.blocks,r=this.engine.targets[t];return r&&r.applyMaster(r.master)?(this.children=r.clone().children,e(this),this.state=M.APPLIED,1):void 0},v.prototype.isReady=function(){function t(r){for(var i=0,o=r.children.length;o>i;i++){var s=r.children[i];if(s instanceof R){var a=e.targets[s.name];n=n&&a&&a.isReady(e)}else s instanceof g&&t(s)}}if(this.state>=M.READY)return 1;var e=this.engine,n=1;return this.applyMaster(this.master)?(t(this),n&&(this.state=M.READY),n):void 0},v.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var t=new Function("data","engine",[L,j,this.getRendererBody(),F].join("\n")),e=this.engine;return this.renderer=function(n){return t(n,e)},this.renderer}return null},v.prototype.open=function(t){y(t),g.prototype.open.call(this,t),this.state=M.READING,C(this,t)},x.prototype.open=w.prototype.open=function(t){t.stack.top().addChild(this)},m.prototype.open=function(t){g.prototype.open.call(this,t),(t.imp||t.target).blocks[this.name]=this},k.prototype.open=function(t){var e=new A;e.open(t);var n=y(t,$);n.addChild(this),t.stack.push(this)},A.prototype.open=function(t){var e=y(t,$);e.addChild(this),t.stack.push(this)},R.prototype.open=function(t){this.parent=t.stack.top(),this.target=t.target,g.prototype.open.call(this,t),this.state=M.READING,t.imp=this},w.prototype.close=x.prototype.close=function(){},R.prototype.close=function(t){g.prototype.close.call(this,t),this.state=M.READED,t.imp=null},v.prototype.close=function(t){g.prototype.close.call(this,t),this.state=this.master?M.READED:M.APPLIED,t.target=null},R.prototype.autoClose=function(t){var e=this.parent.children;e.push.apply(e,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(t)},w.prototype.beforeOpen=R.prototype.beforeOpen=x.prototype.beforeOpen=b.prototype.beforeOpen=E.prototype.beforeOpen=m.prototype.beforeOpen=$.prototype.beforeOpen=d.prototype.beforeAdd=function(t){if(!t.stack.bottom()){var e=new v(o(),t.engine);e.open(t)}},R.prototype.getRendererBody=function(){return this.applyMaster(this.name),g.prototype.getRendererBody.call(this)},w.prototype.getRendererBody=function(){return c("{0}engine.render({2},{{3}}){1}",z,S,p(this.name),f(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(t,e,n){return(e||"")+p(n)+":"}))},x.prototype.getRendererBody=function(){return this.expr?c("v[{0}]={1};",p(this.name),f(this.expr,this.engine)):""},$.prototype.getRendererBody=function(){return c("if({0}){{1}}",f(this.value,this.engine),g.prototype.getRendererBody.call(this))},A.prototype.getRendererBody=function(){return c("}else{{0}",g.prototype.getRendererBody.call(this))},b.prototype.getRendererBody=function(){return c('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',o(),f(this.list,this.engine),p(this.index||o()),p(this.item),o(),o(),g.prototype.getRendererBody.call(this))},E.prototype.getRendererBody=function(){var t=this.args;return c("{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}",j,F,z,S,g.prototype.getRendererBody.call(this),p(this.name),t?","+f(t,this.engine):"")};var G={};O("target",v),O("block",m),O("import",R),O("use",w),O("var",x),O("for",b),O("if",$),O("elif",k),O("else",A),O("filter",E),P.prototype.config=function(t){r(this.options,t)},P.prototype.compile=P.prototype.parse=function(t){if(t){var e=D(t,this);if(e.length)return this.targets[e[0]].getRenderer()}return new Function('return ""')},P.prototype.getRenderer=function(t){var e=this.targets[t];return e?e.getRenderer():void 0},P.prototype.render=function(t,e){var n=this.getRenderer(t);return n?n(e):""},P.prototype.addFilter=function(t,e){"function"==typeof e&&(this.filters[t]=e)};var N=new P;N.Engine=P,"object"==typeof e&&"object"==typeof n?e=n.exports=N:"function"==typeof define&&define.amd?define(N):t.etpl=N}(this)});
;define("common:widget/dep/moye/lib/array.js",function(r,e,n){function t(r){return function(){return Function.call.apply(r,arguments)}}var e={slice:t(Array.prototype.slice),each:function(r,n,t){var a,c=r.length;if(c===+c)for(a=0;c>a;a++)n.call(t,r[a],a,r);else{var l=e.keys(r);for(a=0,c=l.length;c>a;a++){var o=l[a];n.call(t,r[o],o,r)}}return r},map:function(r,n,t){var a,c=r.length,l=[];if(c===+c)for(a=0;c>a;a++)l[a]=n.call(t,r[a],a,r);else{var o=e.keys(r);for(a=0,c=o.length;c>a;a++){var u=o[a];l.push(n.call(t,r[u],u,r))}}return l},reduce:function(r,n,t,a){return e.each(r,function(r,e){t=n.call(a,t,r,e)},a),t},keys:Object.keys?Object.keys:function(r){var e=[];for(var n in r)r.hasOwnProperty(n)&&e.push(n);return e},range:function(r,e,n){arguments.length<=1&&(e=r||0,r=0),n=n||1;for(var t=Math.max(Math.ceil((e-r)/n),0),a=Array(t),c=0;t>c;c++,r+=n)a[c]=r;return a}};n.exports=e});
;define("common:widget/dep/moye/lib/function.js",function(n,t,e){var r=n("common:widget/dep/moye/lib/array.js").slice;e.exports={binds:function(n,t){if("string"==typeof t&&(t=~t.indexOf(",")?t.split(/\s*,\s*/):r(arguments,1)),t&&t.length)for(var e,u;e=t.pop();)u=e&&n[e],u&&(n[e]=$.proxy(u,n))},debounce:function(n,t){var e=null;return function(){return e?void 0:(e=setTimeout(function(){e=null},t),n.apply(null,arguments))}},delay:function(n,t){var e;return function(){e&&clearTimeout(e);var r=[].slice.call(arguments);e=setTimeout(function(){return e=null,n.apply(null,r)},t)}},curry:function(n){var t=r(arguments,1);return function(){return n.apply(this,t.concat(r(arguments)))}},throttle:function(n,t,e){e=e||{};var r,u,i,o=0,a=function(){o=e.leading===!1?0:Date.now(),n.apply(e.context||r,u)};return function(){r=this,u=arguments;var l=Date.now();o||e.leading!==!1||(o=l);var c=t-(l-o);0>=c||c>t?(i=clearTimeout(i),o=l,n.apply(e.context||r,u)):i||e.trailing===!1||(i=setTimeout(a,c))}}}});
;define("common:widget/dep/moye/lib/type.js",function(e,n,t){function i(e,n){return Object.prototype.toString.call(n).slice(8,-1)===e}var o=e("common:widget/dep/moye/lib/function.js"),r=e("common:widget/dep/moye/lib/array.js"),n={},c=["Null","Undefined","String","Array","Function","Number","Date","Object","Boolean","RegExp"];r.each(c,function(e){n["is"+e]=o.curry(i,e)}),n.isNaN=function(e){return Number.isNaN(e)},n.isElement=function(e){return!(!e||1!==e.nodeType)},n.isPromise=function(e){return e&&n.isFunction(e.then)},n.typeOf=function(e){return n.isElement(e)?"element":$.type(e)},t.exports=n});
;define("common:widget/dep/moye/lib/object.js",function(r,e,n){var t=r("common:widget/dep/moye/lib/type.js"),i=r("common:widget/dep/moye/lib/array.js"),e={stringify:window.JSON&&JSON.stringify?JSON.stringify:function(){var r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e=function(e){return r[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)};return function n(r){switch(r&&r.toJSON&&(r=r.toJSON()),t.typeOf(r)){case"string":return'"'+r.replace(/[\x00-\x1f\\"]/g,e)+'"';case"array":return"["+$.map(r,n)+"]";case"object":var a=[];return i.each(r,function(r,e){var t=n(e);t&&a.push(n(r)+":"+t)}),"{"+a+"}";case"number":case"boolean":return""+r;case"null":return"null"}return null}}(),clone:function a(r){if(!r||"object"!=typeof r||!$.isPlainObject(r))return r;var e=r;if(t.isArray(r))return e=$.map([].slice.call(r),a);if(t.isObject(r)){e={};for(var n in r)r.hasOwnProperty(n)&&(e[n]=a(r[n]))}return e},extend:function o(r){r=r||{};for(var e=[].slice.call(arguments,1),n=0,i=e.length;i>n;n++){var a=e[n];if(a)for(var c in a){var s=a[c];if(s!==r&&a.hasOwnProperty(c)&&!t.isUndefined(s)){var u=$.isArray(s);if($.isPlainObject(s)||u){var f=r.hasOwnProperty(c)?r[c]:null;f=u?f&&$.isArray(f)?f:[]:f&&$.isPlainObject(f)?f:{},r[c]=o(f,s)}else r[c]=s}}}return r},toQueryString:function(r,n){var a=[];return i.each(r,function(r,i){n&&(r=n+"["+r+"]");var o;switch(t.typeOf(i)){case"object":o=e.toQueryString(i,r);break;case"array":for(var c={},s=i.length;s--;)c[s]=i[s];o=e.toQueryString(c,r);break;default:o=r+"="+encodeURIComponent(i)}null!=i&&a.push(o)}),a.join("&")}};n.exports=e});
;define("common:widget/dep/moye/lib/class.js",function(t,r,e){function n(t){var r=t.prototype;if(r.hasOwnProperty("type")||r.hasOwnProperty("$class")){var e=r.type||r.$class;if(h[e])throw new Error('Class "'+e+'" is already defined');h[e]=t}}function o(t,r){var e=new Function;e.prototype=t.prototype;var n=new e;f.extend(n,r);var o=c(n);for(var i in n)if(n.hasOwnProperty(i)&&l.isFunction(n[i])){var p=n[i];p[m]=o,p[w]=i}o.$parent=t;var s=r.type||r.$class;return s&&(t[d][s]=o),o}function i(t,r){return l.isFunction(r)&&(r=r.prototype),f.extend(t.prototype,r),t}function p(){for(var t=this.$parent.caller,r=t[w],e=t[m].$parent;e;){if(e.prototype.hasOwnProperty(r)){var n=e.prototype[r];if(l.isFunction(n))return e.prototype[r].apply(this,arguments);throw new Error("parent method is not function")}e=e.$parent}throw new Error("no parent method")}function s(t,r){var e=t[d];return e[r]}function a(t){return t[d]}function c(t){var r=function(){return this.initialize?this.initialize.apply(this,arguments):this};return r.prototype=t||{},n(r),r.prototype.constructor=r,r.prototype.$parent=p,r.extend=y(o,r),r.implement=y(i,r),r.getClass=y(s,r),r.getAllClasses=y(a,r),r[d]={},r}function u(t,r){var e=function(){};e.prototype=r.prototype;var n=t.prototype,o=t.prototype=new e;for(var i in n)o[i]=n[i];return t.prototype.constructor=t,t}var y=t("common:widget/dep/moye/lib/function.js").curry,l=t("common:widget/dep/moye/lib/type.js"),f=t("common:widget/dep/moye/lib/object.js"),m="__class__",w="__name__",d="__classess__",h={};e.exports={newClass:c,getClass:function(t){return h[t]},inherits:u}});
;define("common:widget/dep/moye/lib/browser.js",function(e,o,n){var r=/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/,s=navigator.userAgent.toLowerCase().match(r)||[null,"unknown",0],i="ie"===s[1]&&document.documentMode,a={name:"version"===s[1]?s[3]:s[1],version:i||parseFloat("opera"===s[1]&&s[4]?s[4]:s[2])};a[a.name]=0|a.version,a[a.name+(0|a.version)]=!0,a.isIE11=/Trident\/7\./.test(navigator.userAgent),n.exports={browser:a}});
;define("common:widget/dep/moye/lib/dom.js",function(e,t,n){var o=e("common:widget/dep/moye/lib/type.js"),i=e("common:widget/dep/moye/lib/browser.js").browser;n.exports={g:function(e){return o.isString(e)?document.getElementById(e):e},fixed:function(){function e(e){return"undefined"==typeof e}function t(e){return"%"===(e+"").slice(-1)}function n(e,n){var o=parseInt(e,10);return t(e)?n+"*"+o/100:o}function o(t,o,i,r){var c={},a=l[t],f="document.documentElement."+a.offset,d="document.documentElement."+a.client;return e(i)||e(r)?c[a.coordinate]=e(i)&&!e(r)?"eval("+f+"+"+d+"-"+n(o,d)+"-"+n(r,d)+')+"px"':"eval("+f+"+"+n(i,d)+')+"px"':(c[a.coordinate]="eval("+f+"+"+n(i,d)+')+"px"',c[a.size]="eval("+d+"-"+n(i,d)+"-"+n(r,d)+')+"px"'),c}function r(e,t){var n=o("horizontal",t.width||e.offsetWidth,t.left,t.right),i=o("vertical",t.height||e.offsetHeight,t.top,t.bottom);for(var r in i)n[r]=i[r];return n}var l={horizontal:{offset:"scrollLeft",client:"clientWidth",coordinate:"left",size:"width"},vertical:{offset:"scrollTop",client:"clientHeight",coordinate:"top",size:"height"}},c=document.getElementsByTagName("html")[0];return i.ie6&&(c.style.backgroundAttachment="fixed",c.style.backgroundImage="url(about:blank)"),c=null,function(e,t){if(i.ie6){e.style.position="absolute";var n=r(e,t);for(var o in n)e.style.setExpression(o,n[o])}}}()}});
;define("common:widget/dep/moye/lib/string.js",function(n,t,r){r.exports={guid:function(){var n="moye",t=0;return function(){return n+"-"+t++}}(),capitalize:function(n){return String(n).replace(/\b[a-z]/g,function(n){return n.toUpperCase()})},contains:function(n,t,r){return r=r||" ",n=r+n+r,t=r+$.trim(t)+r,n.indexOf(t)>-1},pad:function(n,t){var r=0>n?"-":"",e=Math.abs(parseInt(n,10))+"",i=e.length;return t=+t||2,t>i&&(e=(1<<t-i).toString(2).slice(1)+e),r+e},format:function(){var n={"!":1,"@":2,"#":3,$:4,"%":5};return function(t){var r=arguments;return t.replace(/(!|@|#|\$|%)\{([\w]+)\}/g,function(t,e,i){return r[n[e]][i]||""})}}()}});
;define("common:widget/dep/moye/lib/interface.js",function(t,e,n){var i=t("common:widget/dep/moye/lib/object.js"),s=t("common:widget/dep/moye/lib/type.js");n.exports={configurable:{setOptions:function(t){i.extend(this,this.options,t)},bindEvents:function(t){t=t||{};for(var e in t){var n=t[e];Object.prototype.hasOwnProperty.call(t,e)&&0===e.indexOf("on")&&s.isFunction(n)&&(this.on(e.charAt(2).toLowerCase()+e.slice(3),n),delete t[e])}}},observable:{on:function(t,e){s.isFunction(t)&&(e=t,t="*"),this._listeners=this._listeners||{};var n=this._listeners[t]||[];return $.inArray(e,n)<0&&(e.$type=t,n.push(e)),this._listeners[t]=n,this},un:function(t,e){s.isFunction(t)&&(e=t,t="*"),this._listeners=this._listeners||{};var n=this._listeners[t];if(n)if(e){var i=$.inArray(e,n);~i&&n.splice(i,1)}else n.length=0,delete this._listeners[t];return this},once:function(t,e){s.isFunction(t)&&(e=t,t="*");var n=this,i=function(){e.apply(n,arguments),n.un(t,i)};return this.on.call(n,t,i),this},fire:function(t,e){var n;t instanceof $.Event?(n=t,t=n.type):n=new $.Event(t,e),n.target||(n.target=this),this._listeners=this._listeners||{};for(var i=this._listeners[t]||[],s=this._listeners["*"]||[],r=[].concat(i,s),o=r.length,l=0;o>l;l++)r[l].call(this,n);return n},destroyEvents:function(){delete this._listeners}}}});
;define("common:widget/dep/moye/lib.js",function(e,o,m){var i={};$.extend(i,e("common:widget/dep/moye/lib/array.js"),e("common:widget/dep/moye/lib/function.js"),e("common:widget/dep/moye/lib/object.js"),e("common:widget/dep/moye/lib/class.js"),e("common:widget/dep/moye/lib/dom.js"),e("common:widget/dep/moye/lib/string.js"),e("common:widget/dep/moye/lib/browser.js"),e("common:widget/dep/moye/lib/interface.js"),e("common:widget/dep/moye/lib/type.js")),m.exports=i});
;define("common:widget/dep/moye/Context.js",function(t,e,n){function o(t){for(t=t||s++;t in i;)t=s++;return t}function r(t){this.id=o(t),this.controls={},this.properties={}}var i={},s=1416796207;r.prototype.get=function(t){return this.controls[t]},r.prototype.add=function(t){var e=t.id;return this.controls[e]=t,delete this.properties[e],this},r.prototype.remove=function(t){return delete this.controls[t.id],this},r.prototype.fill=function(t){return $.extend(!0,this.properties,t||{}),this},n.exports={isContext:function(t){return t instanceof r},get:function(t){return i[t]||null},create:function(t){var e=new r(t);return i[e.id]=e,e}}});
;define("common:widget/dep/moye/main.js",function(t,e,n){var r=t("common:widget/dep/moye/lib.js"),i=t("common:widget/dep/moye/Context.js"),a={uiPrefix:"data-ui",instanceAttr:"data-ctrl-id",uiClassPrefix:"n",skinClassPrefix:"skin",stateClassPrefix:"state",contextAttr:"data-ctrl-context"},o=i.create("default"),e={init:function(t,n,r){var i=a.uiPrefix+"-id",u={};return r=r||o,r.fill(n),$("["+i+"]",t).each(function(t,o){var c=o.getAttribute(i),f=o.getAttribute(a.instanceAttr);if(c&&!f){var s=n[c];if(s){var l=s.type;if(l){var d=$.extend({context:r},s,{id:c,main:o}),g=e.create(l,d);if(g)try{g.render(),u[c]=g}catch(x){var m=new Error('Render control "'+(g.id||"anonymous")+'" of type '+g.type+" failed because: "+x.message);throw m.actualError=x,m}}}}}),u},create:function(t,e){var n=r.getClass(t);return n?(delete e.type,new n(e)):null},get:function(t){return o.get(t)},getControlByDOM:function(t){t=$(t);var n=t.attr(a.instanceAttr);if(!n)return null;var r=t.attr(a.contextAttr);if(!r)return null;var i=e.getContext(r);return i?i.get(n):null},getContext:function(t){return t?i.get(t):o},getConfig:function(t){return a[t]},setConfig:function(t,e){return a[t]=e,this}};n.exports=e});
;define("common:widget/dep/moye/helper/dom.js",function(t,e,a){function s(){return[].slice.call(arguments,0).join("-")}var r=t("common:widget/dep/moye/lib.js"),i=t("common:widget/dep/moye/main.js"),n={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};a.exports={getPartClasses:function(t){var e=this.control,a=e.type.toLowerCase(),r=e.skin,n=i.getConfig("uiClassPrefix"),o=i.getConfig("skinClassPrefix"),g=[];if(t){if(g.push(s(n,a,t)),r)for(var l=0,f=r.length;f>l;l++)r[l]&&g.push(s(o,r[l],a,t))}else if(g.push(s(n,a)),r)for(l=0,f=r.length;f>l;l++)r[l]&&g.push(s(o,r[l]),s(o,r[l],a));return g},getPartClassName:function(t){return this.getPartClasses(t).join(" ")},getPrimaryClassName:function(t){var e=this.control.type.toLowerCase();return t?s(i.getConfig("uiClassPrefix"),e,t):s(i.getConfig("uiClassPrefix"),e)},addPartClasses:function(t,e){if("string"==typeof e&&(e=this.getPart(e)),e=e||this.control.main){var a=this.getPartClassName(t);$(e).addClass(a)}},removePartClasses:function(t,e){if("string"==typeof e&&(e=this.getPart(e)),e=e||this.control.main){var a=this.getPartClassName(t);$(e).removeClass(a)}},getStateClasses:function(t){var e=this.control.type.toLowerCase(),a=[s(i.getConfig("uiClassPrefix"),e,t),s(i.getConfig("stateClassPrefix"),t)],r=this.control.skin;if(r)for(var n=i.getConfig("skinClassPrefix"),o=0,g=r.length;g>o;o++)r[o]&&a.push(s(n,r[o],t),s(n,r[o],e,t));return a},getStateClassName:function(t){return this.getStateClasses(t).join(" ")},addStateClasses:function(t){var e=this.control.main;if(e){var a=this.getStateClassName(t);$(e).addClass(a)}},removeStateClasses:function(t){var e=this.control.main;if(e){var a=this.getStateClassName(t);$(e).removeClass(a)}},getPart:function(t){return r.g(this.getPartId(t))},getPartId:function(t){var e=this.control;return"ctrl-"+e.type.toLowerCase()+"-"+e.id+(t?"-"+t:"")},getPartBeginTag:function(t,e,a){a=a?r.map(a,function(t,e){return e+'="'+t+'"'}).join(" "):"";var s="<"+e+' id="'+this.getPartId(t)+'" data-part="'+t+'"class="'+this.getPartClassName(t)+'"'+a+(n.hasOwnProperty(e)?"":">");return s},getPartEndTag:function(t,e){var a=n.hasOwnProperty(e)?" />":"</"+e+">";return a},getPartHTML:function(t,e,a,s){return e=e||"div",this.getPartBeginTag(t,e,s)+(a||"")+this.getPartEndTag(t,e)},createPart:function(t,e,a,s){return $("<"+(e||"div")+">").attr(s||{}).attr("id",this.getPartId(t)).data("part",t).addClass(this.getPartClassName(t)).html(a).get(0)}}});
;define("common:widget/dep/moye/helper/life.js",function(t,e,n){var o=t("common:widget/dep/moye/main.js"),i=t("common:widget/dep/moye/Context.js"),r={NEW:0,INITED:1,RENDERED:2,DISPOSED:4};n.exports={isInStage:function(t){if(null==r[t])throw new Error("Invalid life cycle stage: "+t);return this.stage===r[t]},changeStage:function(t){if(null===r[t])throw new Error("Invalid life cycle stage: "+t);return this.stage=r[t],this},initContext:function(){var t=this.control,e=t.context;return i.isContext(e)||(e=i.get(e)||o.getContext()),t.context=null,t.setContext(e),this},dispose:function(){}}});
;define("common:widget/dep/moye/helper/children.js",function(e,i,n){var l=e("common:widget/dep/moye/main.js"),o=e("common:widget/dep/moye/lib.js");n.exports={initChildren:function(){var e=this.control,i=e.context,n=l.init(e.main,i.properties,i);o.each(n,function(i,n){e.addChild(i,i.childName||n)})},disposeChildren:function(){for(var e=this.control,i=[].slice.call(e.children),n=i.length-1;n>=0;n--)i[n].dispose();e.children=[],e.childrenIndex={}},disableChildren:function(){for(var e=this.control,i=[].slice.call(e.children),n=i.length-1;n>=0;n--)i[n].disable()},enableChildren:function(){for(var e=this.control,i=[].slice.call(e.children),n=i.length-1;n>=0;n--)i[n].enable()}}});
;define("common:widget/dep/moye/plugin/Plugin.js",function(i,t,n){var e=i("common:widget/dep/moye/lib.js"),o=e.newClass({$class:"Plugin",options:{},initialize:function(i){e.extend(this,this.options,i)},activate:function(){this.active=!0},inactivate:function(){this.active=!1},isActivated:function(){return!!this.active},dispose:function(){}});n.exports=o});
;define("common:widget/dep/moye/helper/plugin.js",function(n,i,t){var e=n("common:widget/dep/moye/lib.js"),o=n("common:widget/dep/moye/plugin/Plugin.js");t.exports={createPluginInstance:function(n){var i,t,s={};if(n instanceof o)return n;if(e.isFunction(n)?i=n:e.isString(n)?(t=n,i=e.getClass(n)):e.isObject(n)&&(t=n.type,i=e.getClass(n.type),s=n.options||s),!i)throw new Error("Moye Plugin ["+n+"] cannot found");return new i(s)},initPlugins:function(){var n=this.control,i=n.plugins;i&&i.length&&(n.plugins=e.map(i,function(i){var t=this.createPluginInstance(i);return t.activate(n),t},this))},activatePlugins:function(){for(var n=this.control.plugins,i=n.length-1;i>=0;i--)n[i].activate()},inactivatePlugins:function(){for(var n=this.control.plugins,i=n.length-1;i>=0;i--)n[i].inactivate()},disposePlugins:function(){for(var n=this.control,i=n.plugins||[],t=i.length-1;t>=0;t--)i[t].inactivate(),i[t].dispose();n.plugins=[]}}});
;define("common:widget/dep/moye/helper/event.js",function(e,n,o){e("common:widget/dep/moye/lib.js");o.exports={delegate:function(e,n,o,t,i){var l=this.control;return null==i&&null==t?(i=o,o=t=null):null==i&&(i=t,t=null),i=$.proxy(i,l),n+="."+l.id+"."+i.guid,$(e).on(n,o,t,i),this},undelegate:function(e,n,o,t){return n=n||"",n+="."+this.control.id,t&&t.guid&&(n+="."+t.guid),$(e).off(n,o,t),this}}});
;define("common:widget/dep/moye/Helper.js",function(e,o,m){function d(e){this.control=e}$.extend(d.prototype,e("common:widget/dep/moye/helper/dom.js"),e("common:widget/dep/moye/helper/life.js"),e("common:widget/dep/moye/helper/children.js"),e("common:widget/dep/moye/helper/plugin.js"),e("common:widget/dep/moye/helper/event.js")),m.exports=d});
;define("common:widget/dep/moye/Control.js",function(t,e,i){var n=t("common:widget/dep/moye/lib.js"),s=t("common:widget/dep/moye/main.js"),r=t("common:widget/dep/moye/Helper.js"),h=n.newClass({type:"Control",ignoreStates:["disable"],delegate:function(){var t=this.helper;return t.delegate.apply(t,arguments),this},undelegate:function(){var t=this.helper;return t.undelegate.apply(t,arguments),this},initialize:function(t){var e=this.helper=new r(this);if(e.changeStage("NEW"),this.currentStates={},t=t||{},this.main=t.main?n.g(t.main):this.createMain(),this.id=t.id||n.guid(),t.hasOwnProperty("states")){var i=this.states=t.states;n.isString(i)&&(this.states=[i])}if(t.hasOwnProperty("skin")){var s=this.skin=t.skin;n.isString(s)&&(this.skin=[s])}delete t.id,delete t.skin,delete t.states,this.bindEvents(t),this.init(t),e.initContext(),this.children=[],this.childrenIndex={},e.initPlugins(),e.changeStage("INITED")},init:function(t){this.helper.isInStage("NEW")&&this.setOptions(t)},render:function(){if(this.helper.isInStage("INITED")&&(this.fire("beforerender"),this.initStructure(),this.initEvents(),$(this.main).attr(s.getConfig("instanceAttr"),this.id),this.helper.addPartClasses(),this.states&&this.states.length))for(var t=this.states.length-1;t>=0;t--)this.addState(this.states[t]);return this.repaint(),this.helper.isInStage("INITED")&&(this.helper.changeStage("RENDERED"),this.fire("afterrender")),this},initStructure:function(){return this},initEvents:function(){return this},repaint:function(){return this.helper.isInStage("INITED")&&(this.disabled&&(this.disable(),delete this.disabled),this.hidden&&(this.hide(),delete this.hidden),n.isFunction(this.getValue)&&(this.setReadOnly(!!this.readOnly),delete this.readOnly)),this},set:function(t,e){var i;if(n.isObject(t)?i=t:(i={},i[t]=e),!this.helper.isInStage("RENDERED"))return $.extend(this,i),this;var s=[],r={};for(var h in i)if(i.hasOwnProperty(h)){var a=i[h],d=this[h],l=this.isPropertyChanged(h,a,d);if(l){this[h]=a;var o={name:h,oldValue:d,newValue:a};s.push(o),r[h]=o}}return s.length&&this.repaint(s,r),r},get:function(t){return this[t]},isPropertyChanged:function(t,e,i){return e!==i},appendTo:function(t){return this.helper.isInStage("INITED")&&this.render(),t.appendChild(this.main),this},query:function(t){return $("."+t,this.main).toArray()},createMain:function(){return document.createElement("div")},addState:function(t){return this.hasState(t)?this:(this.currentStates[t]=!0,this.helper.addStateClasses(t),this.fire("statechange",{state:t,action:"add"}),this)},removeState:function(t){var e=this;return e.hasState(t)?(e.currentStates[t]=!1,this.helper.removeStateClasses(t),e.fire("statechange",{state:t,action:"remove"}),e):e},toggleState:function(t){return this.hasState(t)?this.removeState(t):this.addState(t),this},hasState:function(t){return!!this.currentStates[t]},show:function(){return this.removeState("hidden")},hide:function(){return this.addState("hidden")},toggle:function(){return this.toggleState("hidden")},disable:function(){this.addState("disabled"),this.helper.disableChildren(),this.fire("disable")},enable:function(){this.removeState("disabled"),this.helper.enableChildren(),this.fire("enable")},isDisabled:function(){return this.hasState("disabled")},isReadOnly:function(){return this.hasState("readonly")},setReadOnly:function(t){t?this.addState("readOnly"):this.removeState("readOnly")},addChild:function(t,e){var i=this.children,n=this.childrenIndex,s=t.getParent();s&&s.removeChild(t),t.setParent(this),e=e||t.childName,e&&(n[e]=t),t.setContext(this.context),i.push(t)},removeChild:function(t){for(var e=this.children,i=this.childrenIndex,n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1);var s=t.childName;delete i[s],t.setParent(null)},getChild:function(t){return this.childrenIndex[t]},setParent:function(t){return this.parent=t,this},getParent:function(){return this.parent},initChildren:function(){this.helper.initChildren()},setContext:function(t){var e=this.context;t!==e&&(e&&this.context.remove(this),t.add(this),$(this.main).attr(s.getConfig("contextAttr"),t.id),this.context=t)},dispose:function(){this.fire("beforedispose"),this.helper.disposePlugins(),this.helper.disposeChildren(),this.destroyEvents(),this.helper.changeStage("DISPOSED"),this.fire("afterdispose")},use:function(t){var e=this.plugins;return this.plugins||(e=this.plugins=[]),t=this.helper.createPluginInstance(t),e.push(t),this.helper.isInStage("NEW")||t.activate(this),this}}).implement(n.observable).implement(n.configurable);i.exports=h});
;define("common:widget/dep/moye/painter.js",function(e,t,n){n.exports={createRepaint:function(){var e=[].concat.apply([],[].slice.call(arguments));return function(t,n){for(var a=$.extend({},n),r=0;r<e.length;r++){var i=e[r];if("function"!=typeof i){var o=[].concat(i.name),p=!t;if(!p)for(var f=0;f<o.length;f++){var c=o[f];if(n.hasOwnProperty(c)){p=!0;break}}if(p){var s=[i];for(f=0;f<o.length;f++)c=o[f],s.push(this[c]),delete a[c];i.paint.apply(this,s)}}else i.apply(this,arguments)}return this}}}});
;define("common:widget/dep/moye/Button.js",function(){define(function(t){var i=t("common:widget/dep/moye/Control.js"),e=t("common:widget/dep/moye/painter.js"),n=i.extend({type:"Button",options:{text:""},init:function(t){this.$parent(t),this.text=this.text||this.main.innerHTML},initEvents:function(){this.delegate(this.main,"click",this.onClick)},repaint:e.createRepaint(i.prototype.repaint,{name:["text"],paint:function(t,i){this.setText(i)}}),disable:function(){return this.hasState("disabled")||(this.addState("disabled"),$(this.main).attr("disabled",!0)),this},enable:function(){return this.hasState("disabled")&&(this.removeState("disabled"),$(this.main).attr("disabled",!1)),this},setText:function(t){return this.main.innerHTML=t,this},getText:function(){return this.main.innerHTML},onClick:function(t){"A"===this.main.tagName&&t.preventDefault(),this.hasState("disabled")||this.fire("click",t)},dispose:function(){this.undelegate(this.main,"click",this.onClick)}});return n})});
;define("common:widget/dep/moye/Panel.js",function(e,n,t){var i=e("common:widget/dep/moye/Control.js"),o=e("common:widget/dep/moye/painter.js"),r=i.extend({type:"Panel",repaint:o.createRepaint(i.prototype.repaint,{name:"content",paint:function(e,n){var t=this.helper;null!=n&&(t.disposeChildren(),this.main.innerHTML=n),t.initChildren()}}),enable:function(){this.$parent(),this.helper.enableChildren()},disable:function(){this.$parent(),this.helper.disableChildren()},setContent:function(e){this.set("content",e)}});t.exports=r});
;define("common:widget/dep/moye/Mask.js",function(i,t,e){var n=i("common:widget/dep/moye/Control.js"),o=i("common:widget/dep/moye/lib.js"),s=0,c=n.extend({type:"mask",options:{level:1},init:function(i){this.$parent(i),s++},initStructure:function(){$(this.main).appendTo(document.body).css("zIndex",this.level)},initEvents:function(){this.delegate(this.main,"click",this._onClick)},_onClick:function(i){this.fire(i)},repaint:i("common:widget/dep/moye/painter.js").createRepaint(n.prototype.repaint,{name:["visible"],paint:function(i,t){t?(this.addState("visible"),o.fixed(this.main,{right:0,bottom:0,left:0,top:0})):this.removeState("visible")}}),show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)},dispose:function(){this.$parent(),$(this.main).remove(),s--}});c.create=function(i){return new c(i)},e.exports=c});
;define("common:widget/dep/moye/plugin/animate.js",function(n,i,t){function e(){}function a(n,i){$(n).off(u,i)}function o(n,i){$(n).on(u,i)}var m,s=n("common:widget/dep/moye/lib.js"),r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"msTransitionEnd",transition:"transitionEnd"},c=document.createElement("div");for(var f in r)if("string"==typeof c.style[f]){m=r[f];break}var u="webkitAnimationEnd",l={up:"down",down:"up",left:"left",right:"right"};e.prototype={animateInByEffect:function(n){var i=this,t=i._getAnimationName(n,"in"),e={"-webkit-animation-name":t,"animation-name":t};i.set("visible",!0),i.set("closing",!1),i.animate(e,null)},animateOutByEffect:function(n){var i=this,t=i._getAnimationName(n,"out"),e={"-webkit-animation-name":t,"animation-name":t};i.set("closing",!0),i.animate(e,function(){i.get("closing")&&(i.set("visible",!1),i.set("closing",!1))})},animate:function(n,i){function t(n){n.target===m[0]&&(e.offAnimate(),a(m,t),i&&i())}var e=this,m=e.element;o(m,t),e.applyAnimate(),m.css(n)},offAnimate:function(){this.element.css({"-webkit-animation":"none",animation:"none"})},applyAnimate:function(){this.element.css(this.getAnimateStyle())},getAnimateStyle:function(){var n=this,i=n.get("duration");return{"-webkit-animation-duration":i+"ms ","-webkit-animation-timing-function":n.get("easing")}},_getAnimationName:function(n,i){var t,e=n+s.capitalize(i);return"slide"===n&&(t=this.get("direction"),e+=s.capitalize("in"===i?t:l[t])),e}},t.exports=e});
;define("common:widget/dep/moye/Dialog.js",function(t,e,i){var n=t("common:widget/dep/moye/lib.js"),s=t("common:widget/dep/moye/Control.js"),o=t("common:widget/dep/moye/Panel.js"),r=(t("common:widget/dep/moye/Button.js"),t("common:widget/dep/moye/Mask.js")),h=(t("common:widget/dep/moye/main.js"),s.extend({type:"Dialog",options:{title:"",content:"",close:"x",footer:"",width:400,mask:!0,maskClickClose:!0,hideDispose:!1,level:10,buttons:null,effect:"none",duration:400,easing:"linear",direction:"up",role:""},init:function(t){this.$parent(t),this.visible=!1},initStructure:function(){var t=this.helper,e=this.main;this.element=$(e),n.each([this.header!==!1?"header":"","content",this.footer!==!1?"footer":""],function(t){if(t){var i=this.createPanel(t).appendTo(e);this.addChild(i,t),this.helper.addPartClasses(t,i.main)}},this);var i=this.level;e=$(e).css("zIndex",i).appendTo(document.body),this.close!==!1&&e.append(t.createPart("close","i",this.getCloseHTML(this.close),{"data-action":"close"})),this.mask&&(this.mask=r.create({skin:"dialog",level:i-1}).render())},createPanel:function(t){var e=this.id+t;return new o({id:e})},getCloseHTML:function(t){return t},initEvents:function(){this.delegate(this.main,"click","[data-action]",this.onMainClicked),this.mask&&this.maskClickClose&&this.mask.on("click",$.proxy(this.onCloseClicked,this))},onMainClicked:function(t){var e=$(t.currentTarget),i=(this.helper,this.main,e.data("action"));return"close"===i?void this.onCloseClicked():void this.fire(i,{target:e[0]})},onCloseClicked:function(){var t=this.fire("hide");t.isDefaultPrevented()||this.hide()},repaint:t("common:widget/dep/moye/painter.js").createRepaint(s.prototype.repaint,{name:["width","height"],paint:function(t,e,i){var s=$(this.main);e=this.width=parseInt(e,10)||s.width(),i=this.height=parseInt(i,10)||s.height(),s.css({width:e+"px",marginLeft:-e/2+"px",marginTop:-i/2+"px"}),n.fixed(this.main,{top:"50%",left:"50%"})}},{name:["title"],paint:function(t,e){var i=this.getChild("header");i&&i.set("content",e)}},{name:["content"],paint:function(t,e){this.getChild("content").set("content",e)}},{name:["footer","buttons"],paint:function(t,e,i){var s=this.getChild("footer");if(s){var o="";if(e)o=e;else if(i&&i.length){o=n.map(i,function(t){var e=t.part,i=this.helper.getPartId("button-"+t.part);return this.helper.getPartHTML("button-"+e,"button",t.text,{"data-action":e,"data-ui-id":i})},this).join("");var r=n.reduce(i,function(t,e){var i=e.part,s=this.helper.getPartId("button-"+i);return t[s]=n.extend({type:"Button"},e),t},{},this);this.context.fill(r)}s.set("content",o)}}},{name:["visible"],paint:function(t,e){e?(this.addState("visible"),this.set({width:0,height:0}),this.mask&&this.mask.show()):(this.removeState("visible"),this.mask&&this.mask.hide())}}),setWidth:function(t){return this.set("width",t),this},setHeight:function(t){return this.set("height",t),this},setTitle:function(t){return this.set("title",t),this},getTitle:function(){return this.helper.getPart("title")},setContent:function(t){return this.set("content",t),this},getContent:function(){return this.helper.getPart("body")},setFooter:function(t){return this.set("footer",t),this},getFooter:function(){return this.helper.getPart("footer")},show:function(){var t=this.get("effect");return"none"!==t?this.animateInByEffect(t):this.set("visible",!0),this.fire("show",this),this},hide:function(){var t=this.get("effect");return"none"!==t?this.animateOutByEffect(t):this.set("visible",!1),this.hideDispose&&this.dispose(),this},addFooterButton:function(t,e){var i=this.buttons||[];return this.set("buttons",i.concat({part:t,text:e})),this},getFooterButton:function(t){return this.helper.getPart(t)},dispose:function(){this.$parent("dispose"),this.undelegate(this.main,"click",this.onMainClicked),$(this.main).remove(),this.mask&&this.mask.dispose()}}).implement(t("common:widget/dep/moye/plugin/animate.js")));h.Mask=r,h.DEFAULT_ALERT_OPTIONS={title:"警告",close:!1,skin:"alert",buttons:[{part:"confirm",text:"确认"}],hideDispose:!0,maskClickClose:!1},h.alert=function(t){var e=new h(n.extend({},h.DEFAULT_ALERT_OPTIONS,t)),i=new $.Deferred;return e.render().on("confirm",function(){i.resolve(),this.hide()}).show(),i.promise()},h.DEFAULT_CONFIRM_OPTIONS={title:"请确认",close:!1,skin:"confirm",buttons:[{text:"确认",part:"confirm"},{text:"取消",part:"cancel"}],hideDispose:!0,maskClickClose:!1},h.confirm=function(t){var e=new h(n.extend({},h.DEFAULT_CONFIRM_OPTIONS,t)),i=new $.Deferred;return e.render().on("confirm",function(){i.resolve(),this.hide()}).on("cancel",function(){i.reject(),this.hide()}).show(),i.promise()},i.exports=h});
;define("common:widget/dep/moye/Lazyload.js",function(){define(function(t){var o=t("jquery"),i=t("common:widget/dep/moye/lib.js"),e={compute:function(){var t={x:i.getScrollLeft(),y:i.getScrollTop()},e={x:i.getViewWidth(),y:i.getViewHeight()},n=this;this.imgs=o.grep(this.imgs,function(s){var r=o(s),c=r.attr(n.src),l=r.offset();l.right=l.left+r.width(),l.bottom=l.top+r.height();var h=l.left-n.offset.x>=t.x+e.x,f=l.top-n.offset.y>=t.y+e.y,d=l.right+n.offset.x<=t.x,a=l.bottom+n.offset.y<=t.y;if(!(h||f||d||a)){var m=document.createElement("img");return m.onload=function(){return i.isFunction(n.effect)?(n.effect(s),void n.onLoad(s)):(r.hide(),r.attr("src",c),r.removeAttr(n.src),r[n.effect](n.effectSpeed,function(){n.onLoad(s)}),void(m=null))},m.onerror=n.onError,m.src=c,!1}return!0}),this.imgs.length||this.dispose()},onScroll:function(){clearTimeout(this._timer),this._timer=setTimeout(this._bound.compute,this.delay),this.scrolled=!0}},n=i.newClass({type:"Lazyload",tag:"data-lazyload-id",options:{main:"body",src:"_src",imgs:null,delay:100,effect:"show",effectSpeed:0,offset:{y:32,x:0},onLoad:o.noop,onError:o.noop},initialize:function(t){this.setOptions(t);var i=this.main=o(t.main||document.body)[0];this.imgs=t.imgs||o("img["+this.src+"]",i).toArray(),this._bound={onScroll:o.proxy(e.onScroll,this),compute:o.proxy(e.compute,this)},this.add()},add:function(t){var i=this;return t=o.grep(t||[],function(t){return"img"===t.tagName.toLowerCase()&&o(t).attr(i.src)}),this.imgs=this.imgs.concat(t),this.imgs.length&&(o(window).on("scroll",this._bound.onScroll),o(window).on("resize",this._bound.onScroll)),this.scrolled||this._bound.onScroll(),this},remove:function(t){return i.each(t,function(t){var i=o.inArray(t,this.imgs);-1!==i&&this.imgs.splice(i,1)}),this.imgs.length||this.dispose(),this},dispose:function(){return delete this.imgs,o(window).off("scroll",this.onScroll),o(window).off("resize",this.onScroll),this}}).implement(i.configurable);return n})});
;define("common:widget/dep/moye/Pager.js",function(t,e,i){var s=t("common:widget/dep/moye/Control.js"),a=t("common:widget/dep/moye/painter.js"),n=t("common:widget/dep/moye/lib.js"),h=s.extend({type:"Pager",options:{page:0,first:0,padding:0,showAlways:!0,showCount:5,total:0,disabledClass:"disabled",anchor:"",mode:"normal",lang:{prev:"上一页",next:"下一页",firstPage:"首页",ellipsis:".."}},init:function(t){var e=$(this.main);this.$parent(t),this.showCount=+this.showCount,this.total=+this.total||+e.data("total")||0,this.padding=+this.padding||0,this.first=+this.first||+e.data("first")||0,this.page=+this.page||+e.data("page")||+this.first},initEvents:function(){this.delegate(this.main,"click","a",this.onMainClicked)},repaint:a.createRepaint(s.prototype.repaint,{name:["page","total"],paint:function(t,e,i){var s=$(this.main);this.helper.isInStage("INITED")&&s.data("click")||(this.page=Math.max(Math.min(e,this.total-1+this.first),this.first),2>i&&!this.showAlways?s.hide():s.html(this.build()).show())}}),setPage:function(t){this.page=null,this.set("page",t)},getPage:function(){return this.page},setTotal:function(t){this.set({page:this.first,total:+t})},getTotal:function(){return this.total},getItemHTML:function(t,e){var i=this.getItemClassName(n.slice(arguments,1).concat("item")),s=t,a=this.getItemAnchor(s);if(!this.lang[e]){if(this.getPageItemHTML)return this.getPageItemHTML(s,e);if("simple"===this.mode)return'<span class="'+i+'">'+this.getItemText(t+1-this.first,"item")+"/"+this.total+"</span>"}return'<a href="'+a+'" data-page="'+s+'" class="'+i+'"mon="element='+s+"_"+this.total+"&position="+s+'">'+this.getItemText(t+1-this.first,e||"item")+"</a>"},getPageItemHTML:null,getItemText:function(t,e){return this.lang[e]||t},getItemClassName:function(t){var e=this.helper;return n.map(t,function(t){return t?e.getPartClassName(t):""}).join(" ")},getItemAnchor:function(t){return this.anchor?~this.anchor.indexOf("?")?this.anchor+"&page="+t:this.anchor+"?page="+t:"#"},build:function(){var t=this.page-this.first,e=this.total,i=this.padding,s=this.showCount;s=s>e?e:s;var a=Math.floor(s/2),h=i,r=a,o=i,g=a,l=t-a;0>l&&(r+=l,g-=l);var m=t+a+1-e;m>0&&(r+=m,g-=m);var c;if("normal"===this.mode){var p=this.range(0,t,h,r),d=this.range(t+1,e,g,o);c=n.map(p.concat(t).concat(d),function(e){return 0>e?this.getItemHTML(-e+this.first,"ellipsis"):this.getItemHTML(e+this.first,e===t?"current":"")},this)}else"simple"===this.mode&&(c=[this.getItemHTML(this.page,"item")]);return""+this.getItemHTML(this.first,"firstPage",t>0?"":"disabled")+this.getItemHTML(Math.max(t-1,0)+this.first,"prev",t>0?"":"disabled")+c.join("")+this.getItemHTML(Math.min(t+1,e-1)+this.first,"next",e-1>t?"":"disabled")},range:function(t,e,i,s){return e-s>t+i?n.range(t,t+i).concat(-t-i).concat(n.range(e-s,e)):n.range(t,e)},onMainClicked:function(t){var e=$(t.currentTarget),i=this.helper;if(!e.length||e.hasClass(i.getPrimaryClassName("current"))||e.hasClass(i.getPrimaryClassName("disabled")))return!1;var s=e.data("page"),a=this.fire("change",{page:s});this.anchor||a.isDefaultPrevented()||(t.preventDefault(),this.set("page",s))},dispose:function(){this.undelegate(this.main,"click","a",this.onMainClicked),this.$parent(),$(this.main).html("")}});i.exports=h});
;define("common:widget/dep/moye/SliderAnim.js",function(i,t,e){var s=i("common:widget/dep/moye/lib.js"),n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(i){return setTimeout(i,1e3/60)}}(),r=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(i){clearTimeout(i)}}(),a=s.browser.ie<9?function(i,t){i.style.filter=1===t?"":"alpha(opacity="+100*t+")"}:function(i,t){i.style.opacity=1===t?"":t},o=s.newClass({type:"SliderAnim",initialize:function(i,t){this.slider=i,this.options=t},switchTo:function(){},isBusy:function(){return!0},enable:function(){},disable:function(){},refresh:function(){},dispose:function(){this.slider=null,this.options=null}});o.easing={easing:function(i){return i*=2,1>i?.5*i*i:-0.5*(--i*(i-2)-1)},backIn:function(i){var t=1.70158;return i*i*((t+1)*i-t)},backOut:function(i){var t=1.70158;return(i-=1)*i*((t+1)*i+t)+1},backBoth:function(i){var t=1.70158;return i*=2,1>i?.5*i*i*(((t*=1.525)+1)*i-t):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},lineer:function(i){return i},bounce:function(i){return 1/2.75>i?7.5625*i*i:2/2.75>i?7.5625*(i-=1.5/2.75)*i+.75:2.5/2.75>i?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375}},o.anims={},o.add=function(i,t){return this.anims[i]?!1:(this.anims[i]=t,!0)},o.TimeLine=o.extend({type:"TimeLine",initialize:function(i,t){this.$parent(i,t),this.slider=i,this.interval=t.interval||300,this.easingFn=o.easing[t.easing||"easing"],this.timeHandler=$.proxy(this.timeHandler,this)},beforeSwitch:function(){},switchTo:function(i,t){this.beforeSwitch(i,t),this.startTime=new Date,this.timer||(this.timer=n(this.timeHandler))},timeHandler:function(){var i=new Date-this.startTime;i>=this.interval?(this.tick(1),this.timer=0):(this.tick(i/this.interval),this.timer=n(this.timeHandler))},isBusy:function(){return 0!==this.timer},disable:function(){r(this.timer),this.timer=0},dispose:function(){this.disable(),this.slider=null},tick:function(){}}),o.add("no",o.extend({type:"SliderAnimNo",switchTo:function(i){this.slider.stage.scrollLeft=this.slider.stageWidth*i}})),o.add("slide",o.TimeLine.extend({type:"SliderAnimSlide",initialize:function(i,t){this.$parent(i,t);var e=t.direction||"horizontal";this.yAxis="vertical"===e,i.helper.addPartClasses("stage-"+e),this.rollCycle=t.rollCycle||!1},beforeSwitch:function(i,t){var e=this.slider.stageWidth,s=this.slider.stageHeight,n=this.slider.count-1,r=$(this.slider.stage);this.rollCycle&&(this.cycleNode||(r.children().first().clone().appendTo(r),this.cycleNode=!0)),this.yAxis?(this.curPos=this.isBusy()?r.scrollTop():s*t,this.targetPos=s*i):(this.curPos=this.isBusy()?r.scrollLeft():e*t,this.targetPos=e*i,this.rollCycle&&(0===i&&t===n?this.targetPos=e*(n+1):i!==n||0!==t||this.isBusy()||(this.curPos=e*(n+1))))},tick:function(i){var t=(this.targetPos-this.curPos)*this.easingFn(i),e=this.yAxis?"scrollTop":"scrollLeft";this.slider.stage[e]=this.curPos+t}})),o.add("opacity",o.TimeLine.extend({type:"SliderAnimOpacity",setOpacity:a,initialize:function(i,t){this.$parent(i,t),i.helper.addPartClasses("stage-opactiy")},beforeSwitch:function(i){var t=this.slider,e=t.helper,n=$(t.stage).children(),r=n.length;s.isUndefined(this.index)&&(this.index=r-1),s.isUndefined(this.lastIndex)&&(this.lastIndex=r-1),this.setOpacity(n[this.index],1),$(n[this.index]).removeClass(e.getPartClassName("top")),$(n[this.lastIndex]).removeClass(e.getPartClassName("cover")),$(n[this.index]).addClass(e.getPartClassName("cover")),this.lastIndex=this.index,$(n[this.index=i]).addClass(e.getPartClassName("top")),this.setOpacity(this.curElement=n[i],0)},tick:function(i){var t=this.easingFn(i);this.setOpacity(this.curElement,t),1===i&&(this.curElement=null)},dispose:function(){this.curElement=null,this.$parent()}})),e.exports=o});
;define("common:widget/dep/moye/Slider.js",function(t,i,e){var a=t("common:widget/dep/moye/lib.js"),s=t("common:widget/dep/moye/Control.js"),r=t("common:widget/dep/moye/SliderAnim.js"),n={clearSwitchDelayTimer:function(){clearTimeout(this._switchDelayTimer),this._switchDelayTimer=0},onEnter:function(){this.auto&&this.stop()},onLeave:function(){this.auto&&this.play()},onPrevClick:function(){var t=this;t._switchDelayTimer||(t._switchDelayTimer=setTimeout(function(){n.clearSwitchDelayTimer.call(t),t.goPrev()},t.switchDelay))},onNextClick:function(){var t=this;t._switchDelayTimer||(t._switchDelayTimer=setTimeout(function(){n.clearSwitchDelayTimer.call(t),t.goNext()},t.switchDelay))},onPagerClick:function(t){var i=this,e=t.target,a=e.getAttribute("data-index")+"";a&&!i._switchDelayTimer&&(i._switchDelayTimer=setTimeout(function(){n.clearSwitchDelayTimer.call(i),i.go(+a)},i.switchDelay))}},h=s.extend({type:"Slider",options:{index:0,main:"",prev:"&lt;",next:"&gt;",arrow:!0,pager:!0,auto:!0,circle:!0,autoInterval:2e3,switchDelay:50,onChange:null,anim:"slide",animOptions:{easing:"easing",interval:200,direction:"horizontal",rollCycle:""}},init:function(t){this.$parent(t),this.capacity=this.capacity||+this.main.getAttribute("data-capacity")||0;var i=a.isString(this.anim)?r.anims[this.anim]:this.anim;this.curAnim=new i(this,this.animOptions)},initStructure:function(){var t=this.main,i=this.helper,e=this.capacity;e>0&&(this.arrow&&(this.addArrow("prev",this.prev),this.addArrow("next",this.next)),this.pager&&this.addPager(e)),this.stage=$("."+i.getPrimaryClassName("stage"),t).children().addClass(i.getPartClassName("item")).end().get(0),this.refresh()},addArrow:function(t,i){var e=$(this.helper.createPart(t,"i",i));this[t+"Arrow"]=e.appendTo(this.main).css("marginTop",-e.height()/2).get(0)},addPager:function(t){for(var i=[],e=0;t>e;e++)i.push('<i data-index="'+e+'"></i>');var s=this.helper,r=this.pager;a.isElement(r)?(this.pager=r,r=$(r).addClass(s.getPartClassName("pager")),r.attr("id",r.attr("id")||s.getPartId())):r=$(this.helper.createPart("pager","div",i.join(""))),this.pager=r.appendTo(this.main).css("marginLeft",-r.width()/2).get(0)},initEvents:function(){var t=this.main;this.delegate(t,"mouseenter",n.onEnter).delegate(t,"mouseleave",n.onLeave),this.arrow&&(this.delegate(this.prevArrow,"click",n.onPrevClick),this.delegate(this.nextArrow,"click",n.onNextClick)),this.pager&&this.delegate(this.pager,"click",n.onPagerClick),this.auto&&this.play()},_getNextPage:function(t){var i=this.index,e=this.capacity,a=this.circle;return t="start"===t?0:"end"===t?this.capacity-1:+t||0,t===i?-1:(t>=e?t=a?0:e-1:0>t&&(t=a?e-1:0),t)},isPlaying:function(){return!!this.timer},play:function(){var t=this;t.isPlaying()||(t.timer=setInterval(function(){t.goNext()},t.autoInterval))},stop:function(){this.isPlaying()&&(clearInterval(this.timer),this.timer=null)},refresh:function(){var t=$(this.stage),i=t.children();return this.index=0,this.capacity=i.length,this.stageWidth=t.width(),this.stageHeight=t.height(),this._updateControlPart(0,0),this},goPrev:function(){return this.go(this.index-1),this},goNext:function(){return this.go(this.index+1),this},go:function(t){var i=this.index;return t===i?this:(t=this._getNextPage(t),void(!1!==this.curAnim.switchTo(t,i)&&(this.index=t,this._updateControlPart(i,t),this.fire("change",{index:t,lastIndex:this.lastIndex}))))},_updateControlPart:function(t,i){var e,a=this.helper;if(this.arrow&&(e=0!==i||this.circle?"removeClass":"addClass",$(this.prevArrow)[e](a.getPartClassName("prev-disable")),e=i!==this.capacity-1||this.circle?"removeClass":"addClass",$(this.nextArrow)[e](a.getPartClassName("next-disable"))),this.pager){var s=a.getPartClassName("pager-selected");$(this.pager).find(":eq("+t+")").removeClass(s).end().find(":eq("+i+")").addClass(s)}},dispose:function(){n.clearSwitchDelayTimer.call(this),this.isPlaying()&&this.stop(),this.curAnim.dispose(),this.curAnim=null,this.arrow&&(this.undelegate(this.prevArrow,"click",n.onPrevClick),this.undelegate(this.nextArrow,"click",n.onNextClick),this.prevArrow=this.nextArrow=null),this.pager&&(this.undelegate(this.pager,"click",n.onPagerClick),this.pager=null);var t=this.main;this.undelegate(t,"mouseenter",n.onEnter).undelegate(t,"mouseleave",n.onLeave),this.main=this.stage=null,this.$parent()}});h.Anim=r,e.exports=h});
;define("common:widget/dep/moye/Tab.js",function(t,e,i){var s=t("common:widget/dep/moye/Control.js"),a=s.extend({type:"Tabs",options:{slideInterval:2e3,activeIndex:0,mode:"click",activeClass:"",panelActiveClass:""},init:function(t){this.$parent(t),this.activeIndex=+t.activeIndex||0,this.itemClass="."+this.helper.getPartClassName("item"),this.onSwitch=$.proxy(this.onSwitch,this)},initEvents:function(){switch(this.mode){case"click":$(this.main).on("click",this.itemClass,this.onSwitch);break;case"hover":$(this.main).on("mouseenter",this.itemClass,this.onSwitch);break;case"auto":$(this.main).on("click",this.itemClass,this.onSwitch),this.startAutoSlide()}},repaint:t("common:widget/dep/moye/painter.js").createRepaint(s.prototype.repaint,{name:"activeIndex",paint:function(t,e){var i=this.activeClass||this.helper.getPartClassName("item-active"),s=$(this.itemClass,this.main),a=this;s.eq(e).addClass(i).siblings().removeClass(i),s.each(function(t,i){var s=$(i).data("panel");if(s){var n=$(a.main).find(s);if(n.length){if(a.panelActiveClass)return e===t?n.addClass(a.panelActiveClass):n.removeClass(a.panelActiveClass);e===t?n.show():n.hide()}}})}}),next:function(){var t=$(this.itemClass,this.main),e=this.activeIndex+1;t.length<=e&&(e=0),this.select(e)},startAutoSlide:function(){this.autoSlideId||(this.autoSlideId=setInterval($.proxy(this.next,this),this.slideInterval))},stopAutoSlide:function(){this.autoSlideId&&(clearInterval(this.autoSlideId),this.autoSlideId=null)},select:function(t,e){var i=this.activeIndex;if(i!==t){if(!e){var s=new $.Event("change",{activeIndex:t});if(this.fire(s),s.isDefaultPrevented())return}return this.set("activeIndex",t),this}},onSwitch:function(t){var e=$(t.currentTarget);e.is(this.itemClass)&&this.select(e.data("index"))}});i.exports=a});
;define("common:widget/new_header/nav/triangle.js",function(n,t,i){var e={init:function(n,t){var i=this;i.container=$(n).eq(0),i.navs="string"==typeof t?i.container.find(t):$(t),"none"===i.container.css("display")?(i.container.css("visibility","hidden").show(),i.containerOffset=i.container.offset(),i.container.css("display","").css("visibility","")):i.containerOffset=i.container.offset(),i.containerBox={width:n.width(),height:n.height()},i.triangle={pointXY:{x:i.containerBox.width,y:i.containerBox.height},pointX:{x:i.containerBox.width,y:0},pointY:{x:0,y:i.containerBox.height}},i.navs.on("mouseenter",function(n){i.triangle.pointY=i._getVirtualCoordinate(n)})},isInTriangle:function(n){var t=this,i=t._getVirtualCoordinate(n),e=(t.triangle.pointXY.y-i.y)/(t.triangle.pointXY.x-i.x),o=(t.triangle.pointX.y-t.triangle.pointY.y)/(t.triangle.pointX.x-t.triangle.pointY.x),a=(t.triangle.pointX.y-i.y)/(t.triangle.pointX.x-i.x),r=(t.triangle.pointXY.y-t.triangle.pointY.y)/(t.triangle.pointXY.x-t.triangle.pointY.x);return i.x>t.triangle.pointXY.x?!0:i.x>=t.triangle.pointY.x&&(i.y>=t.triangle.pointY.y&&e>=r||i.y<t.triangle.pointY.y&&o>a)?!0:!1},_getVirtualCoordinate:function(n){var t=this;return{x:n.pageX-t.containerOffset.left,y:t.containerBox.height-(n.pageY-t.containerOffset.top)}}};i.exports=e});
;define("common:widget/dep/moye/TextBox.js",function(t,e,i){var n=t("common:widget/dep/moye/Control.js"),a=t("common:widget/dep/moye/painter.js"),s=(t("common:widget/dep/moye/lib.js"),t("common:widget/new_header/nav/triangle.js"),n.extend({type:"TextBox",options:{main:"",plugins:[]},init:function(t){this.$parent(t);var e=t.input||$(this.main).find("input");this.value=t.value||e.val(),this.input=t.input||e[0]},initEvents:function(){var t=this.input,e="oninput"in t?"input":"propertychange";return this.delegate(t,e,this._dispatchInputEvent).delegate(t,"blur",this._on).delegate(t,"focus",this._on).delegate(t,"keydown",this._dispatchSpecialEvent),this},repaint:a.createRepaint({name:["width"],paint:function(t,e){e&&$(this.main).css("width",e)}},{name:["height"],paint:function(t,e){e&&$(this.main).css("height",e)}},{name:["name"],paint:function(t,e){this.input.name=e}},{name:["value"],paint:function(t,e){this.setValue(e||"")}}),_dispatchInputEvent:function(t){("input"===t.type||"value"===t.originalEvent.propertyName)&&this.fire("input")},_dispatchSpecialEvent:function(t){switch(t.keyCode){case 13:this.fire("enter",t);break;default:this.fire("keypress",t)}},_on:function(t){this.fire(t.type,t)},getValue:function(){return this.input.value},setValue:function(t){return this.input.value=t,this},disable:function(){this.addState("disabled"),this.input.disabled=!0},enable:function(){this.removeState("disabled"),this.input.disabled=!1},setReadOnly:function(t){this[t?"addState":"removeState"]("readOnly"),$(this.input).attr("readonly",!!t)},isReadOnly:function(){return this.hasState("readOnly")}}));i.exports=s});
;define("common:widget/dep/moye/helper/state.js",function(t,e,s){var e={};e.is=function(t){return!!this.states[t]},e.addState=function(t){this.states[t]=!0},e.removeState=function(t){delete this.states[t]},e.toggleState=function(t,e){e="boolean"==typeof e?e:!this.is(t),this[e?"addState":"removeState"](t)},s.exports=e});
;define("common:widget/dep/moye/lib/page.js",function(e,t,n){function o(e){var t=e&&e.ownerDocument||document,n=t.compatMode;return n&&"CSS1Compat"!==n?t.body:t.documentElement}n.exports={getScrollLeft:function(){return window.pageXOffset||o().scrollLeft},getScrollTop:function(){return window.pageYOffset||o().scrollTop},getViewWidth:function(){return o().clientWidth},getViewHeight:function(){return o().clientHeight}}});
;define("common:widget/dep/moye/plugin/TextBoxAutoComplete.js",function(t,e,i){var n=t("common:widget/dep/moye/lib.js"),o=t("common:widget/dep/moye/plugin/Plugin.js"),s=o.extend({$class:"TextBoxAutoComplete",initialize:function(t){this.$parent(t),this.load=n.delay($.proxy(this.load,this),this.delay),this._isMoving=!0,this.current=null},activate:function(t){this.$parent(t),this.textbox=t,t.getSuggestions=this.load,t.hideSuggestions=$.proxy(this.hide,this),t.on("keypress",$.proxy(this._onKeypress,this)).on("input",$.proxy(this._onInput,this)).on("focus",$.proxy(this._onInput,this)).input.autocomplete="off",this.bindEvent()},delay:200,datasource:function(){return null},_onInput:function(){var t=this.textbox.getValue();t?this.load(t):this.hide()},_onBlur:function(){this.hide()},_onClick:function(){var t=this.textbox.input.value;this.fire("selectClick",{value:t})},bindEvent:function(){var t=this,e="."+this.textbox.helper.getPartClasses("autocomplete-item")[0],i=$(this.getMain());i.on("mouseenter",e,function(){var e=t.current,n=$(this).data("index"),o=setTimeout(function(){t.go(e,n)},200);t._isMoving=!0,i.data("delayTimer",o)}),i.on("mouseleave",e,function(){var e=i.data("delayTimer");e&&clearTimeout(e),t._isMoving=!1})},_onKeypress:function(t){if(!t.isDefaultPrevented())switch(t.keyCode){case 40:return void this.next();case 38:return this.prev(),void t.preventDefault();case 27:return void this.hide();default:var e=this.textbox.getValue();this._isMoving=!1,this.setCache(e)}},setCache:function(t){this._cache=t},getCache:function(){return this._cache||""},_onBodyClick:function(t){var e=t.target;if(this.main&&$.contains(this.main,e)){if("A"===t.target.tagName)return void t.stopPropagation();t.preventDefault();var i=this.textbox,n=i.helper.getPartClasses("autocomplete-item")[0];return e=$(t.target).closest("."+n),void this.select(e.eq(0))}$.contains(this.textbox.main,t.target)||this.hide()},select:function(t){var e=this.suggestions;if(e){var i=+t.data("index"),n=this.textbox,o=e[i],s=this.adapter.toInput(o);n.fire("selectClick",{suggestion:o,mode:"pick",value:s}),this.hide()}},load:function(t){if(!this._isMoving){var e=this.datasource(t,this);return e&&n.isFunction(e.then)?e.then($.proxy(this._onSuggestionLoaded,this)):this._onSuggestionLoaded(e),this}},_onSuggestionLoaded:function(t){t&&t.length?this.show(t):this.hide()},getMain:function(){var t=this.main;if(!t){var e=this.textbox;t=this.main=e.helper.createPart("autocomplete"),e.main.appendChild(t),this.setPosition(t)}return t},setPosition:function(){},show:function(t){this.suggestions=t||[];var e=this.count=t.length;if(!e)return this;var i=this.textbox,n=$(this.getMain());this.current=null;var o=this.template,s=o({data:t});return n.html(s).show(),$(document.body).on("click."+i.id,$.proxy(this._onBodyClick,this)),i.fire("show",{main:n,suggestions:t}),this},adapter:{toList:function(t){return{text:t.text,value:t.value}},toInput:function(t){return t.value}},hide:function(){var t=new $.Event("autocompletebeforehide");if(this.textbox.fire(t),!t.isDefaultPrevented()){var e=$(this.main);return e.length&&(e.hide(),$(document.body).off("click."+this.textbox.id),e.off("mouseover."+this.textbox.id)),this.suggestions=null,this.current=null,this.count=null,this._cache=null,this}},next:function(){this.move("down")},prev:function(){this.move("up")},move:function(t){this._isMoving=!0;var e=this.count||0;if(0!==e){var i,n=this.current;"down"===t?(i=null===n?0:n+1,i=i===e?0:i):(i=null===n?e-1:n-1,i=-1===i?e-1:i),this.go(n,i)}},go:function(t,e){var i=$(this.main).children();null!==t&&i.eq(t).removeClass("hover"),null!==e&&i.eq(e).addClass("hover");var n=this.textbox,o=this.suggestions[e],s=new $.Event("autocomplete",{suggestion:o,mode:"move",current:t,next:e});n.fire(s),s.isDefaultPrevented()||(this.current=e,n.setValue(null===e?this.getCache():this.adapter.toInput(o)))},inactivate:function(){var t=this.textbox;$(t.input).off("keyup"+t.id),this.main&&($(this.main).off("click"),this.main=null),this.textbox=null}});i.exports=s});
;define("common:widget/dep/moye/sticky.js",function(t,i,o){function s(t){this.options=$.extend(!0,{position:{bottomGap:310}},t),this.el=$(this.options.element),this.elId=this.options.element,this.position=this.options.position,this._stickyId=r++}function e(t,i){return $.isPlainObject(i)||(i={top:i}),void 0===i.top&&void 0===i.bottom&&(i.top=0),new s({element:t,position:i}).render()}var n=t("common:widget/dep/moye/lib.js"),r=(n.browser.ie6,0),h=$(document);s.prototype={constructor:s,_prepare:function(){this.saveOriginalPosition(),this._orginStyle={position:null,left:null,top:null,marginRight:null,marginLeft:null,marginTop:null};for(var t in this._orginStyle)this._orginStyle.hasOwnProperty(t)&&(this._orginStyle[t]=this.el.css(t))},saveOriginalPosition:function(){var t=this.el.offset();this._orginTop=t.top,this._orginLeft=t.left},render:function(){var t,i=this;if(!this.el.length||this.el.data("bind-stickied"))return this;this._prepare(),this.adjust=function(){i._restore(),i.saveOriginalPosition(),t.call(i)},t=this._supportFixed,t.call(i);var o=function(){i.el.is(":visible")&&t.call(i)};return $(window).on("scroll.sticky"+this._stickyId,o).on("resize.sticky"+this._stickyId,n.debounce(function(){i.adjust()},120)),this.el.data("bind-stickied",!0),this},_getTopBottom:function(t,i){var o,s;return void 0!==this.position.top&&(o=i-t<=this.position.top),void 0!==this.position.bottom&&(s=t+$(window).height()-i-this.el.outerHeight()<=this.position.bottom),{top:o,bottom:s}},_supportFixed:function(){var t=this.el.data("stickied"),i=this._getTopBottom(h.scrollTop(),this._orginTop);if(!t&&(void 0!==i.top&&i.top||void 0!==i.bottom&&i.bottom)){var o=i.top?{top:this.position.top}:{bottom:this.position.bottom},s=$.extend({position:"fixed",left:this._orginLeft,marginLeft:0,marginRight:0,marginTop:0},o);this.el.data("stickied",!0).css(s),"#sticky-panel"==this.elId&&this.el.data("stickied",!0).css("top",($(window).height()-this.el.height())/2),this.fire("sticky",this)}else if(t){i.top||i.bottom||this._restore();var e=this.adjustAtBottom();this.el.css({top:e})}},adjustAtBottom:function(){var t=h.scrollTop(),i=$(window).height(),o=h.height(),s=this.position.bottomGap-(o-i-t);if("#sticky-panel"==this.elId){var e=(i-this.el.height())/2;return s>0?-s:e}return s>0?-s:0},_supportSticky:function(){var t=this.el.data("stickied"),i=this._getTopBottom(h.scrollTop(),this.el.offset().top);!t&&(void 0!==i.top&&i.top||void 0!==i.bottom&&i.bottom)?this.el.data("stickied",!0):t&&!i.top&&i.bottom&&this.el.data("stickied",!1)},_restore:function(){this.el.css(this._orginStyle).data("stickied",!1),this.fire("unsticky",this)},destroy:function(){this._restore(),this.el.data("bind-stickied",!1),$(window).off("scroll.sticky"+this._stickyId),$(window).off("resize.sticky"+this._stickyId)}},$.extend(s.prototype,n.observable),e.Sticky=s,o.exports=e});
;define("common:widget/dep/tool/base64.js",function(r,t,e){function n(r,t){var e=i.indexOf(r.charAt(t));if(-1===e)throw"Cannot decode base64";return e}function h(r){var t,e,h=0,a=r.length,o=[];if(r=String(r),0===a)return r;if(a%4!==0)throw"Cannot decode base64";for(r.charAt(a-1)===c&&(h=1,r.charAt(a-2)===c&&(h=2),a-=4),t=0;a>t;t+=4)e=n(r,t)<<18|n(r,t+1)<<12|n(r,t+2)<<6|n(r,t+3),o.push(String.fromCharCode(e>>16,e>>8&255,255&e));switch(h){case 1:e=n(r,t)<<18|n(r,t+1)<<12|n(r,t+2)<<6,o.push(String.fromCharCode(e>>16,e>>8&255));break;case 2:e=n(r,t)<<18|n(r,t+1)<<12,o.push(String.fromCharCode(e>>16))}return o.join("")}function a(r,t){var e=r.charCodeAt(t);if(e>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return e}function o(r){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";r=String(r);var t,e,n=[],h=r.length-r.length%3;if(0===r.length)return r;for(t=0;h>t;t+=3)e=a(r,t)<<16|a(r,t+1)<<8|a(r,t+2),n.push(i.charAt(e>>18)),n.push(i.charAt(e>>12&63)),n.push(i.charAt(e>>6&63)),n.push(i.charAt(63&e));switch(r.length-h){case 1:e=a(r,t)<<16,n.push(i.charAt(e>>18)+i.charAt(e>>12&63)+c+c);break;case 2:e=a(r,t)<<16|a(r,t+1)<<8,n.push(i.charAt(e>>18)+i.charAt(e>>12&63)+i.charAt(e>>6&63)+c)}return n.join("")}var c="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u="1.0";e.exports={decode:h,encode:o,VERSION:u}});
;define("common:widget/dep/tool/jsencrypt.min.js",function(t,e,i){var r={};!function(t){function e(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function i(){return new e(null)}function r(t,e,i,r,s,n){for(;--n>=0;){var o=e*this[t++]+i[r]+s;s=Math.floor(o/67108864),i[r++]=67108863&o}return s}function s(t,e,i,r,s,n){for(var o=32767&e,h=e>>15;--n>=0;){var a=32767&this[t],u=this[t++]>>15,c=h*a+u*o;a=o*a+((32767&c)<<15)+i[r]+(1073741823&s),s=(a>>>30)+(c>>>15)+h*u+(s>>>30),i[r++]=1073741823&a}return s}function n(t,e,i,r,s,n){for(var o=16383&e,h=e>>14;--n>=0;){var a=16383&this[t],u=this[t++]>>14,c=h*a+u*o;a=o*a+((16383&c)<<14)+i[r]+s,s=(a>>28)+(c>>14)+h*u,i[r++]=268435455&a}return s}function o(t){return Bi.charAt(t)}function h(t,e){var i=Ki[t.charCodeAt(e)];return null==i?-1:i}function a(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function u(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function c(t){var e=i();return e.fromInt(t),e}function f(t,i){var r;if(16==i)r=4;else if(8==i)r=3;else if(256==i)r=8;else if(2==i)r=1;else if(32==i)r=5;else{if(4!=i)return void this.fromRadix(t,i);r=2}this.t=0,this.s=0;for(var s=t.length,n=!1,o=0;--s>=0;){var a=8==r?255&t[s]:h(t,s);0>a?"-"==t.charAt(s)&&(n=!0):(n=!1,0==o?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&e.ZERO.subTo(this,this)}function p(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function l(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,s=!1,n="",h=this.t,a=this.DB-h*this.DB%e;if(h-->0)for(a<this.DB&&(i=this[h]>>a)>0&&(s=!0,n=o(i));h>=0;)e>a?(i=(this[h]&(1<<a)-1)<<e-a,i|=this[--h]>>(a+=this.DB-e)):(i=this[h]>>(a-=e)&r,0>=a&&(a+=this.DB,--h)),i>0&&(s=!0),s&&(n+=o(i));return s?n:"0"}function d(){var t=i();return e.ZERO.subTo(this,t),t}function g(){return this.s<0?this.negate():this}function m(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(e=i-t.t,0!=e)return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function y(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function b(){return this.t<=0?0:this.DB*(this.t-1)+y(this[this.t-1]^this.s&this.DM)}function T(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function S(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function R(t,e){var i,r=t%this.DB,s=this.DB-r,n=(1<<s)-1,o=Math.floor(t/this.DB),h=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+o+1]=this[i]>>s|h,h=(this[i]&n)<<r;for(i=o-1;i>=0;--i)e[i]=0;e[o]=h,e.t=this.t+o+1,e.s=this.s,e.clamp()}function E(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);var r=t%this.DB,s=this.DB-r,n=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&n)<<s,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&n)<<s),e.t=this.t-i,e.clamp()}function D(t,e){for(var i=0,r=0,s=Math.min(t.t,this.t);s>i;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=0>r?-1:0,-1>r?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()}function w(t,i){var r=this.abs(),s=t.abs(),n=r.t;for(i.t=n+s.t;--n>=0;)i[n]=0;for(n=0;n<s.t;++n)i[n+r.t]=r.am(0,s[n],i,n,0,r.t);i.s=0,i.clamp(),this.s!=t.s&&e.ZERO.subTo(i,i)}function x(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function B(t,r,s){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=r&&r.fromInt(0),void(null!=s&&this.copyTo(s));null==s&&(s=i());var h=i(),a=this.s,u=t.s,c=this.DB-y(n[n.t-1]);c>0?(n.lShiftTo(c,h),o.lShiftTo(c,s)):(n.copyTo(h),o.copyTo(s));var f=h.t,p=h[f-1];if(0!=p){var l=p*(1<<this.F1)+(f>1?h[f-2]>>this.F2:0),d=this.FV/l,g=(1<<this.F1)/l,m=1<<this.F2,v=s.t,b=v-f,T=null==r?i():r;for(h.dlShiftTo(b,T),s.compareTo(T)>=0&&(s[s.t++]=1,s.subTo(T,s)),e.ONE.dlShiftTo(f,T),T.subTo(h,h);h.t<f;)h[h.t++]=0;for(;--b>=0;){var S=s[--v]==p?this.DM:Math.floor(s[v]*d+(s[v-1]+m)*g);if((s[v]+=h.am(0,S,s,b,0,f))<S)for(h.dlShiftTo(b,T),s.subTo(T,s);s[v]<--S;)s.subTo(T,s)}null!=r&&(s.drShiftTo(f,r),a!=u&&e.ZERO.subTo(r,r)),s.t=f,s.clamp(),c>0&&s.rShiftTo(c,s),0>a&&e.ZERO.subTo(s,s)}}}function K(t){var r=i();return this.abs().divRemTo(t,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&t.subTo(r,r),r}function A(t){this.m=t}function U(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function O(t){return t}function V(t){t.divRemTo(this.m,null,t)}function N(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function J(t,e){t.squareTo(e),this.reduce(e)}function I(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function P(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function M(t){var r=i();return t.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),t.s<0&&r.compareTo(e.ZERO)>0&&this.m.subTo(r,r),r}function L(t){var e=i();return t.copyTo(e),this.reduce(e),e}function q(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function H(t,e){t.squareTo(e),this.reduce(e)}function C(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function j(){return 0==(this.t>0?1&this[0]:this.s)}function k(t,r){if(t>4294967295||1>t)return e.ONE;var s=i(),n=i(),o=r.convert(this),h=y(t)-1;for(o.copyTo(s);--h>=0;)if(r.sqrTo(s,n),(t&1<<h)>0)r.mulTo(n,o,s);else{var a=s;s=n,n=a}return r.revert(s)}function F(t,e){var i;return i=256>t||e.isEven()?new A(e):new P(e),this.exp(t,i)}function _(){var t=i();return this.copyTo(t),t}function z(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Z(){return 0==this.t?this.s:this[0]<<24>>24}function G(){return 0==this.t?this.s:this[0]<<16>>16}function $(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Y(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function W(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),s=c(r),n=i(),o=i(),h="";for(this.divRemTo(s,n,o);n.signum()>0;)h=(r+o.intValue()).toString(t).substr(1)+h,n.divRemTo(s,n,o);return o.intValue().toString(t)+h}function Q(t,i){this.fromInt(0),null==i&&(i=10);for(var r=this.chunkSize(i),s=Math.pow(i,r),n=!1,o=0,a=0,u=0;u<t.length;++u){var c=h(t,u);0>c?"-"==t.charAt(u)&&0==this.signum()&&(n=!0):(a=i*a+c,++o>=r&&(this.dMultiply(s),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(i,o)),this.dAddOffset(a,0)),n&&e.ZERO.subTo(this,this)}function X(t,i,r){if("number"==typeof i)if(2>t)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),he,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var s=new Array,n=7&t;s.length=(t>>3)+1,i.nextBytes(s),n>0?s[0]&=(1<<n)-1:s[0]=0,this.fromString(s,256)}}function te(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,s=0;if(t-->0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[s++]=i|this.s<<this.DB-r);t>=0;)8>r?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,0>=r&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==s&&(128&this.s)!=(128&i)&&++s,(s>0||i!=this.s)&&(e[s++]=i);return e}function ee(t){return 0==this.compareTo(t)}function ie(t){return this.compareTo(t)<0?this:t}function re(t){return this.compareTo(t)>0?this:t}function se(t,e,i){var r,s,n=Math.min(t.t,this.t);for(r=0;n>r;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(s=t.s&this.DM,r=n;r<this.t;++r)i[r]=e(this[r],s);i.t=this.t}else{for(s=this.s&this.DM,r=n;r<t.t;++r)i[r]=e(s,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function ne(t,e){return t&e}function oe(t){var e=i();return this.bitwiseTo(t,ne,e),e}function he(t,e){return t|e}function ae(t){var e=i();return this.bitwiseTo(t,he,e),e}function ue(t,e){return t^e}function ce(t){var e=i();return this.bitwiseTo(t,ue,e),e}function fe(t,e){return t&~e}function pe(t){var e=i();return this.bitwiseTo(t,fe,e),e}function le(){for(var t=i(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function de(t){var e=i();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function ge(t){var e=i();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function me(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function ye(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+me(this[t]);return this.s<0?this.t*this.DB:-1}function ve(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function be(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=ve(this[i]^e);return t}function Te(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function Se(t,i){var r=e.ONE.shiftLeft(t);return this.bitwiseTo(r,i,r),r}function Re(t){return this.changeBit(t,he)}function Ee(t){return this.changeBit(t,fe)}function De(t){return this.changeBit(t,ue)}function we(t,e){for(var i=0,r=0,s=Math.min(t.t,this.t);s>i;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=0>r?-1:0,r>0?e[i++]=r:-1>r&&(e[i++]=this.DV+r),e.t=i,e.clamp()}function xe(t){var e=i();return this.addTo(t,e),e}function Be(t){var e=i();return this.subTo(t,e),e}function Ke(t){var e=i();return this.multiplyTo(t,e),e}function Ae(){var t=i();return this.squareTo(t),t}function Ue(t){var e=i();return this.divRemTo(t,e,null),e}function Oe(t){var e=i();return this.divRemTo(t,null,e),e}function Ve(t){var e=i(),r=i();return this.divRemTo(t,e,r),new Array(e,r)}function Ne(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Je(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Ie(){}function Pe(t){return t}function Me(t,e,i){t.multiplyTo(e,i)}function Le(t,e){t.squareTo(e)}function qe(t){return this.exp(t,new Ie)}function He(t,e,i){var r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;var s;for(s=i.t-this.t;s>r;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(s=Math.min(t.t,e);s>r;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()}function Ce(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)}function je(t){this.r2=i(),this.q3=i(),e.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function ke(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=i();return t.copyTo(e),this.reduce(e),e}function Fe(t){return t}function _e(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function ze(t,e){t.squareTo(e),this.reduce(e)}function Ze(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function Ge(t,e){var r,s,n=t.bitLength(),o=c(1);if(0>=n)return o;r=18>n?1:48>n?3:144>n?4:768>n?5:6,s=8>n?new A(e):e.isEven()?new je(e):new P(e);var h=new Array,a=3,u=r-1,f=(1<<r)-1;if(h[1]=s.convert(this),r>1){var p=i();for(s.sqrTo(h[1],p);f>=a;)h[a]=i(),s.mulTo(p,h[a-2],h[a]),a+=2}var l,d,g=t.t-1,m=!0,v=i();for(n=y(t[g])-1;g>=0;){for(n>=u?l=t[g]>>n-u&f:(l=(t[g]&(1<<n+1)-1)<<u-n,g>0&&(l|=t[g-1]>>this.DB+n-u)),a=r;0==(1&l);)l>>=1,--a;if((n-=a)<0&&(n+=this.DB,--g),m)h[l].copyTo(o),m=!1;else{for(;a>1;)s.sqrTo(o,v),s.sqrTo(v,o),a-=2;a>0?s.sqrTo(o,v):(d=o,o=v,v=d),s.mulTo(v,h[l],o)}for(;g>=0&&0==(t[g]&1<<n);)s.sqrTo(o,v),d=o,o=v,v=d,--n<0&&(n=this.DB-1,--g)}return s.revert(o)}function $e(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var s=e.getLowestSetBit(),n=i.getLowestSetBit();if(0>n)return e;for(n>s&&(n=s),n>0&&(e.rShiftTo(n,e),i.rShiftTo(n,i));e.signum()>0;)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return n>0&&i.lShiftTo(n,i),i}function Ye(t){if(0>=t)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i}function We(t){var i=t.isEven();if(this.isEven()&&i||0==t.signum())return e.ZERO;for(var r=t.clone(),s=this.clone(),n=c(1),o=c(0),h=c(0),a=c(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),i?(n.isEven()&&o.isEven()||(n.addTo(this,n),o.subTo(t,o)),n.rShiftTo(1,n)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;s.isEven();)s.rShiftTo(1,s),i?(h.isEven()&&a.isEven()||(h.addTo(this,h),a.subTo(t,a)),h.rShiftTo(1,h)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(s)>=0?(r.subTo(s,r),i&&n.subTo(h,n),o.subTo(a,o)):(s.subTo(r,s),i&&h.subTo(n,h),a.subTo(o,a))}return 0!=s.compareTo(e.ONE)?e.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}function Qe(t){var e,i=this.abs();if(1==i.t&&i[0]<=Ai[Ai.length-1]){for(e=0;e<Ai.length;++e)if(i[0]==Ai[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<Ai.length;){for(var r=Ai[e],s=e+1;s<Ai.length&&Ui>r;)r*=Ai[s++];for(r=i.modInt(r);s>e;)if(r%Ai[e++]==0)return!1}return i.millerRabin(t)}function Xe(t){var r=this.subtract(e.ONE),s=r.getLowestSetBit();if(0>=s)return!1;var n=r.shiftRight(s);t=t+1>>1,t>Ai.length&&(t=Ai.length);for(var o=i(),h=0;t>h;++h){o.fromInt(Ai[Math.floor(Math.random()*Ai.length)]);var a=o.modPow(n,this);if(0!=a.compareTo(e.ONE)&&0!=a.compareTo(r)){for(var u=1;u++<s&&0!=a.compareTo(r);)if(a=a.modPowInt(2,this),0==a.compareTo(e.ONE))return!1;if(0!=a.compareTo(r))return!1}}return!0}function ti(){this.i=0,this.j=0,this.S=new Array}function ei(t){var e,i,r;for(e=0;256>e;++e)this.S[e]=e;for(i=0,e=0;256>e;++e)i=i+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[i],this.S[i]=r;this.i=0,this.j=0}function ii(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function ri(){return new ti}function si(){if(null==Oi){for(Oi=ri();Ji>Ni;){var t=Math.floor(65536*Math.random());Vi[Ni++]=255&t}for(Oi.init(Vi),Ni=0;Ni<Vi.length;++Ni)Vi[Ni]=0;Ni=0}return Oi.next()}function ni(t){var e;for(e=0;e<t.length;++e)t[e]=si()}function oi(){}function hi(t,i){return new e(t,i)}function ai(t,i){if(i<t.length+11)return console.error("Message too long for RSA"),null;for(var r=new Array,s=t.length-1;s>=0&&i>0;){var n=t.charCodeAt(s--);128>n?r[--i]=n:n>127&&2048>n?(r[--i]=63&n|128,r[--i]=n>>6|192):(r[--i]=63&n|128,r[--i]=n>>6&63|128,r[--i]=n>>12|224)}r[--i]=0;for(var o=new oi,h=new Array;i>2;){for(h[0]=0;0==h[0];)o.nextBytes(h);r[--i]=h[0]}return r[--i]=2,r[--i]=0,new e(r)}function ui(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ci(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=hi(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")}function fi(t){return t.modPowInt(this.e,this.n)}function pi(t){var e=ai(t,this.n.bitLength()+7>>3);if(null==e)return null;var i=this.doPublic(e);if(null==i)return null;var r=i.toString(16);return 0==(1&r.length)?r:"0"+r}function li(t,e){for(var i=t.toByteArray(),r=0;r<i.length&&0==i[r];)++r;if(i.length-r!=e-1||2!=i[r])return null;for(++r;0!=i[r];)if(++r>=i.length)return null;for(var s="";++r<i.length;){var n=255&i[r];128>n?s+=String.fromCharCode(n):n>191&&224>n?(s+=String.fromCharCode((31&n)<<6|63&i[r+1]),++r):(s+=String.fromCharCode((15&n)<<12|(63&i[r+1])<<6|63&i[r+2]),r+=2)}return s}function di(t,e,i){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=hi(t,16),this.e=parseInt(e,16),this.d=hi(i,16)):console.error("Invalid RSA private key")}function gi(t,e,i,r,s,n,o,h){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=hi(t,16),this.e=parseInt(e,16),this.d=hi(i,16),this.p=hi(r,16),this.q=hi(s,16),this.dmp1=hi(n,16),this.dmq1=hi(o,16),this.coeff=hi(h,16)):console.error("Invalid RSA private key")}function mi(t,i){var r=new oi,s=t>>1;this.e=parseInt(i,16);for(var n=new e(i,16);;){for(;this.p=new e(t-s,1,r),0!=this.p.subtract(e.ONE).gcd(n).compareTo(e.ONE)||!this.p.isProbablePrime(10););for(;this.q=new e(s,1,r),0!=this.q.subtract(e.ONE).gcd(n).compareTo(e.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var h=this.p.subtract(e.ONE),a=this.q.subtract(e.ONE),u=h.multiply(a);if(0==u.gcd(n).compareTo(e.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(u),this.dmp1=this.d.mod(h),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}}function yi(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)}function vi(t){var e=hi(t,16),i=this.doPrivate(e);return null==i?null:li(i,this.n.bitLength()+7>>3)}function bi(t){var e,i,r="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),r+=Li.charAt(i>>6)+Li.charAt(63&i);for(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),r+=Li.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),r+=Li.charAt(i>>2)+Li.charAt((3&i)<<4));(3&r.length)>0;)r+=qi;return r}function Ti(t){var e,i,r="",s=0;for(e=0;e<t.length&&t.charAt(e)!=qi;++e)v=Li.indexOf(t.charAt(e)),0>v||(0==s?(r+=o(v>>2),i=3&v,s=1):1==s?(r+=o(i<<2|v>>4),i=15&v,s=2):2==s?(r+=o(i),r+=o(v>>2),i=3&v,s=3):(r+=o(i<<2|v>>4),r+=o(15&v),s=0));return 1==s&&(r+=o(i<<2)),r}var Si,Ri=0xdeadbeefcafe,Ei=15715070==(16777215&Ri);Ei&&"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=s,Si=30):Ei&&"Netscape"!=navigator.appName?(e.prototype.am=r,Si=26):(e.prototype.am=n,Si=28),e.prototype.DB=Si,e.prototype.DM=(1<<Si)-1,e.prototype.DV=1<<Si;var Di=52;e.prototype.FV=Math.pow(2,Di),e.prototype.F1=Di-Si,e.prototype.F2=2*Si-Di;var wi,xi,Bi="0123456789abcdefghijklmnopqrstuvwxyz",Ki=new Array;for(wi="0".charCodeAt(0),xi=0;9>=xi;++xi)Ki[wi++]=xi;for(wi="a".charCodeAt(0),xi=10;36>xi;++xi)Ki[wi++]=xi;for(wi="A".charCodeAt(0),xi=10;36>xi;++xi)Ki[wi++]=xi;A.prototype.convert=U,A.prototype.revert=O,A.prototype.reduce=V,A.prototype.mulTo=N,A.prototype.sqrTo=J,P.prototype.convert=M,P.prototype.revert=L,P.prototype.reduce=q,P.prototype.mulTo=C,P.prototype.sqrTo=H,e.prototype.copyTo=a,e.prototype.fromInt=u,e.prototype.fromString=f,e.prototype.clamp=p,e.prototype.dlShiftTo=T,e.prototype.drShiftTo=S,e.prototype.lShiftTo=R,e.prototype.rShiftTo=E,e.prototype.subTo=D,e.prototype.multiplyTo=w,e.prototype.squareTo=x,e.prototype.divRemTo=B,e.prototype.invDigit=I,e.prototype.isEven=j,e.prototype.exp=k,e.prototype.toString=l,e.prototype.negate=d,e.prototype.abs=g,e.prototype.compareTo=m,e.prototype.bitLength=b,e.prototype.mod=K,e.prototype.modPowInt=F,e.ZERO=c(0),e.ONE=c(1),Ie.prototype.convert=Pe,Ie.prototype.revert=Pe,Ie.prototype.mulTo=Me,Ie.prototype.sqrTo=Le,je.prototype.convert=ke,je.prototype.revert=Fe,je.prototype.reduce=_e,je.prototype.mulTo=Ze,je.prototype.sqrTo=ze;var Ai=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Ui=(1<<26)/Ai[Ai.length-1];e.prototype.chunkSize=$,e.prototype.toRadix=W,e.prototype.fromRadix=Q,e.prototype.fromNumber=X,e.prototype.bitwiseTo=se,e.prototype.changeBit=Se,e.prototype.addTo=we,e.prototype.dMultiply=Ne,e.prototype.dAddOffset=Je,e.prototype.multiplyLowerTo=He,e.prototype.multiplyUpperTo=Ce,e.prototype.modInt=Ye,e.prototype.millerRabin=Xe,e.prototype.clone=_,e.prototype.intValue=z,e.prototype.byteValue=Z,e.prototype.shortValue=G,e.prototype.signum=Y,e.prototype.toByteArray=te,e.prototype.equals=ee,e.prototype.min=ie,e.prototype.max=re,e.prototype.and=oe,e.prototype.or=ae,e.prototype.xor=ce,e.prototype.andNot=pe,e.prototype.not=le,e.prototype.shiftLeft=de,e.prototype.shiftRight=ge,e.prototype.getLowestSetBit=ye,e.prototype.bitCount=be,e.prototype.testBit=Te,e.prototype.setBit=Re,e.prototype.clearBit=Ee,e.prototype.flipBit=De,e.prototype.add=xe,e.prototype.subtract=Be,e.prototype.multiply=Ke,e.prototype.divide=Ue,e.prototype.remainder=Oe,e.prototype.divideAndRemainder=Ve,e.prototype.modPow=Ge,e.prototype.modInverse=We,e.prototype.pow=qe,e.prototype.gcd=$e,e.prototype.isProbablePrime=Qe,e.prototype.square=Ae,ti.prototype.init=ei,ti.prototype.next=ii;var Oi,Vi,Ni,Ji=256;if(null==Vi){Vi=new Array,Ni=0;var Ii;if(window.crypto&&window.crypto.getRandomValues){var Pi=new Uint32Array(256);for(window.crypto.getRandomValues(Pi),Ii=0;Ii<Pi.length;++Ii)Vi[Ni++]=255&Pi[Ii]}var Mi=function(t){if(this.count=this.count||0,this.count>=256||Ni>=Ji)return void(window.removeEventListener?window.removeEventListener("mousemove",Mi):window.detachEvent&&window.detachEvent("onmousemove",Mi));this.count+=1;var e=t.x+t.y;Vi[Ni++]=255&e};window.addEventListener?window.addEventListener("mousemove",Mi):window.attachEvent&&window.attachEvent("onmousemove",Mi)}oi.prototype.nextBytes=ni,ui.prototype.doPublic=fi,ui.prototype.setPublic=ci,ui.prototype.encrypt=pi,ui.prototype.doPrivate=yi,ui.prototype.setPrivate=di,ui.prototype.setPrivateEx=gi,ui.prototype.generate=mi,ui.prototype.decrypt=vi,function(){var t=function(t,r,s){var n=new oi,o=t>>1;this.e=parseInt(r,16);var h=new e(r,16),a=this,u=function(){var r=function(){if(a.p.compareTo(a.q)<=0){var t=a.p;a.p=a.q,a.q=t}var i=a.p.subtract(e.ONE),r=a.q.subtract(e.ONE),n=i.multiply(r);0==n.gcd(h).compareTo(e.ONE)?(a.n=a.p.multiply(a.q),a.d=h.modInverse(n),a.dmp1=a.d.mod(i),a.dmq1=a.d.mod(r),a.coeff=a.q.modInverse(a.p),setTimeout(function(){s()},0)):setTimeout(u,0)},c=function(){a.q=i(),a.q.fromNumberAsync(o,1,n,function(){a.q.subtract(e.ONE).gcda(h,function(t){0==t.compareTo(e.ONE)&&a.q.isProbablePrime(10)?setTimeout(r,0):setTimeout(c,0)})})},f=function(){a.p=i(),a.p.fromNumberAsync(t-o,1,n,function(){a.p.subtract(e.ONE).gcda(h,function(t){0==t.compareTo(e.ONE)&&a.p.isProbablePrime(10)?setTimeout(c,0):setTimeout(f,0)})})};setTimeout(f,0)};setTimeout(u,0)};ui.prototype.generateAsync=t;var r=function(t,e){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var s=i;i=r,r=s}var n=i.getLowestSetBit(),o=r.getLowestSetBit();if(0>o)return void e(i);o>n&&(o=n),o>0&&(i.rShiftTo(o,i),r.rShiftTo(o,r));var h=function(){(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),i.compareTo(r)>=0?(i.subTo(r,i),i.rShiftTo(1,i)):(r.subTo(i,r),r.rShiftTo(1,r)),i.signum()>0?setTimeout(h,0):(o>0&&r.lShiftTo(o,r),setTimeout(function(){e(r)},0))};setTimeout(h,10)};e.prototype.gcda=r;var s=function(t,i,r,s){if("number"==typeof i)if(2>t)this.fromInt(1);else{this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),he,this),this.isEven()&&this.dAddOffset(1,0);var n=this,o=function(){n.dAddOffset(2,0),n.bitLength()>t&&n.subTo(e.ONE.shiftLeft(t-1),n),n.isProbablePrime(i)?setTimeout(function(){s()},0):setTimeout(o,0)};setTimeout(o,0)}else{var h=new Array,a=7&t;h.length=(t>>3)+1,i.nextBytes(h),a>0?h[0]&=(1<<a)-1:h[0]=0,this.fromString(h,256)}};e.prototype.fromNumberAsync=s}();var Li="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qi="=",Hi=Hi||{};Hi.env=Hi.env||{};var Ci=Hi,ji=Object.prototype,ki="[object Function]",Fi=["toString","valueOf"];Hi.env.parseUA=function(t){var e,i=function(t){var e=0;return parseFloat(t.replace(/\./g,function(){return 1==e++?"":"."}))},r=navigator,s={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:r&&r.cajaVersion,secure:!1,os:null},n=t||navigator&&navigator.userAgent,o=window&&window.location,h=o&&o.href;return s.secure=h&&0===h.toLowerCase().indexOf("https"),n&&(/windows|win32/i.test(n)?s.os="windows":/macintosh/i.test(n)?s.os="macintosh":/rhino/i.test(n)&&(s.os="rhino"),/KHTML/.test(n)&&(s.webkit=1),e=n.match(/AppleWebKit\/([^\s]*)/),e&&e[1]&&(s.webkit=i(e[1]),/ Mobile\//.test(n)?(s.mobile="Apple",e=n.match(/OS ([^\s]*)/),e&&e[1]&&(e=i(e[1].replace("_","."))),s.ios=e,s.ipad=s.ipod=s.iphone=0,e=n.match(/iPad|iPod|iPhone/),e&&e[0]&&(s[e[0].toLowerCase()]=s.ios)):(e=n.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),e&&(s.mobile=e[0]),/webOS/.test(n)&&(s.mobile="WebOS",e=n.match(/webOS\/([^\s]*);/),e&&e[1]&&(s.webos=i(e[1]))),/ Android/.test(n)&&(s.mobile="Android",e=n.match(/Android ([^\s]*);/),e&&e[1]&&(s.android=i(e[1])))),e=n.match(/Chrome\/([^\s]*)/),e&&e[1]?s.chrome=i(e[1]):(e=n.match(/AdobeAIR\/([^\s]*)/),e&&(s.air=e[0]))),s.webkit||(e=n.match(/Opera[\s\/]([^\s]*)/),e&&e[1]?(s.opera=i(e[1]),e=n.match(/Version\/([^\s]*)/),e&&e[1]&&(s.opera=i(e[1])),e=n.match(/Opera Mini[^;]*/),e&&(s.mobile=e[0])):(e=n.match(/MSIE\s([^;]*)/),e&&e[1]?s.ie=i(e[1]):(e=n.match(/Gecko\/([^\s]*)/),e&&(s.gecko=1,e=n.match(/rv:([^\s\)]*)/),e&&e[1]&&(s.gecko=i(e[1]))))))),s},Hi.env.ua=Hi.env.parseUA(),Hi.isFunction=function(t){return"function"==typeof t||ji.toString.apply(t)===ki},Hi._IEEnumFix=Hi.env.ua.ie?function(t,e){var i,r,s;for(i=0;i<Fi.length;i+=1)r=Fi[i],s=e[r],Ci.isFunction(s)&&s!=ji[r]&&(t[r]=s)}:function(){},Hi.extend=function(t,e,i){if(!e||!t)throw new Error("extend failed, please check that all dependencies are included.");var r,s=function(){};if(s.prototype=e.prototype,t.prototype=new s,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==ji.constructor&&(e.prototype.constructor=e),i){for(r in i)Ci.hasOwnProperty(i,r)&&(t.prototype[r]=i[r]);Ci._IEEnumFix(t.prototype,i)}},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var i=t.toString(16);if("-"!=i.substr(0,1))i.length%2==1?i="0"+i:i.match(/^[0-7]/)||(i="00"+i);else{var r=i.substr(1),s=r.length;s%2==1?s+=1:i.match(/^[0-7]/)||(s+=2);for(var n="",o=0;s>o;o++)n+="f";var h=new e(n,16),a=h.xor(t).add(e.ONE);i=a.toString(16).replace(/^-/,"")}return i},this.getPEMStringFromHex=function(t,e){var i=CryptoJS.enc.Hex.parse(t),r=CryptoJS.enc.Base64.stringify(i),s=r.replace(/(.{64})/g,"$1\r\n");return s=s.replace(/\r\n$/,""),"-----BEGIN "+e+"-----\r\n"+s+"\r\n-----END "+e+"-----\r\n"}},KJUR.asn1.ASN1Object=function(){var t="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+t.length+",v="+this.hV;var e=this.hV.length/2,i=e.toString(16);if(i.length%2==1&&(i="0"+i),128>e)return i;var r=i.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);var s=128+r;return s.toString(16)+i},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(t){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.str?this.setString(t.str):"undefined"!=typeof t.hex&&this.setStringHex(t.hex))},Hi.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){utc=t.getTime()+6e4*t.getTimezoneOffset();var e=new Date(utc);return e},this.formatDate=function(t,e){var i=this.zeroPadding,r=this.localDateToUTC(t),s=String(r.getFullYear());"utc"==e&&(s=s.substr(2,2));var n=i(String(r.getMonth()+1),2),o=i(String(r.getDate()),2),h=i(String(r.getHours()),2),a=i(String(r.getMinutes()),2),u=i(String(r.getSeconds()),2);return s+n+o+h+a+u+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setByDateValue=function(t,e,i,r,s,n){var o=new Date(Date.UTC(t,e-1,i,r,s,n,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},Hi.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(t){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,"undefined"!=typeof t&&"undefined"!=typeof t.array&&(this.asn1Array=t.array)},Hi.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},Hi.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(t){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var i=new e(String(t),10);this.setByBigInteger(i)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.bigint?this.setByBigInteger(t.bigint):"undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"undefined"!=typeof t.hex&&this.setValueHex(t.hex))},Hi.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(t){KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(0>t||t>7)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;
this.hTLV=null,this.isModified=!0,this.hV=i+e},this.setByBinaryString=function(t){t=t.replace(/0+$/,"");var e=8-t.length%8;8==e&&(e=0);for(var i=0;e>=i;i++)t+="0";for(var r="",i=0;i<t.length-1;i+=8){var s=t.substr(i,8),n=parseInt(s,2).toString(16);1==n.length&&(n="0"+n),r+=n}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",i=0;i<t.length;i++)e+=1==t[i]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),i=0;t>i;i++)e[i]=!1;return e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.hex?this.setHexValueIncludingUnusedBits(t.hex):"undefined"!=typeof t.bin?this.setByBinaryString(t.bin):"undefined"!=typeof t.array&&this.setByBooleanArray(t.array))},Hi.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(t){KJUR.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},Hi.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Hi.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(t){var i=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",s=new e(t,10),n=s.toString(2),o=7-n.length%7;7==o&&(o=0);for(var h="",a=0;o>a;a++)h+="0";n=h+n;for(var a=0;a<n.length-1;a+=7){var u=n.substr(a,7);a!=n.length-7&&(u="1"+u),r+=i(parseInt(u,2))}return r};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var e="",s=t.split("."),n=40*parseInt(s[0])+parseInt(s[1]);e+=i(n),s.splice(0,2);for(var o=0;o<s.length;o++)e+=r(s[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueName=function(t){if("undefined"==typeof KJUR.asn1.x509.OID.name2oidList[t])throw"DERObjectIdentifier oidName undefined: "+t;var e=KJUR.asn1.x509.OID.name2oidList[t];this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.oid?this.setValueOidString(t.oid):"undefined"!=typeof t.hex?this.setValueHex(t.hex):"undefined"!=typeof t.name&&this.setValueName(t.name))},Hi.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(t){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},Hi.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(t){KJUR.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},Hi.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(t){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},Hi.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(t){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},Hi.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(t){KJUR.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},Hi.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(t){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},"undefined"!=typeof t&&("undefined"!=typeof t.str?this.setString(t.str):"undefined"!=typeof t.hex?this.setStringHex(t.hex):"undefined"!=typeof t.date&&this.setByDate(t.date))},Hi.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(t){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen"),this.hV=stohex(this.s)},"undefined"!=typeof t&&("undefined"!=typeof t.str?this.setString(t.str):"undefined"!=typeof t.hex?this.setStringHex(t.hex):"undefined"!=typeof t.date&&this.setByDate(t.date))},Hi.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(t){KJUR.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){var i=this.asn1Array[e];t+=i.getEncodedHex()}return this.hV=t,this.hV}},Hi.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(t){KJUR.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var i=this.asn1Array[e];t.push(i.getEncodedHex())}return t.sort(),this.hV=t.join(""),this.hV}},Hi.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(t){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,i){this.hT=e,this.isExplicit=t,this.asn1Object=i,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=i.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.tag&&(this.hT=t.tag),"undefined"!=typeof t.explicit&&(this.isExplicit=t.explicit),"undefined"!=typeof t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},Hi.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object),function(t){"use strict";var e,i={};i.decode=function(i){var r;if(e===t){var s="0123456789ABCDEF",n=" \f\n\r	 \u2028\u2029";for(e=[],r=0;16>r;++r)e[s.charAt(r)]=r;for(s=s.toLowerCase(),r=10;16>r;++r)e[s.charAt(r)]=r;for(r=0;r<n.length;++r)e[n.charAt(r)]=-1}var o=[],h=0,a=0;for(r=0;r<i.length;++r){var u=i.charAt(r);if("="==u)break;if(u=e[u],-1!=u){if(u===t)throw"Illegal character at offset "+r;h|=u,++a>=2?(o[o.length]=h,h=0,a=0):h<<=4}}if(a)throw"Hex encoding incomplete: 4 bits missing";return o},window.Hex=i}(),function(t){"use strict";var e,i={};i.decode=function(i){var r;if(e===t){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="= \f\n\r	 \u2028\u2029";for(e=[],r=0;64>r;++r)e[s.charAt(r)]=r;for(r=0;r<n.length;++r)e[n.charAt(r)]=-1}var o=[],h=0,a=0;for(r=0;r<i.length;++r){var u=i.charAt(r);if("="==u)break;if(u=e[u],-1!=u){if(u===t)throw"Illegal character at offset "+r;h|=u,++a>=4?(o[o.length]=h>>16,o[o.length]=h>>8&255,o[o.length]=255&h,h=0,a=0):h<<=6}}switch(a){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:o[o.length]=h>>10;break;case 3:o[o.length]=h>>16,o[o.length]=h>>8&255}return o},i.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,i.unarmor=function(t){var e=i.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw"RegExp out of sync";t=e[2]}return i.decode(t)},window.Base64=i}(),function(t){"use strict";function e(t,i){t instanceof e?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=i)}function i(t,e,i,r,s){this.stream=t,this.header=e,this.length=i,this.tag=r,this.sub=s}var r=100,s="…",n={tag:function(t,e){var i=document.createElement(t);return i.className=e,i},text:function(t){return document.createTextNode(t)}};e.prototype.get=function(e){if(e===t&&(e=this.pos++),e>=this.enc.length)throw"Requesting byte offset "+e+" on a stream of length "+this.enc.length;return this.enc[e]},e.prototype.hexDigits="0123456789ABCDEF",e.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},e.prototype.hexDump=function(t,e,i){for(var r="",s=t;e>s;++s)if(r+=this.hexByte(this.get(s)),i!==!0)switch(15&s){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},e.prototype.parseStringISO=function(t,e){for(var i="",r=t;e>r;++r)i+=String.fromCharCode(this.get(r));return i},e.prototype.parseStringUTF=function(t,e){for(var i="",r=t;e>r;){var s=this.get(r++);i+=String.fromCharCode(128>s?s:s>191&&224>s?(31&s)<<6|63&this.get(r++):(15&s)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return i},e.prototype.parseStringBMP=function(t,e){for(var i="",r=t;e>r;r+=2){var s=this.get(r),n=this.get(r+1);i+=String.fromCharCode((s<<8)+n)}return i},e.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,e.prototype.parseTime=function(t,e){var i=this.parseStringISO(t,e),r=this.reTime.exec(i);return r?(i=r[1]+"-"+r[2]+"-"+r[3]+" "+r[4],r[5]&&(i+=":"+r[5],r[6]&&(i+=":"+r[6],r[7]&&(i+="."+r[7]))),r[8]&&(i+=" UTC","Z"!=r[8]&&(i+=r[8],r[9]&&(i+=":"+r[9]))),i):"Unrecognized time: "+i},e.prototype.parseInteger=function(t,e){var i=e-t;if(i>4){i<<=3;var r=this.get(t);if(0===r)i-=8;else for(;128>r;)r<<=1,--i;return"("+i+" bit)"}for(var s=0,n=t;e>n;++n)s=s<<8|this.get(n);return s},e.prototype.parseBitString=function(t,e){var i=this.get(t),r=(e-t-1<<3)-i,s="("+r+" bit)";if(20>=r){var n=i;s+=" ";for(var o=e-1;o>t;--o){for(var h=this.get(o),a=n;8>a;++a)s+=h>>a&1?"1":"0";n=0}}return s},e.prototype.parseOctetString=function(t,e){var i=e-t,n="("+i+" byte) ";i>r&&(e=t+r);for(var o=t;e>o;++o)n+=this.hexByte(this.get(o));return i>r&&(n+=s),n},e.prototype.parseOID=function(t,e){for(var i="",r=0,s=0,n=t;e>n;++n){var o=this.get(n);if(r=r<<7|127&o,s+=7,!(128&o)){if(""===i){var h=80>r?40>r?0:1:2;i=h+"."+(r-40*h)}else i+="."+(s>=31?"bigint":r);r=s=0}}return i},i.prototype.typeName=function(){if(this.tag===t)return"unknown";var e=this.tag>>6,i=(this.tag>>5&1,31&this.tag);switch(e){case 0:switch(i){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+i.toString(16)}case 1:return"Application_"+i.toString(16);case 2:return"["+i+"]";case 3:return"Private_"+i.toString(16)}},i.prototype.reSeemsASCII=/^[ -~]+$/,i.prototype.content=function(){if(this.tag===t)return null;var e=this.tag>>6,i=31&this.tag,n=this.posContent(),o=Math.abs(this.length);if(0!==e){if(null!==this.sub)return"("+this.sub.length+" elem)";var h=this.stream.parseStringISO(n,n+Math.min(o,r));return this.reSeemsASCII.test(h)?h.substring(0,2*r)+(h.length>2*r?s:""):this.stream.parseOctetString(n,n+o)}switch(i){case 1:return 0===this.stream.get(n)?"false":"true";case 2:return this.stream.parseInteger(n,n+o);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(n,n+o);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(n,n+o);case 6:return this.stream.parseOID(n,n+o);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(n,n+o);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(n,n+o);case 30:return this.stream.parseStringBMP(n,n+o);case 23:case 24:return this.stream.parseTime(n,n+o)}return null},i.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},i.prototype.print=function(e){if(e===t&&(e=""),document.writeln(e+this),null!==this.sub){e+="  ";for(var i=0,r=this.sub.length;r>i;++i)this.sub[i].print(e)}},i.prototype.toPrettyString=function(e){e===t&&(e="");var i=e+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(i+="+"),i+=this.length,32&this.tag?i+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(i+=" (encapsulates)"),i+="\n",null!==this.sub){e+="  ";for(var r=0,s=this.sub.length;s>r;++r)i+=this.sub[r].toPrettyString(e)}return i},i.prototype.toDOM=function(){var t=n.tag("div","node");t.asn1=this;var e=n.tag("div","head"),i=this.typeName().replace(/_/g," ");e.innerHTML=i;var r=this.content();if(null!==r){r=String(r).replace(/</g,"&lt;");var s=n.tag("span","preview");s.appendChild(n.text(r)),e.appendChild(s)}t.appendChild(e),this.node=t,this.head=e;var o=n.tag("div","value");if(i="Offset: "+this.stream.pos+"<br/>",i+="Length: "+this.header+"+",i+=this.length>=0?this.length:-this.length+" (undefined)",32&this.tag?i+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(i+="<br/>(encapsulates)"),null!==r&&(i+="<br/>Value:<br/><b>"+r+"</b>","object"==typeof oids&&6==this.tag)){var h=oids[r];h&&(h.d&&(i+="<br/>"+h.d),h.c&&(i+="<br/>"+h.c),h.w&&(i+="<br/>(warning!)"))}o.innerHTML=i,t.appendChild(o);var a=n.tag("div","sub");if(null!==this.sub)for(var u=0,c=this.sub.length;c>u;++u)a.appendChild(this.sub[u].toDOM());return t.appendChild(a),e.onclick=function(){t.className="node collapsed"==t.className?"node":"node collapsed"},t},i.prototype.posStart=function(){return this.stream.pos},i.prototype.posContent=function(){return this.stream.pos+this.header},i.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},i.prototype.fakeHover=function(t){this.node.className+=" hover",t&&(this.head.className+=" hover")},i.prototype.fakeOut=function(t){var e=/ ?hover/;this.node.className=this.node.className.replace(e,""),t&&(this.head.className=this.head.className.replace(e,""))},i.prototype.toHexDOM_sub=function(t,e,i,r,s){if(!(r>=s)){var o=n.tag("span",e);o.appendChild(n.text(i.hexDump(r,s))),t.appendChild(o)}},i.prototype.toHexDOM=function(e){var i=n.tag("span","hex");if(e===t&&(e=i),this.head.hexNode=i,this.head.onmouseover=function(){this.hexNode.className="hexCurrent"},this.head.onmouseout=function(){this.hexNode.className="hex"},i.asn1=this,i.onmouseover=function(){var t=!e.selected;t&&(e.selected=this.asn1,this.className="hexCurrent"),this.asn1.fakeHover(t)},i.onmouseout=function(){var t=e.selected==this.asn1;this.asn1.fakeOut(t),t&&(e.selected=null,this.className="hex")},this.toHexDOM_sub(i,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(i,this.length>=0?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub)i.appendChild(n.text(this.stream.hexDump(this.posContent(),this.posEnd())));else if(this.sub.length>0){var r=this.sub[0],s=this.sub[this.sub.length-1];this.toHexDOM_sub(i,"intro",this.stream,this.posContent(),r.posStart());for(var o=0,h=this.sub.length;h>o;++o)i.appendChild(this.sub[o].toHexDOM(e));this.toHexDOM_sub(i,"outro",this.stream,s.posEnd(),this.posEnd())}return i},i.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},i.decodeLength=function(t){var e=t.get(),i=127&e;if(i==e)return i;if(i>3)throw"Length over 24 bits not supported at position "+(t.pos-1);if(0===i)return-1;e=0;for(var r=0;i>r;++r)e=e<<8|t.get();return e},i.hasContent=function(t,r,s){if(32&t)return!0;if(3>t||t>4)return!1;var n=new e(s);3==t&&n.get();var o=n.get();if(o>>6&1)return!1;try{var h=i.decodeLength(n);return n.pos-s.pos+h==r}catch(a){return!1}},i.decode=function(t){t instanceof e||(t=new e(t,0));var r=new e(t),s=t.get(),n=i.decodeLength(t),o=t.pos-r.pos,h=null;if(i.hasContent(s,n,t)){var a=t.pos;if(3==s&&t.get(),h=[],n>=0){for(var u=a+n;t.pos<u;)h[h.length]=i.decode(t);if(t.pos!=u)throw"Content size is not correct for container starting at offset "+a}else try{for(;;){var c=i.decode(t);if(0===c.tag)break;h[h.length]=c}n=a-t.pos}catch(f){throw"Exception while decoding undefined length content: "+f}}else t.pos+=n;return new i(r,o,n,s,h)},i.test=function(){for(var t=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],r=0,s=t.length;s>r;++r){var n=new e(t[r].value,0),o=i.decodeLength(n);o!=t[r].expected&&document.write("In test["+r+"] expected "+t[r].expected+" got "+o+"\n")}},window.ASN1=i}(),ASN1.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,i=2*this.length;return t.substr(e,i)},ui.prototype.parseKey=function(t){try{var e=0,i=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,s=r.test(t)?Hex.decode(t):Base64.unarmor(t),n=ASN1.decode(s);if(3===n.sub.length&&(n=n.sub[2].sub[0]),9===n.sub.length){e=n.sub[1].getHexStringValue(),this.n=hi(e,16),i=n.sub[2].getHexStringValue(),this.e=parseInt(i,16);var o=n.sub[3].getHexStringValue();this.d=hi(o,16);var h=n.sub[4].getHexStringValue();this.p=hi(h,16);var a=n.sub[5].getHexStringValue();this.q=hi(a,16);var u=n.sub[6].getHexStringValue();this.dmp1=hi(u,16);var c=n.sub[7].getHexStringValue();this.dmq1=hi(c,16);var f=n.sub[8].getHexStringValue();this.coeff=hi(f,16)}else{if(2!==n.sub.length)return!1;var p=n.sub[1],l=p.sub[0];e=l.sub[0].getHexStringValue(),this.n=hi(e,16),i=l.sub[1].getHexStringValue(),this.e=parseInt(i,16)}return!0}catch(d){return!1}},ui.prototype.getPrivateBaseKey=function(){var t={array:[new KJUR.asn1.DERInteger({"int":0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]},e=new KJUR.asn1.DERSequence(t);return e.getEncodedHex()},ui.prototype.getPrivateBaseKeyB64=function(){return bi(this.getPrivateBaseKey())},ui.prototype.getPublicBaseKey=function(){var t={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]},e=new KJUR.asn1.DERSequence(t);t={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e})]};var i=new KJUR.asn1.DERSequence(t);t={hex:"00"+i.getEncodedHex()};var r=new KJUR.asn1.DERBitString(t);t={array:[e,r]};var s=new KJUR.asn1.DERSequence(t);return s.getEncodedHex()},ui.prototype.getPublicBaseKeyB64=function(){return bi(this.getPublicBaseKey())},ui.prototype.wordwrap=function(t,e){if(e=e||64,!t)return t;var i="(.{1,"+e+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(i,"g")).join("\n")},ui.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return t+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n",t+="-----END RSA PRIVATE KEY-----"},ui.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return t+=this.wordwrap(this.getPublicBaseKeyB64())+"\n",t+="-----END PUBLIC KEY-----"},ui.prototype.hasPublicKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")},ui.prototype.hasPrivateKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},ui.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)};var _i=function(t){ui.call(this),t&&("string"==typeof t?this.parseKey(t):(this.hasPrivateKeyProperty(t)||this.hasPublicKeyProperty(t))&&this.parsePropertiesFrom(t))};_i.prototype=new ui,_i.prototype.constructor=_i;var zi=function(t){t=t||{},this.default_key_size=parseInt(t.default_key_size)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null};zi.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new _i(t)},zi.prototype.setPrivateKey=function(t){this.setKey(t)},zi.prototype.setPublicKey=function(t){this.setKey(t)},zi.prototype.decrypt=function(t){try{return this.getKey().decrypt(Ti(t))}catch(e){return!1}},zi.prototype.encrypt=function(t){try{return bi(this.getKey().encrypt(t))}catch(e){return!1}},zi.prototype.getKey=function(t){if(!this.key){if(this.key=new _i,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},zi.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},zi.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},zi.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},zi.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.JSEncrypt=zi}(r);var s=r.JSEncrypt;i.exports=s});
;define("common:widget/dep/tool/md5.min.js",function(n,t,r){function e(n,t){var r=(65535&n)+(65535&t),e=(n>>16)+(t>>16)+(r>>16);return e<<16|65535&r}function o(n,t){return n<<t|n>>>32-t}function u(n,t,r,u,c,f){return e(o(e(e(t,n),e(u,f)),c),r)}function c(n,t,r,e,o,c,f){return u(t&r|~t&e,n,t,o,c,f)}function f(n,t,r,e,o,c,f){return u(t&e|r&~e,n,t,o,c,f)}function i(n,t,r,e,o,c,f){return u(t^r^e,n,t,o,c,f)}function a(n,t,r,e,o,c,f){return u(r^(t|~e),n,t,o,c,f)}function h(n,t){n[t>>5]|=128<<t%32,n[(t+64>>>9<<4)+14]=t;var r,o,u,h,d,g=1732584193,l=-271733879,v=-1732584194,m=271733878;for(r=0;r<n.length;r+=16)o=g,u=l,h=v,d=m,g=c(g,l,v,m,n[r],7,-680876936),m=c(m,g,l,v,n[r+1],12,-389564586),v=c(v,m,g,l,n[r+2],17,606105819),l=c(l,v,m,g,n[r+3],22,-1044525330),g=c(g,l,v,m,n[r+4],7,-176418897),m=c(m,g,l,v,n[r+5],12,1200080426),v=c(v,m,g,l,n[r+6],17,-1473231341),l=c(l,v,m,g,n[r+7],22,-45705983),g=c(g,l,v,m,n[r+8],7,1770035416),m=c(m,g,l,v,n[r+9],12,-1958414417),v=c(v,m,g,l,n[r+10],17,-42063),l=c(l,v,m,g,n[r+11],22,-1990404162),g=c(g,l,v,m,n[r+12],7,1804603682),m=c(m,g,l,v,n[r+13],12,-40341101),v=c(v,m,g,l,n[r+14],17,-1502002290),l=c(l,v,m,g,n[r+15],22,1236535329),g=f(g,l,v,m,n[r+1],5,-165796510),m=f(m,g,l,v,n[r+6],9,-1069501632),v=f(v,m,g,l,n[r+11],14,643717713),l=f(l,v,m,g,n[r],20,-373897302),g=f(g,l,v,m,n[r+5],5,-701558691),m=f(m,g,l,v,n[r+10],9,38016083),v=f(v,m,g,l,n[r+15],14,-660478335),l=f(l,v,m,g,n[r+4],20,-405537848),g=f(g,l,v,m,n[r+9],5,568446438),m=f(m,g,l,v,n[r+14],9,-1019803690),v=f(v,m,g,l,n[r+3],14,-187363961),l=f(l,v,m,g,n[r+8],20,1163531501),g=f(g,l,v,m,n[r+13],5,-1444681467),m=f(m,g,l,v,n[r+2],9,-51403784),v=f(v,m,g,l,n[r+7],14,1735328473),l=f(l,v,m,g,n[r+12],20,-1926607734),g=i(g,l,v,m,n[r+5],4,-378558),m=i(m,g,l,v,n[r+8],11,-2022574463),v=i(v,m,g,l,n[r+11],16,1839030562),l=i(l,v,m,g,n[r+14],23,-35309556),g=i(g,l,v,m,n[r+1],4,-1530992060),m=i(m,g,l,v,n[r+4],11,1272893353),v=i(v,m,g,l,n[r+7],16,-155497632),l=i(l,v,m,g,n[r+10],23,-1094730640),g=i(g,l,v,m,n[r+13],4,681279174),m=i(m,g,l,v,n[r],11,-358537222),v=i(v,m,g,l,n[r+3],16,-722521979),l=i(l,v,m,g,n[r+6],23,76029189),g=i(g,l,v,m,n[r+9],4,-640364487),m=i(m,g,l,v,n[r+12],11,-421815835),v=i(v,m,g,l,n[r+15],16,530742520),l=i(l,v,m,g,n[r+2],23,-995338651),g=a(g,l,v,m,n[r],6,-198630844),m=a(m,g,l,v,n[r+7],10,1126891415),v=a(v,m,g,l,n[r+14],15,-1416354905),l=a(l,v,m,g,n[r+5],21,-57434055),g=a(g,l,v,m,n[r+12],6,1700485571),m=a(m,g,l,v,n[r+3],10,-1894986606),v=a(v,m,g,l,n[r+10],15,-1051523),l=a(l,v,m,g,n[r+1],21,-2054922799),g=a(g,l,v,m,n[r+8],6,1873313359),m=a(m,g,l,v,n[r+15],10,-30611744),v=a(v,m,g,l,n[r+6],15,-1560198380),l=a(l,v,m,g,n[r+13],21,1309151649),g=a(g,l,v,m,n[r+4],6,-145523070),m=a(m,g,l,v,n[r+11],10,-1120210379),v=a(v,m,g,l,n[r+2],15,718787259),l=a(l,v,m,g,n[r+9],21,-343485551),g=e(g,o),l=e(l,u),v=e(v,h),m=e(m,d);return[g,l,v,m]}function d(n){var t,r="";for(t=0;t<32*n.length;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}function g(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;for(t=0;t<8*n.length;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}function l(n){return d(h(g(n),8*n.length))}function v(n,t){var r,e,o=g(n),u=[],c=[];for(u[15]=c[15]=void 0,o.length>16&&(o=h(o,8*n.length)),r=0;16>r;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=h(u.concat(g(t)),512+8*t.length),d(h(c.concat(e),640))}function m(n){var t,r,e="0123456789abcdef",o="";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),o+=e.charAt(t>>>4&15)+e.charAt(15&t);return o}function C(n){return unescape(encodeURIComponent(n))}function p(n){return l(C(n))}function A(n){return m(p(n))}function s(n,t){return v(C(n),C(t))}function w(n,t){return m(s(n,t))}function b(n,t,r){return t?r?s(t,n):w(t,n):r?p(n):A(n)}window.md5=b,r.exports=b});
;define("common:widget/filter/filter_district/filter_district.js",function(i,t,e){function s(){return $("#j-district-item-wrap").height()>r.height()}function n(i){"hide"===i?(d.removeClass("unfold"),r.addClass("over-hidden")):(d.addClass("unfold"),r.removeClass("over-hidden"))}function o(){if(s()){(d=$("#j-show-more-district")).show().click(function(){n(d.hasClass("unfold")?"hide":"show")});var i=r.find("a.filter-active");i.length>0&&i.position().top>=i.height()&&n("show"),i=null}}var d,r=$("#j-district-filter-list");e.exports={init:o}});
;define("common:widget/filter/filter_normal/filter_normal.js",function(t,i,e){function l(t){var i=this.$filterSection=$("#"+t);this.$filterList=i.find("div.j-filter-list"),this.$filterWrap=i.find("div.j-filter-item-wrap"),this.$toggleBtn=i.find("a.j-toggle-filter-btn")}l.prototype={toggleFilterList:function(t){"hide"===t?(this.$toggleBtn.removeClass("unfold"),this.$filterList.addClass("over-hidden")):(this.$toggleBtn.addClass("unfold"),this.$filterList.removeClass("over-hidden"))},init:function(){if(this.$filterWrap.height()>this.$filterList.height()){var t=this;this.$toggleBtn.show().click(function(){t.toggleFilterList(t.$toggleBtn.hasClass("unfold")?"hide":"show")});var i=this.$filterWrap.find("a.filter-active");i.lenght>0&&i.position().top>=i.height()&&this.toggleFilterList("show"),i=null}}},e.exports={ToggelFilter:l}});
;define("common:widget/filter/filter_normal/filter_normal_toggle.js",function(t,i,s){function e(){var t=$(".sub-filter-section"),i=$(".sub-filter-list"),s=$(".district-ab-button");i.height()>t.height()&&s.show(),r()>11&&(t.removeClass("overflow-hidden"),s.removeClass("district-ab-button-more").addClass("district-ab-button-less"))}function o(){var t=$(".sub-filter-section"),i=($(".sub-filter-list"),$(".district-ab-button"));i.on("click",function(){i.hasClass("district-ab-button-more")?(t.removeClass("overflow-hidden"),i.removeClass("district-ab-button-more").addClass("district-ab-button-less")):(t.addClass("overflow-hidden"),i.removeClass("district-ab-button-less").addClass("district-ab-button-more"))})}function r(){var t=$(".sub-filter-section"),i=t.find(".filter-active"),s=t.find("a");return s.index(i)}function n(){e(),o()}s.exports={init:n}});
;define("common:widget/ui/cookie/cookie.js",function(e,t,o){o.exports={set:function(e,t,o,n,i){if("string"!=typeof e)throw new Error(" name 属性必须为字符串");if("string"!=typeof t)throw new Error(" value 属性必须为字符串");e=encodeURIComponent(e),t=encodeURIComponent(t),this.setRaw(e,t,o,n,i)},get:function(e){if("string"!=typeof e)throw new Error(" name 属性必须为字符串");var t=this.getRaw(encodeURIComponent(e));return t?decodeURIComponent(t):t},remove:function(e,t,o){this.set(e,"",0,t,o)},setRaw:function(e,t,o,n,i){if("string"!=typeof e)throw new Error(" name 属性必须为字符串");if("string"!=typeof t)throw new Error(" value 属性必须为字符串");var r=[];r.push(e+"="+t);var s=new Date;if("string"==typeof o)"today"==o||"week"==o&&s.setDate(s.getDate()+6),s.setHours(23),s.setMinutes(59),s.setSeconds(59),s.setMilliseconds(999),r.push("expires="+s.toUTCString());else if("number"==typeof o&&o>=0){var a=24*o*3600*1e3;s.setTime(s.getTime()+a),r.push("expires="+s.toUTCString())}if(!n){var f=window.location.hostname;f.indexOf("https://gss0.bdstatic.com/8r1VfDn9KggZnd_b8IqT0jB-xx1xbK/static/common/pkg/baidu.com")>-1?n=".baidu.com":f.indexOf("https://gss0.bdstatic.com/8r1VfDn9KggZnd_b8IqT0jB-xx1xbK/static/common/pkg/nuomi.com")>-1&&(n=".nuomi.com")}n&&r.push("domain="+n),r.push("path="+(i||"/")),document.cookie=r.join(";")},getRaw:function(e){if("string"!=typeof e)throw new Error(" name 属性必须为字符串");var t=document.cookie;if(t)for(var o=t.split(";"),n=0,i=o.length;i>n;n++){var r=o[n].split("="),s=r[0].replace(/^\s*(.*)\s*$/g,"$1"),a=r[1];if(s===e)return a}return null},removeRaw:function(e,t,o){this.setRaw(name,"",0,t,o)}}});
;define("common:widget/good_item/toptenCtag.js",function(t,e,n){function o(){var t=a.get("bn_pc_ctag");if(t){try{t=r.decode(t)}catch(e){}t=$.parseJSON(t)}else t=[];return t}function c(t){var e,n=o();return n&&n.length?($.each(n,function(o,c){var i=c.s,s=c.k;i===t.s&&s===t.k&&(e=!0,n.splice(o,1),n.push(t))}),e||(5===n.length&&n.shift(),n.push(t)),void i(n)):(n.push(t),void i(n))}function i(t){var e=$.stringify(t);e=r.encode(e),a.set("bn_pc_ctag",e,1)}function s(t){t=$.extend({},d,t);var e={s:t.s,k:t.k};$(t.container).on("click",t.selector,function(){var t=$(this).data("topten"),n=t.split("&");$.each(n,function(t,n){n=n.split("="),e[n[0]]=n[1]}),c(e)})}var a=t("common:widget/ui/cookie/cookie.js"),r=t("common:widget/dep/tool/base64.js"),d={selector:".j-topten",s:"dbbox",container:document};n.exports={bind:s}});
;define("common:widget/goods_area/item.js",function(e,i,o){function t(e){var i=$("#hover-overlay");$(e.element).on("mouseenter",function(){var e=$(this),o=e.offset();i.css({left:o.left-5,top:o.top-5,visibility:"visible"})}).on("mouseleave",function(){i.css({visibility:"hidden"})})}o.exports={init:t}});
;define("common:widget/ui/account_forbidden/account_forbidden.js",function(o,n,a){var i=o("common:widget/ui/dialog/dialog.js");a.exports={init:function(){var o=['<div class="remind-dialog-body">','<p class="font18">网络异常，请稍候再试</p>','<p class="button-wrap">','<a href="javascript:;" class="btn-pink" id="J-close-remind-dialog">知道了</a>',"</p>","</div>"].join(""),n=new i({width:460,title:"提示",content:o,customClassName:"remind-dialog",mask:{enable:!0,opacity:.25}});n.center(),$("#J-close-remind-dialog").click(function(){n.dispose(),a(),location.reload()}),$(".j-dialog-btn").click(function(){n.dispose(),a(),location.reload()});var a=function(){var o=F.context("logout_nuomi");$.ajax(o,{dataType:"json",async:!1,success:function(o){var n=F.context("logout_baidu");if(0==o.errno){var a=o.data.BDUSS64;a&&(n+="&sid="+encodeURIComponent(a))}$.ajax(n,{dataType:"jsonp"})}})}}}});
;define("common:widget/header/bar/bar.js",function(a){var e=a("common:widget/ui/account_forbidden/account_forbidden.js"),t=a("common:widget/ui/cookie/cookie.js"),n=a("common:widget/ui/dialog/dialog.js");$(function(){function a(){var a=t.get("CLOSE_CITY_TIP");null===a&&$(".city-tip-area").css("display","inline-block"),o(),s(),i(),u.attr("href",u.attr("href")+"?u="+encodeURIComponent(window.location.href)),p.attr("href",p.attr("href")+"&u="+encodeURIComponent(window.location.href))}function o(){C?($("body").on({touchstart:function(){this._isMove=!1},touchmove:function(){this._isMove=!0},touchend:function(a){this._isMove||setTimeout(function(){U.ucAreaBodyClickHandler(a)},200)}}),d.on({click:U.ucAreaPadClickHandler})):c.on({mouseenter:U.ucAreaEnterHandler,mouseleave:U.ucAreaLeaveHandler}),h.click(U.closeCityTip),l.click(U.logOutHandler)}function s(){var a=F.context("baid_uss_url");$.ajax(a,{dataType:"jsonp",success:function(){$.getJSON(m,{page:j},U.getUserHandler)},error:function(){$.getJSON(m,{page:j},U.getUserHandler)}})}function i(){var a=F.context("baidu_stoken_url");$.ajax(a,{dataType:"jsonp",jsonpCallback:"cb",success:function(){},error:function(){}})}var r=$("#j-ucLoginList"),c=$("#j-ucArea"),d=$("#j-uc-link-wrap"),u=$("#j-barLoginBtn"),l=$("#j-logout"),p=$("#j-barRegBtn"),f=$("#j-welcomeTag"),v=$("#j-ucOrderStatus"),h=$("#j-bubble-close"),m="/pclogin/main/userinfo",g="/uc/order/orderstatuscount",_=navigator.userAgent.toLowerCase(),C=_.match(/iPad/i)?!0:!1,j=F.context("page_name"),b=F.context("nuomi_base"),U={closeCityTip:function(){t.set("CLOSE_CITY_TIP","1","week"),$(".city-tip-area").css("display","none")},ucAreaEnterHandler:function(){$(this).addClass("hover")},ucAreaLeaveHandler:function(){$(this).removeClass("hover")},ucAreaPadClickHandler:function(a){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?(c.addClass("hover"),a.preventDefault()):(c.removeClass("hover"),a.preventDefault())},ucAreaBodyClickHandler:function(a){$(a.target).parents("#j-ucArea").length||(d.hasClass("clicked")&&d.removeClass("clicked"),c.removeClass("hover"))},getUserHandler:function(a){if(0==a.errno&&a.data.userInfo){if(r.addClass("has-login"),a.data.handout_giftcard&&1==a.data.handout_giftcard.needpopup){var o=a.data.handout_giftcard,s=(F.context("coupon_url"),['<p class="coupon-info">',"恭喜您获得<span>"+o.giftcard_number_per_user+"</span>张<span>"+o.money_per_giftcard+"元</span>"+o.giftcard_type,"</p>",'<p class="go-to-buy">快去团购吧！</p>','<div class="time-wrap">','<a class="j-dialog-btn" href="'+o.activity_url+'" target="_blank">查看规则</a>',"</div>"].join("")),i=n.splash({width:365,content:s,customClassName:"ui-activity-coupon",timeout:5e3,mask:{enable:!0,opacity:.25}});i.center()}if(2==a.data.userInfo.status)e.init();else{var c="Hi，";c+=a.data.userInfo.passUname?decodeURIComponent(a.data.userInfo.passUname):a.data.userInfo.passPhone?a.data.userInfo.passPhone.replace(/^(\d{3}).*(\d{4})$/g,"$1****$2"):a.data.userInfo.passEmail,f.html(c);var d=t.get("BAINUO_ORDER_STATUS_CLOSE");(!d||d.indexOf("a")<0)&&($.getJSON(g,U.getOrderStatusHandler),v.find("a").on("click",U.ucOrderStatusItemClickHandler))}}else{var u=a.errno,l=a.data,p=l.baiduUserInfo,h=l.otherBaiduUserInfo,m=l.nuomiUserInfo,_="";p&&(_=p.passUname?p.passUname:p.passEmail?p.passEmail:p.passPhone?p.passPhone:"");var C="";h&&(C=h.passUname?h.passUname:h.passEmail?h.passEmail:h.passPhone?h.passPhone:"");var j="";if(m&&(j=m.email?m.email:m.phone?m.phone:""),9600210==u){_&&(_="（"+_+"）");var b="您的百度帐号已经与其他的糯米账号绑定，下面的糯米账号无法登录。",S=['<div class="ui-passport-tip9600210">','<div class="title">'+b+"</div>",'<div class="text">'+j+"</div>","</div>"],k=600;n.alert({title:"提示",content:S.join(""),width:k}),U.userErrorHandler()}else if(9600208==u){var b="您的糯米账号已与下面的百度账号绑定,请使用该帐号登录！";C||(b="您的糯米账号已与其它的百度账号绑定,请使用该帐号登录！");var S=['<div class="ui-passport-tip9600210">','<div class="title">'+b+"</div>"];h.passPhone&&S.push('<div class="text">手机号：'+h.passPhone+"</div>"),h.passEmail&&S.push('<div class="text">邮箱：'+h.passEmail+"</div>"),h.passUname&&S.push('<div class="text">用户名：'+h.passUname+"</div>"),S.push("</div>");var k=500;n.alert({title:"提示",content:S.join(""),width:k,onok:function(){}}),U.userErrorHandler()}}},getOrderStatusHandler:function(a){if(0==a.errno){for(var e=!1,n=t.get("BAINUO_ORDER_STATUS_CLOSE"),o=["",a.data.soonexpireCount,a.data.uncommentCount,a.data.unpayCount,a.data.merchantReplyCount,a.data.usableHongbaoCount],s="abcdef",i=1;5>=i;i++)(null===n||n.indexOf(s.charAt(i))<0)&&o[i]>0&&(e=!0,v.find("#j-ucStatusLink-"+s.charAt(i)).prev("span").html(o[i]),v.find("#j-ucStatusLink-"+s.charAt(i)).parent().show());e===!0&&v.show()}},ucOrderStatusItemClickHandler:function(a){function e(a){var e=t.get("BAINUO_ORDER_STATUS_CLOSE");t.set("BAINUO_ORDER_STATUS_CLOSE",a+(null===e?"":e),"today")}function n(){if(v.is(":visible")){for(var a=!1,e="abcde",t=1;4>=t;t++)if(v.find("#j-ucStatusLink-"+e.charAt(t)).is(":visible")){a=!0;break}a||v.hide()}}a.target.parentNode.style.display="none",n(),"e"!=a.target.id.charAt(a.target.id.length-1)&&e(a.target.id.charAt(a.target.id.length-1))},logOutHandler:function(){var a=F.context("logout_nuomi");$.ajax(a,{dataType:"json",async:!1,success:function(a){var e=l.attr("href");if(0==a.errno){var t=a.data.BDUSS64;t&&(e+="&sid="+encodeURIComponent(t))}e+="&u="+encodeURIComponent(window.location.protocol+b),l.attr("href",e)}})},userErrorHandler:function(){var a=F.context("logout_nuomi");$.ajax(a,{dataType:"json",async:!1,success:function(a){var e=F.context("logout_baidu");if(0==a.errno){var t=a.data.BDUSS64;t&&(e+="&sid="+encodeURIComponent(t))}$.ajax(e,{dataType:"jsonp"})}})}};a()})});
;define("common:widget/ui/suggestion/suggestion.js",function(t,i,e){function n(t,i){this.options=$.extend({},s,i),this.$input=$(t),this._isShow=!1,this.init(),this.listHtmlCache={}}var s={delay:200,x:0,y:0,zIndex:50,width:"auto",isCatch:!0,idPrefix:"j-suggestion-",wrapTem:'<div class="suggestion-wrap" id="${id}" style="position:absolute;display:none;padding-bottom: 12px;"></div>',itemTem:'<a class="j-suggestion-item suggestion-item">${text}</a>',activeItemClass:"suggestion-item-active",className:"",url:"",formatRespons:function(t){return t},formatParam:function(t){return{key:encodeURIComponent(t),t:+new Date}},getData:function(t,i){var e=this;e.xhr&&e.xhr.abort(),e.xhr=$.get(this.url,this.formatParam(t),function(t){i(e.formatRespons(t))},"json")},renderItem:function(t){for(var i,e=this.itemTem,n=[],s=0,o=t.length;o>s;s++)i=t[s],n.push(e.replace(/\$\{([^\}]*)\}/g,function(t,e){return i[e]}));return n.join("")},onconfirm:function(){},onEnter:function(){},onShow:function(){},onHide:function(){},onDataEmpty:function(t){return t.sugObj.hide(),""},onActiveItem:function(){}};n.prototype={constructor:n,createSuggestionWrap:function(){this.$sugWrap=$(this.options.wrapTem.replace("${id}",this.createId())).appendTo("body"),""!==this.options.className&&this.$sugWrap.addClass(this.options.className),this.setPosition(),this.itemTem=this.options.itemTem},setPosition:function(){var t=this.$input,i=t.offset(),e=this.options.width,n=this.$sugWrap[0];this.top=i.top+t.innerHeight()+this.options.y,this.left=i.left+this.options.x,e="auto"===e?t.innerWidth():e,n.style.width=e+"px",n.style.top=this.top+"px",n.style.left=this.left+"px",n.style.zIndex=this.options.zIndex},createId:function(){return this.options.idPrefix+(+new Date).toString()},init:function(){this.createSuggestionWrap(),this.addHandle()},getValue:function(){return this.value},addHandle:function(){var t=this,i=t.$input;t.$input.on("keyup change keydown",function(e){if("keydown"!=e.type){var n=$.trim(i.val());if(""===n)return void t.hide();switch(e.keyCode){case 38:return t.show(),void t.moveActive("up");case 40:return t.show(),void t.moveActive("down");case 13:return t.hide(),e.preventDefault(),e.stopPropagation(),void(-1===t.activeIndex?t.options.onEnter({value:n}):t.options.onconfirm({index:t.activeIndex,target:t.$items[t.activeIndex]}))}t.valChange(n)}}),t.$sugWrap.on("click",".j-suggestion-item",function(i){var e,n=i.target,s=$(n);s.hasClass("j-suggestion-item")||(s=s.parents(".j-suggestion-item"),n=s.get(0),i.stopPropagation()),e=t.$items;for(var o=0,a=e.length;a>o&&e[o]!==n;o++);t.changeActive(o),t.options.onconfirm({index:o,target:n})}),$(document).on("click",function(){t.hide()}),$(window).on("resize",function(){t.setPosition()})},show:function(){this._isShow||this.options.onShow()===!1||(this.$sugWrap.show(),this.setPosition(),this._isShow=!0)},hide:function(){this._isShow&&this.options.onHide()!==!1&&(this.$sugWrap.hide(),this._isShow=!1)},isShow:function(){return this._isShow},moveActive:function(t){var i,e=this.$items,n=e.length;i="up"===t?this.activeIndex-1:this.activeIndex+1,0>i?i=n-1:i===n&&(i=0),this.changeActive(i)},changeActive:function(t){var i,e=this.$items;$(e[this.activeIndex]).removeClass(this.options.activeItemClass),(i=$(e[t])).addClass(this.options.activeItemClass),this.activeIndex=t,this.options.onActiveItem({target:i[0]})},valChange:function(t){var i,e=this;e.value=t,e.options.isCatch&&(i=e.listHtmlCache[t])?e.updateList(i):(clearTimeout(e.timeOutId),e.timeOutId=setTimeout(function(){e.options.getData(t,function(i){var n=e.options.renderItem(i);e.options.isCatch&&(e.listHtmlCache[t]=n),e.updateList(n)})},e.options.delay))},updateList:function(t){this.activeIndex=-1,(""!=t||(t=this.options.onDataEmpty({sugObj:this})))&&(this.$sugWrap.html(t),this.$items=this.$sugWrap.children(),this.show())}},e.exports=n});
;define("common:widget/ui/storage/storage.js",function(e,t,o){function n(){function e(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(n),o.body.appendChild(n),n.addBehavior("#default#userData"),n.load(r);var a=e.apply(c,t);return o.body.removeChild(n),a}}var t=window,o=document;if(!c){if(t.localStorage)c={setItem:function(e,o){t.localStorage.setItem(e,o)},getItem:function(e){return t.localStorage.getItem(e)},removeItem:function(e){t.localStorage.removeItem(e)},clear:function(){t.localStorage.clear()}};else if(o.documentElement.addBehavior){var n=o.createElement("div");c={setItem:e(function(e,t,o){e.setAttribute(t,o),e.save(r)}),getItem:e(function(e,t){return e.getAttribute(t)}),removeItem:e(function(e,t){e.removeAttribute(t),e.save(r)}),clear:e(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var o,n=0;o=t[n];n++)e.removeAttribute(o.name);e.save(r)})}}c.session=t.sessionStorage?{setItem:function(e,o){t.sessionStorage.setItem(e,o)},getItem:function(e){return t.sessionStorage.getItem(e)},removeItem:function(e){t.sessionStorage.removeItem(e)},clear:function(){t.sessionStorage.clear()}}:{setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){}};try{c.set(a,a),c.get(a)==a&&F.context(i,c),c.remove(a)}catch(s){}}}var r="localStorage",a="__storejs__",i="bnStorage",c=F.context(i);n(),o.exports=c});
;define("common:widget/header/sug/sug.js",function(n,e,t){function o(n){location.href=C+encodeURIComponent(n)+"&rid="+f}function s(n){location.href=C+encodeURIComponent(n)}function r(n){var e;n=encodeURIComponent(n),-1!==(e=$.inArray(n,w))&&w.splice(e,1),w.unshift(n),h.setItem(j,w.join("&"))}function i(n){var e,t=[],o=w,s=R;n=encodeURIComponent(n);for(var r=0,i=o.length;i>r;r++)e=o[r],0===e.indexOf(n)&&s-->0&&t.push({relword:decodeURIComponent(e),htmlEscapedWord:$("<div />").text(decodeURIComponent(e)).html(),urlencodedWord:e});return t}function a(n){for(var e,t=[],o=W,s=i(n),r=0,a=s.length;a>r;r++)e=s[r],t.push(o.replace(/\$\{([^\}]*)\}/g,function(n,t){return e[t]}));return t}function c(n){return decodeURIComponent($(n).find(".j-sug-word").html())}function u(){l=new p("#"+x,{delay:100,zIndex:101,url:v,className:"search-suggestion",itemTem:E,onconfirm:function(n){var e=c(n.target);r(e),o(e)},onEnter:function(n){r(n.value),s(n.value)},formatParam:function(n){return U=n,{kw:encodeURIComponent(n)}},formatRespons:function(n){return 0===n.errno&&n.data&&n.data.suglist?(f=n.data.recomwd_id,n.data.suglist):[]},onActiveItem:function(n){g.val(c(n.target))},renderItem:function(n){var e,t=E,o=[];o=a(U);for(var s=0,r=n.length;r>s;s++){e=n[s];var i=e.relword;e.htmlEscapedWord=$("<div />").text(i).html(),o.push(t.replace(/\$\{([^\}]*)\}/g,function(n,t){return e[t]}))}return 0===o.length&&l.hide(),o.join("")}})}function d(){$("#"+y).on("click",function(){var n=$.trim(g.val());""!==n&&(r(n),o(n))})}function m(){g=$("#"+x),u(x),d()}var g,l,f,p=n("common:widget/ui/suggestion/suggestion.js"),h=n("common:widget/ui/storage/storage.js"),v="/searchsug",j="searchHistory",I=h.getItem(j),w=I?I.split("&"):[],R=2,C=F.context("nuomi_base")+"/search?k=",U="",x="j-searchInput",y="j-search-btn",E=['<a class="j-suggestion-item suggestion-item" mon="element=sug">','<span class="j-sug-word">${htmlEscapedWord}</span>','<span class="sug-count">约<em class="count">${count}</em>单在线</span>',"</a>"].join(""),W=['<a class="j-suggestion-item suggestion-item history-item" mon="element=sugHistory">','<em class="history-word j-sug-word">${htmlEscapedWord}</em>','<span class="sug-count">搜索历史</span>',"</a>"].join("");t.exports={init:m}});
;define("common:widget/ui/placeholder/placeholder.js",function(s,e,t){var i={element:null,tipsNode:"data-placeholder",selClass:"input-sel",selClassText:""},l=function(){this.initialize.apply(this,arguments)};$.extend(l.prototype,{initialize:function(s){$.extend(this,i,s);var e=this,t=this.element;this.focusFlag=!1,t&&t.size()>0&&(t.each(function(){e._showTips($(this))}),this.bindEvent())},_showTips:function(s){this.focusFlag=!0,this._checkValue(s)?(s.addClass(this.selClass).val(s.attr(this.tipsNode)),s.get(0).style.cssText+=this.selClassText):(this.selClass&&s.removeClass(this.selClass),s[0].style.cssText=s[0].style.cssText.replace(this.selClassText,"","g"))},_hideTips:function(s){if(this.focusFlag=!1,this._checkValue(s)){var e=this.selClass,t=this.selClassText;e&&s.removeClass(e),s[0].style.cssText=s[0].style.cssText.replace(t,"","g"),s[0].value="",s[0].select()}},_checkValue:function(s){return""==$.trim(s.val())||s.val()==s.attr(this.tipsNode)},isEmpty:function(s){return _checkValue(s)},clear:function(){var s=this;this.element.each(function(){s._checkValue($(this))&&(this.value="")})},bindEvent:function(){var s=this;this.element.bind("focus",function(){s._hideTips($(this))}),this.element.bind("blur",function(){s._showTips($(this))})}}),t.exports=l});
;define("common:widget/header/header.js",function(e){{var a=e("common:widget/ui/cookie/cookie.js"),i=e("common:widget/header/sug/sug.js"),t=e("common:widget/ui/placeholder/placeholder.js");e("common:widget/ui/dialog/dialog.js")}$(function(){function e(){n(),i.init(),new t({element:v,selClass:"input-placeholder"})}function n(){_?(o&&(h.on({click:E.catgRowPadClickHandler}),s||g.on({click:E.catgPadClickHandler})),$(document).on({touchstart:function(){this._isMove=!1},touchmove:function(){this._isMove=!0},touchend:function(e){this._isMove||setTimeout(function(){E.catgRowBodyClickHandler(e),s||E.catgBodyClickHandler(e),E.visitedAreaBodyClickHandler(e)},200)}}),k.on("click",E.visitedAreaPadClickhandler)):(o&&(h.on({mouseenter:E.catgRowMouseEnterHandler,mouseleave:E.catgRowMouseLeaveHandler}),s||(m.on({mouseenter:E.catgMouseEnterHandler,mouseleave:E.catgMouseLeaveHandler}),C.on({mouseenter:E.navMouseEnterHandler,mouseleave:E.navMouseLeaveHandler}))),p.one({mouseenter:E.visitedAreaEnterhandler}),p.on({mouseleave:E.visitedAreaLeaveHandler})),p.on("click",".j-clearVisited",E.clearVisitedHandler),l.on("click",E.topSpreadCloseClickHandler),c.on("click",E.searchBtnClickHandler),d.on("submit",E.searchFormClickHandler)}var s=F.context("isIndex"),o=F.context("isHotCity"),r=$("#j-topSpread"),l=$("#j-topSpreadClose"),c=$("#j-searchBtn"),d=$("#j-searchForm"),v=$("#j-searchInput"),u=$("#j-input-hidden"),h=$(".j-catg-row"),m=$("#j-catg"),g=$("#j-catg-header"),f=$("#j-catg-list"),C=$("#j-nav-area"),p=$("#j-visitedArea"),k=$("#j-visitedArea-title"),H=$("#j-visitedContainer"),j="/pcindex/visited",w=$.browser.msie&&6==$.browser.version,M=navigator.userAgent.toLowerCase(),_=M.match(/iPad/i)?!0:!1,A="/mis/ad/ad?adarea_id=10,11,12,13,14,15,16,17",y=!1,E={catgRowMouseEnterHandler:function(){var e=this;if($(this).addClass("hover"),$(e).addClass("active"),"page=index"==$("body").attr("mon")&&!y){y=!0;var a={326:"10",345:"11",320:"12",330:"13",316:"14",642:"15",708:"16",955:"17"};$.getJSON(A,function(e){if(0===e.errno)for(var i in a){var t=e.data[a[i]];if(t.length>0){var n=$(".j-catg-row[catg-id='"+i+"']"),s=n.children(".subcatg-list").first();0==s.length&&(s=$('<div class="subcatg-list subcatg-no-link" mon="area=catgHover_'+i+'"></div>'),n.append(s));for(var o in t){var r=t[o];s.append('<a class="subcatg-ad" target="_blank" href="'+r.url+'" bn_box="catgAd&position" mon="element=adver_'+r.id+'&position=1"><img src="'+r.img+'" alt="'+r.title+'"/></a>')}}}})}},catgRowMouseLeaveHandler:function(){var e=this;$(this).removeClass("hover"),$(e).removeClass("active")},catgRowPadClickHandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?(E.catgRowMouseEnterHandler.call(this),$(this).siblings().each(function(e,a){$(a).removeClass("hover"),$(a).removeClass("active"),$(a).removeClass("clicked")})):E.catgRowMouseLeaveHandler.call(this)},catgRowBodyClickHandler:function(e){$(e.target).parents(".j-catg-row").length||(h.hasClass("clicked")&&h.removeClass("clicked"),h.each(function(e,a){var i=a;$(a).removeClass("hover"),$(i).removeClass("active")}))},catgMouseEnterHandler:function(){w?(m.addClass("hover"),f.show()):m.stop().animate({width:260},{duration:100,queue:"fx",complete:function(){f.show()}})},catgMouseLeaveHandler:function(){f.hide()},catgPadClickHandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?E.catgMouseEnterHandler.call(m[0]):f.hide()},catgBodyClickHandler:function(e){$(e.target).parents("#j-catg").length||(g.hasClass("clicked")&&g.removeClass("clicked"),f.hide())},navMouseEnterHandler:function(){m.clearQueue("short")},navMouseLeaveHandler:function(){w?(f.hide(),m.removeClass("hover")):f.hide(function(){m.stop().animate({width:211},{duration:100,queue:"short",complete:function(){f.hide()}}),setTimeout(function(){m.dequeue("short")},500)})},visitedAreaEnterhandler:function(){function e(){a("数据载入中...")}function a(e){var a=['<div class="loading">',e,"</div>"];H.html(a.join(""))}function i(e,a){var i=[],t=0;for(var n in e)if(e.hasOwnProperty(n)){var s=e[n],o="";0==t&&(o+="first"),i.push(['<a href="'+s.link+'" class="item '+o+'" mon="s='+a+"&element="+s.deal_id+"&position="+(t+1)+'&element_type=item" data-item-st="'+a+'" target="_blank">','<img src="'+s.tiny_image+'" width="120" height="74">','<div class="title-area">','<div class="title">'+s.min_title+"</div>",'<div class="price-area">','<span class="price">￥'+s.current_price/100+"</span>",'<span class="ori-price">￥'+s.market_price/100+"</span>","</div>","</div>","</a>"].join("")),t++}i.push(['<div class="visited-clear">','<a href="javascript:;" class="link j-clearVisited" mon="element=clear&element_type=nav">清空浏览记录</a>',"</div>"].join("")),H.html(i.join(""))}$(this).addClass("hover"),e(),$.getJSON(j,function(e){if(0==e.errno){var t=e.data.visitedDeal.detail,n=e.data.visitedDeal.s;t?i(t,n):a("暂无浏览记录")}else a(e.msg)})},visitedAreaLeaveHandler:function(){var e=this;$(e).removeClass("hover"),p.one({mouseenter:E.visitedAreaEnterhandler})},visitedAreaPadClickhandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?E.visitedAreaEnterhandler.apply(p[0]):p.removeClass("hover")},visitedAreaBodyClickHandler:function(e){function a(){k.hasClass("clicked")&&k.removeClass("clicked"),p.removeClass("hover")}var i=$(e.target).is("#j-visitedArea-title"),t=$(e.target).parents("#j-visitedContainer").length;t?setTimeout(function(){a()},500):i||a()},clearVisitedHandler:function(){function e(e){var a=['<div class="loading">',e,"</div>"];H.html(a.join(""))}a.set("visited","","-1"),a.set("visitedRight","","-1"),e("暂无浏览记录")},topSpreadCloseClickHandler:function(){r.slideUp(400,function(){r.remove()}),a.set("TOP_SPREAD_CLOSED","1","today")},searchBtnClickHandler:function(){var e=$.trim(v.val());e||v.val(v.data("placeholder"))},searchFormClickHandler:function(){v.val()!=v.attr("data-placeholder")&&u.remove()}};e()})});
;define("common:widget/ui/showtrack/showtrack.js",function(e,t,n){var i=e("common:widget/ui/cookie/cookie.js"),o=function(){this._BASEURL=F.context("nuomi_base")+"/show.gif",this._channel=i.get("channel"),this._channelContent=i.get("channel_content"),this._targetCity=i.get("areaCode"),this._daPage=F.context("da_page"),this._WAITTIME=5e3,this._INITTIME=2e3,this._MAXLEN=2050,this._$win=$(window),this._cacheDomObj={},this._cacheShowObj={},this._cacheItemObj={},this._$pageObj=null,this._showObjArrCache=null,this._slideDomCacheObj={},this._sid=i.get("SID");var e=F.context("sample_hit");this._sid&&e&&(this._sid+="|"+e)};o.prototype={_initContext:function(){var e=this,t=$("[bn_box]"),n=t.length,i={},o={};0>=n||(t.each(function(){var t=$(this);if(t.is(":visible")){var n=t.attr("bn_box"),a=t.find("[mon]").not(t.find("[bn_box]").find("[mon]")),h=a.length;h>0?a.each(function(){var t=$(this);if(t.is(":visible")){var a=e._getShowedElementValue("element=",t),h=n+"&"+a;i[h]=t,o[h]=!1,e._cacheItemObj.hasOwnProperty(h)||(e._cacheItemObj[h]=a)}}):"undefined"==typeof t.attr("bn_slide")&&(i[n]=t,o[n]=!1,e._cacheItemObj[n]=e._getShowedElementValue("element=",t)||"")}}),this._cacheDomObj=$.extend(i,this._cacheDomObj),this._cacheShowObj=$.extend(o,this._cacheShowObj))},_executeShowTrack:function(){var e=this,t=this._slideDomCacheObj,n=this._cacheShowObj;for(var i in n)n.hasOwnProperty(i)&&0==n[i]&&e._checkShowResult(e._cacheDomObj[i])&&(e._cacheShowObj[i]=!0,t[i]=e._cacheDomObj[i]);$.isEmptyObject(t)||(this._handleShowLogItem(t),this._slideDomCacheObj={})},_checkShowResult:function(e){var t=this,n=e.offset().top,i=e.outerHeight();return n+i<=t._$win.height()+t._$win.scrollTop()},_checkSlideShowResult:function(e){var t=this,n=e.offset().top,i=e.outerHeight();return n>=t._$win.scrollTop()&&n+i<=t._$win.height()+t._$win.scrollTop()},_handleShowLogItem:function(e){var t=this,n=0,i=[];for(var o in e)if(e.hasOwnProperty(o)){var a=[],h=e[o],s=h.closest("[bn_box]");h.attr("bn_box")&&(s=h),"undefined"!=typeof s.attr("data-index")?t._$pageObj=s:(n=t._getShowedElementValue("page_index=",h),!isNaN(n)&&n>0&&(s.attr("data-index",n),t._$pageObj=s));var c=s.attr("bn_box"),_=c,r=t._cacheItemObj[o],l=t._getShowedElementValue("s=",s);if(l=""!=l?l:t._getShowedElementValue("s=",h),c&&c.indexOf("&")>0){var d=c.split("&");_=d[0]}if(a.push("page_area:"+_),a.push("content:"+r),c.indexOf("position")>0){var f=t._getShowedElementValue("position=",h);if(!f){var b=h.closest('[mon*="position"]');f=b.length>0?t._getShowedElementValue("position=",b):s.find("[mon]").not(s.find("[bn_box]").find("[mon]")).index(h)+1}a.push("position:"+f)}l&&a.push("s:"+l),i.push(a)}this._sendShowTrackLog(i)},_sendShowTrackLog:function(e){function t(e){var i=n._BASEURL+"?channel="+n._channel+"&channel_content="+n._channelContent+"&target_city="+n._targetCity+"&client_type=PC_WEB&da_page="+n._daPage+"&r="+(new Date).getTime()+"&sid="+n._sid;if(null!=n._$pageObj){var a=n._$pageObj.attr("data-index");a>0&&(i=i+"&pageIndex="+a)}var h=i.length,s=n._formatShowListParams(e,h),c=s.show_list,_=s.offset,r=new Image;i=i+"&show_list="+c,$(r).load(function(){o>_&&t(_)}),r.src=i}var n=this,i=0,o=e.length-1;n._showObjArrCache=e,t(i)},_getShowedElementValue:function(e,t){for(var n=t.attr("mon"),i=n?n.split("&"):[],o=0,a=i.length,h="";a>o;o++)if(i[o].match(e)){var s=i[o].split("=");h=s[1];break}return h},_formatShowListParams:function(e,t){for(var n=this,i=[],o=n._showObjArrCache.length,a=e,h=t;o>a;a++){var s="["+n._showObjArrCache[a].join(",")+"]",c=s.length;if(h+c>n._MAXLEN)break;h+=c,i.push(s)}return{show_list:encodeURIComponent("["+i.join(",")+"]"),offset:a}},startShowTrack:function(){function e(){t._initContext(),t._executeShowTrack(),setTimeout(e,t._WAITTIME)}var t=this;setTimeout(e,t._INITTIME)},slideElementHandler:function(e){var t=this;if(e.is(":visible")&&"undefined"==typeof $(e).attr("bn_box")&&t._checkSlideShowResult(e)){var n=$(e).attr("bn_slide");$ele=0!=$(e).find("[mon]").first().length?$(e).find("[mon]").first():$(e),eleVal=t._getShowedElementValue("element=",$ele),key=n+"&"+eleVal,$(e).attr("bn_box",n),t._cacheDomObj[key]=$ele,t._cacheShowObj[key]=!0,t._cacheItemObj[key]=eleVal,t._slideDomCacheObj[key]=$ele}}},n.exports=new o});
;define("common:widget/ui/slider/slider.js",function(t,i,n){var e=t("common:widget/ui/showtrack/showtrack.js"),s=function(t,i){this.$container=$("string"==typeof t?"#"+t:t),this._options={autoScroll:{enable:!0,interval:3e3,direction:"left"},fx:{duration:500,type:"slide"},isLoop:!0,exposureLog:!1},this._curIndex=0,this._init(i)};s.prototype={_initOptions:function(t){$.extend(!0,this._options,t)},_init:function(t){this._initOptions(t),this.$items=this.$container.children(),this.len=this.$items.length,this.$container.css({position:"relative"}),this.$items.css({position:"absolute",left:-9999}).eq(this._curIndex).css({left:0})},on:function(t,i){return this["on"+t]=i,this},fire:function(t){var i=this["on"+t];return"function"==typeof i?(Array.prototype.shift.call(arguments),i.apply(this,arguments)):!0},start:function(){var t=this;this._options.autoScroll.enable&&(this._options.autoScroll.enabled=!0),clearTimeout(this.autoScrollTimeHandler),this.autoScrollTimeHandler=setTimeout(function(){t.slideOnce(t._options.autoScroll.direction)},this._options.autoScroll.interval)},stop:function(){this._options.autoScroll.enabled=!1,clearTimeout(this.autoScrollTimeHandler)},slideOnce:function(t){var i,n=this._curIndex;switch(t){case"left":i=n+1>this.len-1?0:n+1;break;case"right":i=0>n-1?this.len-1:n-1}this.slideTo(i,t)},slideTo:function(t,i){function n(){l.$container.dequeue("my")}function s(){2==f&&(l.fire("slide",t),l._options.fx.animating=!1,l._options.autoScroll.enabled&&l.start())}if(!this._options.fx.animating&&this._curIndex!=t){var o=this.$items.eq(this._curIndex),r=this.$items.eq(t);this._options.exposureLog&&(e.slideElementHandler(o),e.slideElementHandler(r)),i=i||(t>this._curIndex?"right":"left"),this._curIndex=t,this.fire("beforeslide",t);var l=this;if(this._options.fx.animating=!0,"fade"==this._options.fx.type){var a=[function(){o.fadeOut(600,n)},function(){r.css({left:0,display:"none"}).fadeIn(600,n)},function(){l.fire("slide",t),l._options.fx.animating=!1,l._options.autoScroll.enabled&&l.start()}];this.$container.queue("my",a),n()}else if("slide"==this._options.fx.type){var c=this.$container.width(),f=0;"left"==i?(o.css({left:0}).animate({left:-c},400,function(){f++,s()}),r.css({left:c}).animate({left:0},400,function(){f++,s()})):"right"==i&&(o.css({left:0}).animate({left:c},400,function(){f++,s()}),r.css({left:-c}).animate({left:0},400,function(){f++,s()}))}}},moveLeft:function(){this._options.fx.animating||this.slideOnce("right")},moveRight:function(){this._options.fx.animating||this.slideOnce("left")},isFirst:function(){return 0==this._curIndex?!0:!1},isLast:function(){return this._curIndex==this.len-1?!0:!1}},n.exports=s});
;define("common:widget/header/top-banner/top-banner.js",function(e){var o,t=e("common:widget/ui/slider/slider.js"),n=e("common:widget/ui/cookie/cookie.js"),a=$("body").attr("mon").split("=")[1];o="index"===a||"index_new"===a?5:4;var i=F.context("nuomi_base")+"/mis/ad/ad?adarea_id="+o;$(function(){function e(){$(".j-top-pointers").children().eq(0).addClass("active");var e=new t("j-top-spread-sliders",{autoScroll:{interval:5e3,enable:!0},fx:{duration:100,type:"fade"},exposureLog:!0});e.on("beforeslide",function(e){$(".j-top-pointers").children().removeClass("active").eq(e).addClass("active")}),e.start(),$("#j-top-spread-recomList").on({mouseenter:function(){e.stop()},mouseleave:function(){e.start()}}),$(".j-top-pointers").on("click",".top-pointer",function(){e.slideTo($(this).index())}),$(".j-top-pointer").on("mouseenter",function(){e.slideTo($(this).index())});var o=$(".j-top-pointers").children().length;1>=o&&$(".j-top-pointers").hide()}function a(){var e=0;e&&"1"==e||"page=city_list"!==$("body").attr("mon")&&"page=item_detail"!==$("body").attr("mon")&&$.ajax({url:i,dataType:"jsonp",jsonp:"jsonp_callback",success:r.refreshTopBannerAdHandler})}var r={refreshTopBannerAdHandler:function(t){if($("body").delegate("#j-topSpreadClose","click",function(){$("#j-topSpread").slideUp(500),n.set("TOP_SPREAD_CLOSED","1","today"),n.set("SHRINK_DROPPED_BANNER","1","today")}),0===t.errno){var a=t.data[o];if(a.length>0){$outerBox=$('<div class="w-top-spread" id="j-topSpread" mon="area=topBanner"></div>'),$middleBox=$('<div class="wrap"></div>'),$innerBox=$('<div class="top-recom-list" id="j-top-spread-recomList"></div>');var i=$('<ul class="clearfix top-sliders" id="j-top-spread-sliders"></ul>');$coinList=$('<div class="top-pointers j-top-pointers"></div>'),$closeButton=$('<a href="javascript:;" class="close" id="j-topSpreadClose"></a></a>');var r=0;for(var d in a){var s=a[d];++r;var p="bn_slide";1==a.length&&(p="bn_box"),i.append("<li "+p+'="top_banner&position" class="clearfix" style="background:url('+s.img1+') repeat 0 0;"><a href="'+s.url+'" target="_blank" mon="element=adver_'+s.id+"&position=adver_"+r+'&element_type=nav"><img src="'+s.img+'" width="980" height="80"></a></li>'),$coinList.append('<a href="javascript:;" class="top-pointer  j-top-pointer"></a>')}$innerBox.append(i),$innerBox.append($closeButton),$innerBox.append($coinList),$middleBox.append($innerBox);var l=a[0];if(F.context("isIndex")&&"1"==l.show_type){var c=$('<div class="dropped-banner-wrap"></div>'),u=$('<a class="background" href="'+l.url+'" target="_blank" style="background:url('+l.img3+') repeat 0 0;">'),m=$("<img>");m.addClass("dropped-banner").attr("src",l.img2),u.append(m),c.append(u);var v=$("<span class='shrink-btn'>");v.bind("click",function(){$outerBox.animate({height:89},500,function(){$outerBox.empty().append($middleBox),e()}),n.set("SHRINK_DROPPED_BANNER","1","today")}),c.append(v),$outerBox.append(c).css({height:"400px"}),$("body").prepend($outerBox),setTimeout(function(){$outerBox.animate({height:89},500,function(){$outerBox.empty().append($middleBox),e()})},5e3)}else $outerBox.append($middleBox),$("body").prepend($outerBox),e()}}}};a()})});
;define("common:widget/util/ejson.js",function(e,r,n){function t(e,r){var n=$.Deferred;n=n();var t=$.ajax(e).then(function(e){try{"string"===$.type(e)&&(e=$.parseJSON(e))}catch(t){return void n.reject({errno:1e3})}if(0===e.errno)return void n.resolve(e.data);var u=o[e.errno];return u&&u.length?($.each(u,function(r,n){n(e)}),void(r&&(e.catched=!0,n.reject(e)))):void n.reject(e)},function(e){n.reject({errno:1002,errnoInfo:e})}).always(function(){t=null}),u=n.promise();return u.abort=function(){t&&t.abort(),n.reject({errno:1001})},u}var o={},r={get:function(e,r,n){return r=$.extend({},r,{url:e+(e.indexOf("?")>-1?"&":"?")+"isajax=true",type:"GET"}),t(r,n)},post:function(e,r,n){return r=$.extend({isajax:!0},r,{url:e,type:"POST"}),t(r,n)},addErrorHandler:function(e,r){var n=o[e];n||(n=o[e]=[]),n.push(r)},reject:function(e){var r=$.Deferred;return r=r(),r.reject(e)},resolve:function(e){var r=$.Deferred;return r=r(),r.resolve(e)}};n.exports=r});
;define("common:widget/iot_header/sug.js",function(e,t,n){function o(){d.init(document.body,m),i()}function i(){var e,t=d.get("main-searcher");t.on("autocomplete",function(e){var t=$(this.main);t.removeClass("autocomplete-panel-show"),"move"===e.mode&&(e.suggestion.seg?(e.current>=0&&t.find("#autocomplate-list-"+e.current).hide(),t.addClass("autocomplete-panel-show"),t.find("#autocomplate-list-"+e.next).show()):t.find("#autocomplate-list-"+e.current).hide()),t.find("#j-input-hidden").val(this.get("rid"))}),t.on("show",function(t){c(t.main,t.suggestions),e=t.suggestions,$(this.main).addClass("autocomplate-show")}),t.on("autocompletebeforehide",function(e){e.isDefaultPrevented()||$(this.main).removeClass("autocomplate-show autocomplete-panel-show")}),$("#j-searchForm").on("submit",function(n){var o;$.trim(t.input.value).length?(null!=e&&$.each(e,function(e,n){return t.input.value===n.relword?(o=!0,!1):void 0}),o||t.input.value===t.input.getAttribute("data-placeholder")||$(this).find("#j-input-hidden").remove()):n.preventDefault(),$("#search-tieba").find(".n-textbox-autocomplete").hide()})}function a(){var e=d.get("main-searcher");e.on("selectClick",function(e){var t=e.value;location.href="https://gss0.bdstatic.com/search?k="+encodeURIComponent(t)+"&rid="+this.get("rid")})}function s(){var e=d.get("main-searcher");e.on("selectClick",function(e){var t=e.value;window.open("/search?k="+encodeURIComponent(t)+"&rid="+this.get("rid")+"&cid=7754")})}function c(e,t){function n(e,t,n){if(n){if(1>t)return void e.css({top:0});var a=(t-1)*o,s=(n/2+1)*o;return a+s>i?void e.css({bottom:12}):void e.css({top:a})}}var o=30,i=t.length*o;e.find(".autocomplete-panel .list").each(function(){var e=$(this),a=e.data("index"),s=e.closest(".panel-inner"),c=t[a].seg.length;n(s,a,c);var r=Math.ceil(c/2)*o+o;r>i&&(i=r)}),e.css({height:i})}e("common:widget/dep/moye/TextBox.js");var r=e("common:widget/dep/moye/plugin/TextBoxAutoComplete.js"),u=e("common:widget/util/ejson.js"),d=e("common:widget/dep/moye/main.js"),l=e("common:widget/dep/etpl/main.js");l.addFilter("encode",function(e){return encodeURIComponent(e)});var m={"main-searcher":{name:"k",type:"TextBox",plugins:[new r({template:l.compile($("#autocomplete-template").html()),datasource:function(e,t){return u.get("/searchsug",{data:{kw:e}}).then(function(e){return e&&e.suglist?(t.textbox.set("rid",e.recomwd_id),$.each(e.suglist,function(t,n){n.rid=e.recomwd_id}),e.suglist):[]})},adapter:{toList:function(e){return e},toInput:function(e){return e.relword}},setPosition:function(e){$('[data-ui-id="main-searcher"]');e=$(e),e.css({position:"absolute"})}})]}};n.exports={init:o,bind:a,bindTieba:s}});
;define("common:widget/iot_header/header.js",function(e){var i=e("common:widget/ui/cookie/cookie.js"),a=e("common:widget/ui/placeholder/placeholder.js"),t=(e("common:widget/ui/dialog/dialog.js"),e("common:widget/iot_header/sug.js")),s=e("common:widget/dep/moye/lib.js");$(function(){function e(){o(),n(),t.init(),t.bind(),new a({element:h,selClass:"input-placeholder"}),(10===s.browser.ie||/Trident\/7\./.test(navigator.userAgent))&&$("body").addClass("ie10")}function n(){var e=new Date("2015/4/29"),i=new Date("2015/5/4"),a=new Date("2015/5/11"),t=new Date("2015/5/18"),s="qrcode-51",n="qrcode-517",o="qrcode-discount",r=$("#j-go-top .img"),c=$(".right-erweima a"),d=$("#j-ucLoginList .img"),v="",h="";l>=e&&i>l?(v=s,h=".logo-area .img51"):l>=a&&t>l?(v=n,h=".logo-area .img517"):(v=o,h=".logo-area .img-discount"),$(h).show(),r.addClass(v),c.addClass(v),d.addClass(v),c.css("visibility","visible")}function o(){_&&(c&&(u.on({click:A.catgRowPadClickHandler}),r||m.on({click:A.catgPadClickHandler})),$(document).on({touchstart:function(){this._isMove=!1},touchmove:function(){this._isMove=!0},touchend:function(e){this._isMove||setTimeout(function(){A.catgRowBodyClickHandler(e),r||A.catgBodyClickHandler(e),A.visitedAreaBodyClickHandler(e)},200)}}),p.on("click",A.visitedAreaPadClickhandler)),v.on("click",A.topSpreadCloseClickHandler)}var r=F.context("isIndex"),c=F.context("isHotCity"),l=F.context("erweimaCurrentTime"),d=$("#j-topSpread"),v=$("#j-topSpreadClose"),h=($("#j-searchBtn"),$("#j-searchForm"),$("#j-searchInput")),u=($("#j-input-hidden"),$(".j-catg-row")),g=$("#j-catg"),m=g,C=$("#j-catg-list"),f=($("#j-nav-area"),$("#j-visitedArea")),p=$("#j-visitedArea-title"),k=$("#j-visitedContainer"),j="/pcindex/visited",w=$.browser.msie&&6==$.browser.version,H=navigator.userAgent.toLowerCase(),_=H.match(/iPad/i)?!0:!1,b="/mis/ad/ad?adarea_id=10,11,12,13,14,15,16,17",y=!1,A={catgRowMouseEnterHandler:function(){var e=this;if($(this).addClass("hover"),$(e).addClass("active"),"page=index"==$("body").attr("mon")&&!y){y=!0;var i={326:"10",345:"11",320:"12",330:"13",316:"14",642:"15",708:"16",955:"17"};$.getJSON(b,function(e){if(0===e.errno)for(var a in i){var t=e.data[i[a]];if(t.length>0){var s=$(".j-catg-row[catg-id='"+a+"']"),n=s.children(".subcatg-list").first();0==n.length&&(n=$('<div class="subcatg-list subcatg-no-link" mon="area=catgHover_'+a+'"></div>'),s.append(n));for(var o in t){var r=t[o];n.append('<a class="subcatg-ad" target="_blank" href="'+r.url+'" bn_box="catgAd&position" mon="element=adver_'+r.id+'&position=1"><img src="'+r.img+'" alt="'+r.title+'"/></a>')}}}})}},catgRowMouseLeaveHandler:function(){var e=this;$(this).removeClass("hover"),$(e).removeClass("active")},catgRowPadClickHandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?(A.catgRowMouseEnterHandler.call(this),$(this).siblings().each(function(e,i){$(i).removeClass("hover"),$(i).removeClass("active"),$(i).removeClass("clicked")})):A.catgRowMouseLeaveHandler.call(this)},catgRowBodyClickHandler:function(e){$(e.target).parents(".j-catg-row").length||(u.hasClass("clicked")&&u.removeClass("clicked"),u.each(function(e,i){var a=i;$(i).removeClass("hover"),$(a).removeClass("active")}))},catgMouseEnterHandler:function(){g.addClass("active"),C.show()},catgMouseLeaveHandler:function(){r||g.removeClass("active"),C.hide()},catgPadClickHandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?A.catgMouseEnterHandler.call(g[0]):C.hide()},catgBodyClickHandler:function(e){$(e.target).parents("#j-catg").length||(m.hasClass("clicked")&&m.removeClass("clicked"),C.hide())},navMouseEnterHandler:function(){g.clearQueue("short")},navMouseLeaveHandler:function(){w?(C.hide(),g.removeClass("hover")):C.hide(function(){g.stop().animate({width:211},{duration:100,queue:"short",complete:function(){C.hide()}}),setTimeout(function(){g.dequeue("short")},500)})},visitedAreaEnterhandler:function(){function e(){i("数据载入中...")}function i(e){var i=['<div class="loading">',e,"</div>"];k.html(i.join(""))}function a(e,i){var a=[],t=0;for(var s in e)if(e.hasOwnProperty(s)){var n=e[s],o="";0==t&&(o+="first"),a.push(['<a href="'+n.link+'" class="item '+o+'" mon="s='+i+"&element="+n.deal_id+"&position="+(t+1)+'&element_type=item" data-item-st="'+i+'" target="_blank">','<img src="'+n.tiny_image+'" width="120" height="74">','<div class="title-area">','<div class="title">'+n.min_title+"</div>",'<div class="price-area">','<span class="price">￥'+n.current_price/100+"</span>",'<span class="ori-price">￥'+n.market_price/100+"</span>","</div>","</div>","</a>"].join("")),t++}a.push(['<div class="visited-clear">','<a href="javascript:;" class="link j-clearVisited" mon="element=clear&element_type=nav">清空浏览记录</a>',"</div>"].join("")),k.html(a.join(""))}$(this).addClass("hover"),e(),$.getJSON(j,function(e){if(0==e.errno){var t=e.data.visitedDeal.detail,s=e.data.visitedDeal.s;t?a(t,s):i("暂无浏览记录")}else i(e.msg)})},visitedAreaLeaveHandler:function(){var e=this;$(e).removeClass("hover"),f.one({mouseenter:A.visitedAreaEnterhandler})},visitedAreaPadClickhandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?A.visitedAreaEnterhandler.apply(f[0]):f.removeClass("hover")},visitedAreaBodyClickHandler:function(e){function i(){p.hasClass("clicked")&&p.removeClass("clicked"),f.removeClass("hover")}var a=$(e.target).is("#j-visitedArea-title"),t=$(e.target).parents("#j-visitedContainer").length;t?setTimeout(function(){i()},500):a||i()},clearVisitedHandler:function(){function e(e){var i=['<div class="loading">',e,"</div>"];k.html(i.join(""))}i.set("visited","","-1"),i.set("visitedRight","","-1"),e("暂无浏览记录")},topSpreadCloseClickHandler:function(){d.slideUp(400,function(){d.remove()}),i.set("TOP_SPREAD_CLOSED","1","today")}};e()})});
;define("common:widget/iot_header/revision_sug.js",function(e,t,n){function o(){d.init(document.body,m),i()}function i(){var e,t=d.get("main-searcher");t.on("autocomplete",function(e){var t=$(this.main);t.removeClass("autocomplete-panel-show"),"move"===e.mode&&(e.suggestion.seg?(e.current>=0&&t.find("#autocomplate-list-"+e.current).hide(),t.addClass("autocomplete-panel-show"),t.find("#autocomplate-list-"+e.next).show()):t.find("#autocomplate-list-"+e.current).hide()),t.find("#j-input-hidden").val(this.get("rid"))}),t.on("show",function(t){r(t.main,t.suggestions),e=t.suggestions,$(this.main).addClass("autocomplate-show")}),t.on("autocompletebeforehide",function(e){e.isDefaultPrevented()||$(this.main).removeClass("autocomplate-show autocomplete-panel-show")}),$("#j-searchForm").on("submit",function(n){var o;if($.trim(t.input.value).length)null!=e&&$.each(e,function(e,n){return t.input.value===n.relword?(o=!0,!1):void 0}),o||t.input.value===t.input.getAttribute("data-placeholder")||$(this).find("#j-input-hidden").remove();else{var i=$("#j-input-city-fix").val();location.href="https:///"+i+".nuomi.com/all",n.preventDefault()}$("#search-tieba").find(".n-textbox-autocomplete").hide()})}function a(){var e=d.get("main-searcher");e.on("selectClick",function(e){var t=e.value;location.href="https://gss0.bdstatic.com/search?k="+encodeURIComponent(t)+"&rid="+this.get("rid")})}function s(){var e=d.get("main-searcher");e.on("selectClick",function(e){var t=e.value;window.open("/search?k="+encodeURIComponent(t)+"&rid="+this.get("rid")+"&cid=7754")})}function r(e,t){function n(e,t,n){if(n){if(1>t)return void e.css({top:0});var a=(t-1)*o,s=(n/2+1)*o;return a+s>i?void e.css({bottom:12}):void e.css({top:a})}}var o=30,i=t.length*o;e.find(".autocomplete-panel .list").each(function(){var e=$(this),a=e.data("index"),s=e.closest(".panel-inner"),r=t[a].seg.length;n(s,a,r);var c=Math.ceil(r/2)*o+o;c>i&&(i=c)})}e("common:widget/dep/moye/TextBox.js");var c=e("common:widget/dep/moye/plugin/TextBoxAutoComplete.js"),u=e("common:widget/util/ejson.js"),d=e("common:widget/dep/moye/main.js"),l=e("common:widget/dep/etpl/main.js");l.addFilter("encode",function(e){return encodeURIComponent(e)});var m={"main-searcher":{name:"k",type:"TextBox",plugins:[new c({template:l.compile($("#autocomplete-template").html()),datasource:function(e,t){return u.get("/searchsug",{data:{kw:e}}).then(function(e){return e&&e.suglist?(t.textbox.set("rid",e.recomwd_id),$.each(e.suglist,function(t,n){n.rid=e.recomwd_id}),e.suglist):[]})},adapter:{toList:function(e){return e},toInput:function(e){return e.relword}},setPosition:function(e){$('[data-ui-id="main-searcher"]');e=$(e),e.css({position:"absolute"})}})]}};n.exports={init:o,bind:a,bindTieba:s}});
;define("common:widget/iot_header/revision_header.js",function(e){var i=e("common:widget/ui/cookie/cookie.js"),a=e("common:widget/ui/placeholder/placeholder.js"),t=(e("common:widget/ui/dialog/dialog.js"),e("common:widget/iot_header/revision_sug.js")),s=e("common:widget/dep/moye/lib.js");$(function(){function e(){o(),n(),t.init(),t.bind(),new a({element:h,selClass:"input-placeholder"}),(10===s.browser.ie||/Trident\/7\./.test(navigator.userAgent))&&$("body").addClass("ie10")}function n(){var e=new Date("2015/4/29"),i=new Date("2015/5/4"),a=new Date("2015/5/11"),t=new Date("2015/5/18"),s="qrcode-51",n="qrcode-517",o="qrcode-discount",r=$("#j-go-top .img"),c=$(".right-erweima a"),d=$("#j-ucLoginList .img"),v="",h="";l>=e&&i>l?(v=s,h=".logo-area .img51"):l>=a&&t>l?(v=n,h=".logo-area .img517"):(v=o,h=".logo-area .img-discount"),$(h).show(),r.addClass(v),c.addClass(v),d.addClass(v),c.css("visibility","visible")}function o(){_&&(c&&(u.on({click:A.catgRowPadClickHandler}),r||m.on({click:A.catgPadClickHandler})),$(document).on({touchstart:function(){this._isMove=!1},touchmove:function(){this._isMove=!0},touchend:function(e){this._isMove||setTimeout(function(){A.catgRowBodyClickHandler(e),r||A.catgBodyClickHandler(e),A.visitedAreaBodyClickHandler(e)},200)}}),p.on("click",A.visitedAreaPadClickhandler)),v.on("click",A.topSpreadCloseClickHandler)}var r=F.context("isIndex"),c=F.context("isHotCity"),l=F.context("erweimaCurrentTime"),d=$("#j-topSpread"),v=$("#j-topSpreadClose"),h=($("#j-searchBtn"),$("#j-searchForm"),$("#j-searchInput")),u=($("#j-input-hidden"),$(".j-catg-row")),g=$("#j-catg"),m=g,C=$("#j-catg-list"),f=($("#j-nav-area"),$("#j-visitedArea")),p=$("#j-visitedArea-title"),k=$("#j-visitedContainer"),j="/pcindex/visited",w=$.browser.msie&&6==$.browser.version,H=navigator.userAgent.toLowerCase(),_=H.match(/iPad/i)?!0:!1,b="/mis/ad/ad?adarea_id=10,11,12,13,14,15,16,17",y=!1,A={catgRowMouseEnterHandler:function(){var e=this;if($(this).addClass("hover"),$(e).addClass("active"),"page=index"==$("body").attr("mon")&&!y){y=!0;var i={326:"10",345:"11",320:"12",330:"13",316:"14",642:"15",708:"16",955:"17"};$.getJSON(b,function(e){if(0===e.errno)for(var a in i){var t=e.data[i[a]];if(t.length>0){var s=$(".j-catg-row[catg-id='"+a+"']"),n=s.children(".subcatg-list").first();0==n.length&&(n=$('<div class="subcatg-list subcatg-no-link" mon="area=catgHover_'+a+'"></div>'),s.append(n));for(var o in t){var r=t[o];n.append('<a class="subcatg-ad" target="_blank" href="'+r.url+'" bn_box="catgAd&position" mon="element=adver_'+r.id+'&position=1"><img src="'+r.img+'" alt="'+r.title+'"/></a>')}}}})}},catgRowMouseLeaveHandler:function(){var e=this;$(this).removeClass("hover"),$(e).removeClass("active")},catgRowPadClickHandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?(A.catgRowMouseEnterHandler.call(this),$(this).siblings().each(function(e,i){$(i).removeClass("hover"),$(i).removeClass("active"),$(i).removeClass("clicked")})):A.catgRowMouseLeaveHandler.call(this)},catgRowBodyClickHandler:function(e){$(e.target).parents(".j-catg-row").length||(u.hasClass("clicked")&&u.removeClass("clicked"),u.each(function(e,i){var a=i;$(i).removeClass("hover"),$(a).removeClass("active")}))},catgMouseEnterHandler:function(){g.addClass("active"),C.show()},catgMouseLeaveHandler:function(){r||g.removeClass("active"),C.hide()},catgPadClickHandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?A.catgMouseEnterHandler.call(g[0]):C.hide()},catgBodyClickHandler:function(e){$(e.target).parents("#j-catg").length||(m.hasClass("clicked")&&m.removeClass("clicked"),C.hide())},navMouseEnterHandler:function(){g.clearQueue("short")},navMouseLeaveHandler:function(){w?(C.hide(),g.removeClass("hover")):C.hide(function(){g.stop().animate({width:211},{duration:100,queue:"short",complete:function(){C.hide()}}),setTimeout(function(){g.dequeue("short")},500)})},visitedAreaEnterhandler:function(){function e(){i("数据载入中...")}function i(e){var i=['<div class="loading">',e,"</div>"];k.html(i.join(""))}function a(e,i){var a=[],t=0;for(var s in e)if(e.hasOwnProperty(s)){var n=e[s],o="";0==t&&(o+="first"),a.push(['<a href="'+n.link+'" class="item '+o+'" mon="s='+i+"&element="+n.deal_id+"&position="+(t+1)+'&element_type=item" data-item-st="'+i+'" target="_blank">','<img src="'+n.tiny_image+'" width="120" height="74">','<div class="title-area">','<div class="title">'+n.min_title+"</div>",'<div class="price-area">','<span class="price">￥'+n.current_price/100+"</span>",'<span class="ori-price">￥'+n.market_price/100+"</span>","</div>","</div>","</a>"].join("")),t++}a.push(['<div class="visited-clear">','<a href="javascript:;" class="link j-clearVisited" mon="element=clear&element_type=nav">清空浏览记录</a>',"</div>"].join("")),k.html(a.join(""))}$(this).addClass("hover"),e(),$.getJSON(j,function(e){if(0==e.errno){var t=e.data.visitedDeal.detail,s=e.data.visitedDeal.s;t?a(t,s):i("暂无浏览记录")}else i(e.msg)})},visitedAreaLeaveHandler:function(){var e=this;$(e).removeClass("hover"),f.one({mouseenter:A.visitedAreaEnterhandler})},visitedAreaPadClickhandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?A.visitedAreaEnterhandler.apply(f[0]):f.removeClass("hover")},visitedAreaBodyClickHandler:function(e){function i(){p.hasClass("clicked")&&p.removeClass("clicked"),f.removeClass("hover")}var a=$(e.target).is("#j-visitedArea-title"),t=$(e.target).parents("#j-visitedContainer").length;t?setTimeout(function(){i()},500):a||i()},clearVisitedHandler:function(){function e(e){var i=['<div class="loading">',e,"</div>"];k.html(i.join(""))}i.set("visited","","-1"),i.set("visitedRight","","-1"),e("暂无浏览记录")},topSpreadCloseClickHandler:function(){d.slideUp(400,function(){d.remove()}),i.set("TOP_SPREAD_CLOSED","1","today")}};e()})});
;define("common:widget/lib/webuploader/webuploader.js",function(e,t,n){!function(e,t){var i,r={},o=function(e,t){var n,i,r;if("string"==typeof e)return u(e);for(n=[],i=e.length,r=0;i>r;r++)n.push(u(e[r]));return t.apply(null,n)},a=function(e,t,n){2===arguments.length&&(n=t,t=null),o(t||[],function(){s(e,n,arguments)})},s=function(e,t,n){var i,a={exports:t};"function"==typeof t&&(n.length||(n=[o,a.exports,a]),i=t.apply(null,n),void 0!==i&&(a.exports=i)),r[e]=a.exports},u=function(t){var n=r[t]||e[t];if(!n)throw new Error("`"+t+"` is undefined");return n},c=function(e){var t,n,i,o,a,s;s=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in r)if(n=e,r.hasOwnProperty(t)){for(i=t.split("/"),a=s(i.pop());o=s(i.shift());)n[o]=n[o]||{},n=n[o];n[a]=r[t]}},l=t(e,a,o);c(l),"object"==typeof n&&"object"==typeof n.exports?n.exports=l:"function"==typeof define&&define.amd?define("common:widget/lib/webuploader.js","exports"):(i=e.WebUploader,e.WebUploader=l,e.WebUploader.noConflict=function(){e.WebUploader=i})}(window,function(e,t,n){return t("dollar-third",[],function(){return e.jQuery||e.Zepto}),t("dollar",["dollar-third"],function(e){return e}),t("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&"function"==typeof e.then}}}),t("promise",["promise-third"],function(e){return e}),t("base",["dollar","promise"],function(t,n){function i(e){return function(){return s.apply(e,arguments)}}function r(e,t){return function(){return e.apply(t,arguments)}}function o(e){var t;return Object.create?Object.create(e):(t=function(){},t.prototype=e,new t)}var a=function(){},s=Function.call;return{version:"0.1.2",$:t,Deferred:n.Deferred,isPromise:n.isPromise,when:n.when,browser:function(e){var t={},n=e.match(/WebKit\/([\d.]+)/),i=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),r=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),o=e.match(/Firefox\/([\d.]+)/),a=e.match(/Safari\/([\d.]+)/),s=e.match(/OPR\/([\d.]+)/);return n&&(t.webkit=parseFloat(n[1])),i&&(t.chrome=parseFloat(i[1])),r&&(t.ie=parseFloat(r[1])),o&&(t.firefox=parseFloat(o[1])),a&&(t.safari=parseFloat(a[1])),s&&(t.opera=parseFloat(s[1])),t}(navigator.userAgent),os:function(e){var t={},n=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),i=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return n&&(t.android=parseFloat(n[1])),i&&(t.ios=parseFloat(i[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(e,n,i){var r;return"function"==typeof n?(r=n,n=null):r=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return e.apply(this,arguments)},t.extend(!0,r,e,i||{}),r.__super__=e.prototype,r.prototype=o(e.prototype),n&&t.extend(!0,r.prototype,n),r},noop:a,bindFn:r,log:function(){return e.console?r(console.log,console):a}(),nextTick:function(){return function(e){setTimeout(e,1)}}(),slice:i([].slice),guid:function(){var e=0;return function(t){for(var n=(+new Date).toString(32),i=0;5>i;i++)n+=Math.floor(65535*Math.random()).toString(32);return(t||"wu_")+n+(e++).toString(32)}}(),formatSize:function(e,t,n){var i;for(n=n||["B","K","M","G","TB"];(i=n.shift())&&e>1024;)e/=1024;return("B"===i?e:e.toFixed(t||2))+i}}}),t("mediator",["base"],function(e){function t(e,t,n,i){return o.grep(e,function(e){return!(!e||t&&e.e!==t||n&&e.cb!==n&&e.cb._cb!==n||i&&e.ctx!==i)})}function n(e,t,n){o.each((e||"").split(s),function(e,i){n(i,t)})}function i(e,t){for(var n,i=!1,r=-1,o=e.length;++r<o;)if(n=e[r],n.cb.apply(n.ctx2,t)===!1){i=!0;break}return!i}var r,o=e.$,a=[].slice,s=/\s+/;return r={on:function(e,t,i){var r,o=this;return t?(r=this._events||(this._events=[]),n(e,t,function(e,t){var n={e:e};n.cb=t,n.ctx=i,n.ctx2=i||o,n.id=r.length,r.push(n)}),this):this},once:function(e,t,i){var r=this;return t?(n(e,t,function(e,t){var n=function(){return r.off(e,n),t.apply(i||r,arguments)};n._cb=t,r.on(e,n,i)}),r):r},off:function(e,i,r){var a=this._events;return a?e||i||r?(n(e,i,function(e,n){o.each(t(a,e,n,r),function(){delete a[this.id]})}),this):(this._events=[],this):this},trigger:function(e){var n,r,o;return this._events&&e?(n=a.call(arguments,1),r=t(this._events,e),o=t(this._events,"all"),i(r,n)&&i(o,arguments)):this}},o.extend({installTo:function(e){return o.extend(e,r)}},r)}),t("uploader",["base","mediator"],function(e,t){function n(e){this.options=i.extend(!0,{},n.options,e),this._init(this.options)}var i=e.$;return n.options={},t.installTo(n.prototype),i.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",getDimension:"get-dimension",addButton:"add-btn",getRuntimeType:"get-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){n.prototype[e]=function(){return this.request(t,arguments)}}),i.extend(n.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var n=this.options;return arguments.length>1?void(i.isPlainObject(t)&&i.isPlainObject(n[e])?i.extend(n[e],t):n[e]=t):e?n[e]:n},getStats:function(){var e=this.request("get-stats");return{successNum:e.numOfSuccess,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue}},trigger:function(e){var n=[].slice.call(arguments,1),r=this.options,o="on"+e.substring(0,1).toUpperCase()+e.substring(1);return t.trigger.apply(this,arguments)===!1||i.isFunction(r[o])&&r[o].apply(this,n)===!1||i.isFunction(this[o])&&this[o].apply(this,n)===!1||t.trigger.apply(t,[this,e].concat(n))===!1?!1:!0},request:e.noop}),e.create=n.create=function(e){return new n(e)},e.Uploader=n,n}),t("runtime/runtime",["base","mediator"],function(e,t){function n(t){this.options=i.extend({container:document.body},t),this.uid=e.guid("rt_")}var i=e.$,r={},o=function(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null};return i.extend(n.prototype,{getContainer:function(){var e,t,n=this.options;return this._container?this._container:(e=i(n.container||document.body),t=i(document.createElement("div")),t.attr("id","rt_"+this.uid),t.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),e.append(t),e.addClass("webuploader-container"),this._container=t,t)},init:e.noop,exec:e.noop,destroy:function(){this._container&&this._container.parentNode.removeChild(this.__container),this.off()}}),n.orders="html5,flash",n.addRuntime=function(e,t){r[e]=t},n.hasRuntime=function(e){return!!(e?r[e]:o(r))},n.create=function(e,t){var a,s;if(t=t||n.orders,i.each(t.split(/\s*,\s*/g),function(){return r[this]?(a=this,!1):void 0}),a=a||o(r),!a)throw new Error("Runtime Error");return s=new r[a](e)},t.installTo(n.prototype),n}),t("runtime/client",["base","mediator","runtime/runtime"],function(e,t,n){function i(t,i){var o,a=e.Deferred();this.uid=e.guid("client_"),this.runtimeReady=function(e){return a.done(e)},this.connectRuntime=function(t,s){if(o)throw new Error("already connected!");return a.done(s),"string"==typeof t&&r.get(t)&&(o=r.get(t)),o=o||r.get(null,i),o?(e.$.extend(o.options,t),o.__promise.then(a.resolve),o.__client++):(o=n.create(t,t.runtimeOrder),o.__promise=a.promise(),o.once("ready",a.resolve),o.init(),r.add(o),o.__client=1),i&&(o.__standalone=i),o},this.getRuntime=function(){return o},this.disconnectRuntime=function(){o&&(o.__client--,o.__client<=0&&(r.remove(o),delete o.__promise,o.destroy()),o=null)},this.exec=function(){if(o){var n=e.slice(arguments);return t&&n.unshift(t),o.exec.apply(this,n)}},this.getRuid=function(){return o&&o.uid},this.destroy=function(e){return function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var r;return r=function(){var e={};return{add:function(t){e[t.uid]=t},get:function(t,n){var i;if(t)return e[t];for(i in e)if(!n||!e[i].__standalone)return e[i];return null},remove:function(t){delete e[t.uid]}}}(),t.installTo(i.prototype),i}),t("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){function i(e){e=this.options=r.extend({},i.options,e),e.container=r(e.container),e.container.length&&n.call(this,"DragAndDrop")}var r=e.$;return i.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})},destroy:function(){this.disconnectRuntime()}}),t.installTo(i.prototype),i}),t("widgets/widget",["base","uploader"],function(e,t){function n(e){if(!e)return!1;var t=e.length,n=r.type(e);return 1===e.nodeType&&t?!0:"array"===n||"function"!==n&&"string"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){this.owner=e,this.options=e.options}var r=e.$,o=t.prototype._init,a={},s=[];return r.extend(i.prototype,{init:e.noop,invoke:function(e,t){var n=this.responseMap;return n&&e in n&&n[e]in this&&r.isFunction(this[n[e]])?this[n[e]].apply(this,t):a},request:function(){return this.owner.request.apply(this.owner,arguments)}}),r.extend(t.prototype,{_init:function(){var e=this,t=e._widgets=[];return r.each(s,function(n,i){t.push(new i(e))}),o.apply(e,arguments)},request:function(t,i,r){var o,s,u,c,l=0,f=this._widgets,d=f.length,h=[],p=[];for(i=n(i)?i:[i];d>l;l++)o=f[l],s=o.invoke(t,i),s!==a&&(e.isPromise(s)?p.push(s):h.push(s));return r||p.length?(u=e.when.apply(e,p),c=u.pipe?"pipe":"then",u[c](function(){var t=e.Deferred(),n=arguments;return setTimeout(function(){t.resolve.apply(t,n)},1),t.promise()})[c](r||e.noop)):h[0]}}),t.register=i.register=function(t,n){var o,a={init:"init"};return 1===arguments.length?(n=t,n.responseMap=a):n.responseMap=r.extend(a,t),o=e.inherits(i,n),s.push(o),o},i}),t("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(e,t,n){var i=e.$;return t.options.dnd="",t.register({init:function(t){if(t.dnd&&"html5"===this.request("predict-runtime-type")){var r,o=this,a=e.Deferred(),s=i.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept});return r=new n(s),r.once("ready",a.resolve),r.on("drop",function(e){o.request("add-file",[e])}),r.on("accept",function(e){return o.owner.trigger("dndAccept",e)}),r.init(),a.promise()}}})}),t("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){function i(e){e=this.options=r.extend({},e),e.container=r(e.container||document.body),n.call(this,"FilePaste")}var r=e.$;return e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})},destroy:function(){this.exec("destroy"),this.disconnectRuntime(),this.off()}}),t.installTo(i.prototype),i}),t("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(e,t,n){var i=e.$;return t.register({init:function(t){if(t.paste&&"html5"===this.request("predict-runtime-type")){var r,o=this,a=e.Deferred(),s=i.extend({},{container:t.paste,accept:t.accept});return r=new n(s),r.once("ready",a.resolve),r.on("paste",function(e){o.owner.request("add-file",[e])}),r.init(),a.promise()}}})}),t("lib/blob",["base","runtime/client"],function(e,t){function n(e,n){var i=this;i.source=n,i.ruid=e,t.call(i,"Blob"),this.uid=n.uid||this.uid,this.type=n.type||"",this.size=n.size||0,e&&i.connectRuntime(e)}return e.inherits(t,{constructor:n,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),n}),t("lib/file",["base","lib/blob"],function(e,t){function n(e,n){var o;t.apply(this,arguments),this.name=n.name||"untitled"+i++,o=r.exec(n.name)?RegExp.$1.toLowerCase():"",!o&&this.type&&(o=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(this.type)?RegExp.$1.toLowerCase():"",this.name+="."+o),!this.type&&~"jpg,jpeg,png,gif,bmp".indexOf(o)&&(this.type="image/"+("jpg"===o?"jpeg":o)),this.ext=o,this.lastModifiedDate=n.lastModifiedDate||(new Date).toLocaleString()}var i=1,r=/\.([^.]+)$/;return e.inherits(t,n)}),t("lib/filepicker",["base","runtime/client","lib/file"],function(t,n,i){function r(e){if(e=this.options=o.extend({},r.options,e),e.container=o(e.id),!e.container.length)throw new Error("按钮指定错误");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=o(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),n.call(this,"FilePicker",!0)}var o=t.$;return r.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},t.inherits(n,{constructor:r,init:function(){var t=this,n=t.options,r=n.button;r.addClass("webuploader-pick"),t.on("all",function(e){var n;switch(e){case"mouseenter":r.addClass("webuploader-pick-hover");break;case"mouseleave":r.removeClass("webuploader-pick-hover");break;case"change":n=t.exec("getFiles"),t.trigger("select",o.map(n,function(e){return new i(t.getRuid(),e)}))}}),t.connectRuntime(n,function(){t.refresh(),t.exec("init",n),t.trigger("ready")}),o(e).on("resize",function(){t.refresh()})},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t.outerWidth?t.outerWidth():t.width(),i=t.outerHeight?t.outerHeight():t.height(),r=t.offset();n&&i&&e.css({bottom:"auto",right:"auto",width:n+"px",height:i+"px"}).offset(r)},enable:function(){var e=this.options.button;e.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){this.runtime&&(this.exec("destroy"),this.disconnectRuntime())}}),r}),t("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(e,t,n){var i=e.$;return i.extend(t.options,{pick:null,accept:null}),t.register({"add-btn":"addButton",refresh:"refresh",disable:"disable",enable:"enable"},{init:function(e){return this.pickers=[],e.pick&&this.addButton(e.pick)},refresh:function(){i.each(this.pickers,function(){this.refresh()})},addButton:function(t){var r,o,a,s=this,u=s.options,c=u.accept;if(t)return a=e.Deferred(),i.isPlainObject(t)||(t={id:t}),r=i.extend({},t,{accept:i.isPlainObject(c)?[c]:c,swf:u.swf,runtimeOrder:u.runtimeOrder}),o=new n(r),o.once("ready",a.resolve),o.on("select",function(e){s.owner.request("add-file",[e])}),o.init(),this.pickers.push(o),a.promise()},disable:function(){i.each(this.pickers,function(){this.disable()})},enable:function(){i.each(this.pickers,function(){this.enable()})}})}),t("lib/image",["base","runtime/client","lib/blob"],function(e,t,n){function i(e){this.options=r.extend({},i.options,e),t.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var r=e.$;return i.options={quality:90,crop:!1,preserveHeaders:!0,allowMagnify:!0},e.inherits(t,{constructor:i,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var t=e.slice(arguments);return this.exec.apply(this,["resize"].concat(t))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){var t=this.exec("getAsBlob",e);return new n(this.getRuid(),t)}}),i}),t("widgets/image",["base","uploader","lib/image","widgets/widget"],function(e,t,n){var i,r=e.$;return i=function(e){var t=0,n=[],i=function(){for(var i;n.length&&e>t;)i=n.shift(),t+=i[0],i[1]()};return function(e,r,o){n.push([r,o]),e.once("destroy",function(){t-=r,setTimeout(i,1)}),setTimeout(i,1)}}(5242880),r.extend(t.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),t.register({"make-thumb":"makeThumb","before-send-file":"compressImage"},{makeThumb:function(e,t,o,a){var s,u;return e=this.request("get-file",e),e.type.match(/^image/)?(s=r.extend({},this.options.thumb),r.isPlainObject(o)&&(s=r.extend(s,o),o=null),o=o||s.width,a=a||s.height,u=new n(s),u.once("load",function(){e._info=e._info||u.info(),e._meta=e._meta||u.meta(),u.resize(o,a)}),u.once("complete",function(){t(!1,u.getAsDataUrl(s.type)),u.destroy()}),u.once("error",function(){t(!0),u.destroy()}),void i(u,e.source.size,function(){e._info&&u.info(e._info),e._meta&&u.meta(e._meta),u.loadFromBlob(e.source)})):void t(!0)},compressImage:function(t){var i,o,a=this.options.compress||this.options.resize,s=a&&a.compressSize||307200;return t=this.request("get-file",t),!a||!~"image/jpeg,image/jpg".indexOf(t.type)||t.size<s||t._compressed?void 0:(a=r.extend({},a),o=e.Deferred(),i=new n(a),o.always(function(){i.destroy(),i=null}),i.once("error",o.reject),i.once("load",function(){t._info=t._info||i.info(),t._meta=t._meta||i.meta(),i.resize(a.width,a.height)}),i.once("complete",function(){var e,n;try{e=i.getAsBlob(a.type),n=t.size,e.size<n&&(t.source=e,t.size=e.size,t.trigger("resize",e.size,n)),t._compressed=!0,o.resolve()}catch(r){o.resolve()}}),t._info&&i.info(t._info),t._meta&&i.meta(t._meta),i.loadFromBlob(t.source),o.promise())}})}),t("file",["base","mediator"],function(e,t){function n(){return o+a++}function i(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application",this.lastModifiedDate=e.lastModifiedDate||1*new Date,this.id=n(),this.ext=s.exec(this.name)?RegExp.$1:"",this.statusText="",u[this.id]=i.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(i.Status.ERROR,e)})}var r=e.$,o="WU_FILE_",a=0,s=/\.([^.]+)$/,u={};return r.extend(i.prototype,{setStatus:function(e,t){var n=u[this.id];"undefined"!=typeof t&&(this.statusText=t),e!==n&&(u[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return u[this.id]},getSource:function(){return this.source},destory:function(){delete u[this.id]}}),t.installTo(i.prototype),i.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},i}),t("queue",["base","mediator","file"],function(e,t,n){function i(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0},this._queue=[],this._map={}}var r=e.$,o=n.Status;return r.extend(i.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return"string"!=typeof e?e:this._map[e]},fetch:function(e){var t,n,i=this._queue.length;for(e=e||o.QUEUED,t=0;i>t;t++)if(n=this._queue[t],e===n.getStatus())return n;return null},sort:function(e){"function"==typeof e&&this._queue.sort(e)},getFiles:function(){for(var e,t=[].slice.call(arguments,0),n=[],i=0,o=this._queue.length;o>i;i++)e=this._queue[i],(!t.length||~r.inArray(e.getStatus(),t))&&n.push(e);return n},_fileAdded:function(e){var t=this,n=this._map[e.id];n||(this._map[e.id]=e,e.on("statuschange",function(e,n){t._onFileStatusChange(e,n)})),e.setStatus(o.QUEUED)},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case o.PROGRESS:n.numOfProgress--;break;case o.QUEUED:n.numOfQueue--;break;case o.ERROR:n.numOfUploadFailed--;break;case o.INVALID:n.numOfInvalid--}switch(e){case o.QUEUED:n.numOfQueue++;break;case o.PROGRESS:n.numOfProgress++;break;case o.ERROR:n.numOfUploadFailed++;break;case o.COMPLETE:n.numOfSuccess++;break;case o.CANCELLED:n.numOfCancel++;break;case o.INVALID:n.numOfInvalid++}}}),t.installTo(i.prototype),i}),t("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(e,t,n,i,r,o){var a=e.$,s=/\.\w+$/,u=i.Status;return t.register({"sort-files":"sortFiles","add-file":"addFiles","get-file":"getFile","fetch-file":"fetchFile","get-stats":"getStats","get-files":"getFiles","remove-file":"removeFile",retry:"retry",reset:"reset","accept-file":"acceptFile"},{init:function(t){var i,r,s,u,c,l,f,d=this;if(a.isPlainObject(t.accept)&&(t.accept=[t.accept]),t.accept){for(c=[],s=0,r=t.accept.length;r>s;s++)u=t.accept[s].extensions,u&&c.push(u);c.length&&(l="\\."+c.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),d.accept=new RegExp(l,"i")}return d.queue=new n,d.stats=d.queue.stats,"html5"===this.request("predict-runtime-type")?(i=e.Deferred(),f=new o("Placeholder"),f.connectRuntime({runtimeOrder:"html5"},function(){d._ruid=f.getRuid(),i.resolve()}),i.promise()):void 0},_wrapFile:function(e){if(!(e instanceof i)){if(!(e instanceof r)){if(!this._ruid)throw new Error("Can't add external files.");e=new r(this._ruid,e)}e=new i(e)}return e},acceptFile:function(e){var t=!e||e.size<6||this.accept&&s.exec(e.name)&&!this.accept.test(e.name);return!t},_addFile:function(e){var t=this;if(t.acceptFile(e)&&(e=t._wrapFile(e),t.owner.trigger("beforeFileQueued",e)))return t.queue.append(e),t.owner.trigger("fileQueued",e),e},getFile:function(e){return this.queue.getFile(e)},addFiles:function(e){var t=this;e.length||(e=[e]),e=a.map(e,function(e){return t._addFile(e)}),t.owner.trigger("filesQueued",e),t.options.auto&&t.request("start-upload")},getStats:function(){return this.stats},removeFile:function(e){var t=this;e=e.id?e:t.queue.getFile(e),e.setStatus(u.CANCELLED),t.owner.trigger("fileDequeued",e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n,i,r,o=this;if(e)return e=e.id?e:o.queue.getFile(e),e.setStatus(u.QUEUED),void(t||o.request("start-upload"));for(n=o.queue.getFiles(u.ERROR),i=0,r=n.length;r>i;i++)e=n[i],e.setStatus(u.QUEUED);o.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.queue=new n,this.stats=this.queue.stats}})}),t("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,t){return e.support=function(){return t.hasRuntime.apply(t,arguments)},e.register({"predict-runtime-type":"predictRuntmeType"},{init:function(){if(!this.predictRuntmeType())throw Error("Runtime Error")},predictRuntmeType:function(){var e,n,i=this.options.runtimeOrder||t.orders,r=this.type;if(!r)for(i=i.split(/\s*,\s*/g),e=0,n=i.length;n>e;e++)if(t.hasRuntime(i[e])){this.type=r=i[e];break}return r}})}),t("lib/transport",["base","runtime/client","mediator"],function(e,t,n){function i(e){var n=this;e=n.options=r.extend(!0,{},i.options,e||{}),t.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var r=e.$;return i.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},r.extend(i.prototype,{appendBlob:function(e,t,n){var i=this,r=i.options;i.getRuid()&&i.disconnectRuntime(),i.connectRuntime(t.ruid,function(){i.exec("init")}),i._blob=t,r.fileVal=e||r.fileVal,r.filename=n||r.filename},append:function(e,t){"object"==typeof e?r.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){"object"==typeof e?r.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;t&&(clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t))}}),n.installTo(i.prototype),i}),t("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(e,t,n,i){function r(e,t){for(var n,i=[],r=e.source,o=r.size,a=t?Math.ceil(o/t):1,s=0,u=0;a>u;)n=Math.min(t,o-s),i.push({file:e,start:s,end:t?s+n:o,total:o,chunks:a,chunk:u++}),s+=n;return e.blocks=i.concat(),e.remaning=i.length,{file:e,has:function(){return!!i.length},fetch:function(){return i.shift()}}}var o=e.$,a=e.isPromise,s=n.Status;o.extend(t.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:null}),t.register({"start-upload":"start","stop-upload":"stop","skip-file":"skipFile","is-in-progress":"isInProgress"},{init:function(){var t=this.owner;this.runing=!1,this.pool=[],this.pending=[],this.remaning=0,this.__tick=e.bindFn(this._tick,this),t.on("uploadComplete",function(e){e.blocks&&o.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},start:function(){var t=this;o.each(t.request("get-files",s.INVALID),function(){t.request("remove-file",this)}),t.runing||(t.runing=!0,o.each(t.pool,function(e,n){var i=n.file;i.getStatus()===s.INTERRUPT&&(i.setStatus(s.PROGRESS),t._trigged=!1,n.transport&&n.transport.send())}),t._trigged=!1,t.owner.trigger("startUpload"),e.nextTick(t.__tick))},stop:function(e){var t=this;t.runing!==!1&&(t.runing=!1,e&&o.each(t.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(s.INTERRUPT)}),t.owner.trigger("stopUpload"))},isInProgress:function(){return!!this.runing},getStats:function(){return this.request("get-stats")},skipFile:function(e,t){e=this.request("get-file",e),e.setStatus(t||s.COMPLETE),e.skipped=!0,e.blocks&&o.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var t,n,i=this,r=i.options;return i._promise?i._promise.always(i.__tick):void(i.pool.length<r.threads&&(n=i._nextBlock())?(i._trigged=!1,t=function(t){i._promise=null,t&&t.file&&i._startSend(t),e.nextTick(i.__tick)},i._promise=a(n)?n.always(t):t(n)):i.remaning||i.getStats().numOfQueue||(i.runing=!1,i._trigged||e.nextTick(function(){i.owner.trigger("uploadFinished")}),i._trigged=!0))},_nextBlock:function(){var e,t,n=this,i=n._act,o=n.options;return i&&i.has()&&i.file.getStatus()===s.PROGRESS?(o.prepareNextFile&&!n.pending.length&&n._prepareNextFile(),i.fetch()):n.runing?(!n.pending.length&&n.getStats().numOfQueue&&n._prepareNextFile(),e=n.pending.shift(),t=function(e){return e?(i=r(e,o.chunked?o.chunkSize:0),n._act=i,i.fetch()):null},a(e)?e[e.pipe?"pipe":"then"](t):t(e)):void 0},_prepareNextFile:function(){var e,t=this,n=t.request("fetch-file"),i=t.pending;n&&(e=t.request("before-send-file",n,function(){return n.getStatus()===s.QUEUED?(t.owner.trigger("uploadStart",n),n.setStatus(s.PROGRESS),n):t._finishFile(n)}),e.done(function(){var t=o.inArray(e,i);~t&&i.splice(t,1,n)}),e.fail(function(e){n.setStatus(s.ERROR,e),t.owner.trigger("uploadError",n,e),t.owner.trigger("uploadComplete",n)}),i.push(e))},_popBlock:function(e){var t=o.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(t){var n,i=this,r=t.file;i.pool.push(t),i.remaning++,t.blob=1===t.chunks?r.source:r.source.slice(t.start,t.end),n=i.request("before-send",t,function(){r.getStatus()===s.PROGRESS?i._doSend(t):(i._popBlock(t),e.nextTick(i.__tick))}),n.fail(function(){1===r.remaning?i._finishFile(r).always(function(){t.percentage=1,i._popBlock(t),i.owner.trigger("uploadComplete",r),e.nextTick(i.__tick)}):(t.percentage=1,i._popBlock(t),e.nextTick(i.__tick))})},_doSend:function(t){var n,r,a=this,u=a.owner,c=a.options,l=t.file,f=new i(c),d=o.extend({},c.formData),h=o.extend({},c.headers);t.transport=f,f.on("destroy",function(){delete t.transport,a._popBlock(t),e.nextTick(a.__tick)}),f.on("progress",function(e){var n=0,i=0;n=t.percentage=e,t.chunks>1&&(o.each(l.blocks,function(e,t){i+=(t.percentage||0)*(t.end-t.start)}),n=i/l.size),u.trigger("uploadProgress",l,n||0)}),n=function(e){var n;return r=f.getResponseAsJson()||{},r._raw=f.getResponse(),n=function(t){e=t},u.trigger("uploadAccept",t,r,n)||(e=e||"server"),e},f.on("error",function(e,i){t.retried=t.retried||0,t.chunks>1&&~"http,abort".indexOf(e)&&t.retried<c.chunkRetry?(t.retried++,f.send()):(i||"server"!==e||(e=n(e)),l.setStatus(s.ERROR,e),u.trigger("uploadError",l,e),u.trigger("uploadComplete",l))}),f.on("load",function(){var e;return(e=n())?void f.trigger("error",e,!0):void(1===l.remaning?a._finishFile(l,r):f.destroy())}),d=o.extend(d,{id:l.id,name:l.name,type:l.type,lastModifiedDate:l.lastModifiedDate,size:l.size}),t.chunks>1&&o.extend(d,{chunks:t.chunks,chunk:t.chunk}),u.trigger("uploadBeforeSend",t,d,h),f.appendBlob(c.fileVal,t.blob,l.name),f.append(d),f.setRequestHeader(h),f.send()},_finishFile:function(e,t,n){var i=this.owner;return i.request("after-send-file",arguments,function(){e.setStatus(s.COMPLETE),i.trigger("uploadSuccess",e,t,n)}).fail(function(t){e.getStatus()===s.PROGRESS&&e.setStatus(s.ERROR,t),i.trigger("uploadError",e,t)}).always(function(){i.trigger("uploadComplete",e)})}})}),t("widgets/validator",["base","uploader","file","widgets/widget"],function(e,t,n){var i,r=e.$,o={};return i={addValidator:function(e,t){o[e]=t},removeValidator:function(e){delete o[e]}},t.register({init:function(){var e=this;r.each(o,function(){this.call(e.owner)})}}),i.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,i=t.fileNumLimit>>0,r=!0;i&&(e.on("beforeFileQueued",function(e){return n>=i&&r&&(r=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",i,e),setTimeout(function(){r=!0},1)),n>=i?!1:!0}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("uploadFinished",function(){n=0}))}),i.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,i=t.fileSizeLimit>>0,r=!0;i&&(e.on("beforeFileQueued",function(e){var t=n+e.size>i;return t&&r&&(r=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",i,e),setTimeout(function(){r=!0},1)),t?!1:!0}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("uploadFinished",function(){n=0}))}),i.addValidator("fileSingleSizeLimit",function(){var e=this,t=e.options,i=t.fileSingleSizeLimit;i&&e.on("beforeFileQueued",function(e){return e.size>i?(e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",e),!1):void 0})}),i.addValidator("duplicate",function(){function e(e){for(var t,n=0,i=0,r=e.length;r>i;i++)t=e.charCodeAt(i),n=t+(n<<6)+(n<<16)-n;return n}var t=this,n=t.options,i={};n.duplicate||(t.on("beforeFileQueued",function(t){var n=t.__hash||(t.__hash=e(t.name+t.size+t.lastModifiedDate));return i[n]?(this.trigger("error","F_DUPLICATE",t),!1):void 0}),t.on("fileQueued",function(e){var t=e.__hash;t&&(i[t]=!0)}),t.on("fileDequeued",function(e){var t=e.__hash;t&&delete i[t]}))}),i}),t("runtime/compbase",[],function(){function e(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}return e}),t("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,i){function r(){var e={},i=this,r=this.destory;n.apply(i,arguments),i.type=o,i.exec=function(n,r){var o,s=this,u=s.uid,c=t.slice(arguments,2);return a[n]&&(o=e[u]=e[u]||new a[n](s,i),o[r])?o[r].apply(o,c):void 0},i.destory=function(){return r&&r.apply(this,arguments)}}var o="html5",a={};return t.inherits(n,{constructor:r,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),r.register=function(e,n){var r=a[e]=t.inherits(i,n);return r},e.Blob&&e.FileReader&&e.DataView&&n.addRuntime(o,r),r}),t("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var i=this.owner.source,r=i.slice||i.webkitSlice||i.mozSlice;return i=r.call(i,e,n),new t(this.getRuid(),i)}})}),t("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(e,t,n){var i=e.$,r="webuploader-dnd-";return t.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this),this.dragOverHandler=e.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this),this.dropHandler=e.bindFn(this._dropHandler,this),this.dndOver=!1,t.on("dragenter",this.dragEnterHandler),t.on("dragover",this.dragOverHandler),t.on("dragleave",this.dragLeaveHandler),t.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(i(document).on("dragover",this.dragOverHandler),i(document).on("drop",this.dropHandler))
},_dragEnterHandler:function(e){var t,n=this,i=n._denied||!1;return e=e.originalEvent||e,n.dndOver||(n.dndOver=!0,t=e.dataTransfer.items,t&&t.length&&(n._denied=i=!n.trigger("accept",t)),n.elem.addClass(r+"over"),n.elem[i?"addClass":"removeClass"](r+"denied")),e.dataTransfer.dropEffect=i?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return t&&!i.contains(t,e.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e),!1)},_dragLeaveHandler:function(){var e,t=this;return e=function(){t.dndOver=!1,t.elem.removeClass(r+"over "+r+"denied")},clearTimeout(t._leaveTimer),t._leaveTimer=setTimeout(e,100),!1},_dropHandler:function(e){var t=this,o=t.getRuid(),a=t.elem.parent().get(0);return a&&!i.contains(a,e.currentTarget)?!1:(t._getTansferFiles(e,function(e){t.trigger("drop",i.map(e,function(e){return new n(o,e)}))}),t.dndOver=!1,t.elem.removeClass(r+"over"),!1)},_getTansferFiles:function(t,n){var i,r,o,a,s,u,c,l,f=[],d=[];for(t=t.originalEvent||t,o=t.dataTransfer,i=o.items,r=o.files,l=!(!i||!i[0].webkitGetAsEntry),u=0,c=r.length;c>u;u++)a=r[u],s=i&&i[u],l&&s.webkitGetAsEntry().isDirectory?d.push(this._traverseDirectoryTree(s.webkitGetAsEntry(),f)):f.push(a);e.when.apply(e,d).done(function(){f.length&&n(f)})},_traverseDirectoryTree:function(t,n){var i=e.Deferred(),r=this;return t.isFile?t.file(function(e){n.push(e),i.resolve()}):t.isDirectory&&t.createReader().readEntries(function(t){var o,a=t.length,s=[],u=[];for(o=0;a>o;o++)s.push(r._traverseDirectoryTree(t[o],u));e.when.apply(e,s).then(function(){n.push.apply(n,u),i.resolve()},i.reject)}),i.promise()},destroy:function(){var e=this.elem;e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragEnterHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(i(document).off("dragover",this.dragOverHandler),i(document).off("drop",this.dropHandler))}})}),t("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(e,t,n){return t.register("FilePaste",{init:function(){var t,n,i,r,o=this.options,a=this.elem=o.container,s=".*";if(o.accept){for(t=[],n=0,i=o.accept.length;i>n;n++)r=o.accept[n].mimeTypes,r&&t.push(r);t.length&&(s=t.join(","),s=s.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=s=new RegExp(s,"i"),this.hander=e.bindFn(this._pasteHander,this),a.on("paste",this.hander)},_pasteHander:function(e){var t,i,r,o,a,s=[],u=this.getRuid();for(e=e.originalEvent||e,t=e.clipboardData.items,o=0,a=t.length;a>o;o++)i=t[o],"file"===i.kind&&(r=i.getAsFile())&&s.push(new n(u,r));s.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",s))},destroy:function(){this.elem.off("paste",this.hander)}})}),t("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(){var e,t,i,r,o=this.getRuntime().getContainer(),a=this,s=a.owner,u=a.options,c=n(document.createElement("label")),l=n(document.createElement("input"));if(l.attr("type","file"),l.attr("name",u.name),l.addClass("webuploader-element-invisible"),c.on("click",function(){l.trigger("click")}),c.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),u.multiple&&l.attr("multiple","multiple"),u.accept&&u.accept.length>0){for(e=[],t=0,i=u.accept.length;i>t;t++)e.push(u.accept[t].mimeTypes);l.attr("accept",e.join(","))}o.append(l),o.append(c),r=function(e){s.trigger(e.type)},l.on("change",function(e){var t,i=arguments.callee;a.files=e.target.files,t=this.cloneNode(!0),this.parentNode.replaceChild(t,this),l.off(),l=n(t).on("change",i).on("mouseenter mouseleave",r),s.trigger("change")}),c.on("mouseenter mouseleave",r)},getFiles:function(){return this.files},destroy:function(){}})}),t("runtime/html5/util",["base"],function(t){var n=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL,i=t.noop,r=i;return n&&(i=function(){return n.createObjectURL.apply(n,arguments)},r=function(){return n.revokeObjectURL.apply(n,arguments)}),{createObjectURL:i,revokeObjectURL:r,dataURL2Blob:function(e){var t,n,i,r,o,a;for(a=e.split(","),t=~a[0].indexOf("base64")?atob(a[1]):decodeURIComponent(a[1]),i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return o=a[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(i,o)},dataURL2ArrayBuffer:function(e){var t,n,i,r;for(r=e.split(","),t=~r[0].indexOf("base64")?atob(r[1]):decodeURIComponent(r[1]),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n.buffer},arrayBufferToBlob:function(t,n){var i,r=e.BlobBuilder||e.WebKitBlobBuilder;return r?(i=new r,i.append(t),i.getBlob(n)):new Blob([t],n?{type:n}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),t("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var t;return t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,i=new FileReader;i.onload=function(){t(!1,n._parse(this.result)),i=i.onload=i.onerror=null},i.onerror=function(e){t(e.message),i=i.onload=i.onerror=null},e=e.slice(0,n.maxMetaDataSize),i.readAsArrayBuffer(e.getSource())},_parse:function(e,n){if(!(e.byteLength<6)){var i,r,o,a,s=new DataView(e),u=2,c=s.byteLength-4,l=u,f={};if(65496===s.getUint16(0)){for(;c>u&&(i=s.getUint16(u),i>=65504&&65519>=i||65534===i)&&(r=s.getUint16(u+2)+2,!(u+r>s.byteLength));){if(o=t.parsers[i],!n&&o)for(a=0;a<o.length;a+=1)o[a].call(t,s,u,r,f);u+=r,l=u}l>6&&(f.imageHead=e.slice?e.slice(2,l):new Uint8Array(e).subarray(2,l))}return f}},updateImageHead:function(e,t){var n,i,r,o=this._parse(e,!0);return r=2,o.imageHead&&(r=2+o.imageHead.byteLength),i=e.slice?e.slice(r):new Uint8Array(e).subarray(r),n=new Uint8Array(t.byteLength+2+i.byteLength),n[0]=255,n[1]=216,n.set(new Uint8Array(t),2),n.set(new Uint8Array(i),t.byteLength+2),n.buffer}},e.parseMeta=function(){return t.parse.apply(t,arguments)},e.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),t("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(e,t){var n={};return n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},n.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(t,i,r,o,a,s){var u,c,l,f,d,h,p=n.exifTagTypes[o];if(!p)return void e.log("Invalid Exif data: Invalid tag type.");if(u=p.size*a,c=u>4?i+t.getUint32(r+8,s):r+8,c+u>t.byteLength)return void e.log("Invalid Exif data: Invalid data offset.");if(1===a)return p.getValue(t,c,s);for(l=[],f=0;a>f;f+=1)l[f]=p.getValue(t,c+f*p.size,s);if(p.ascii){for(d="",f=0;f<l.length&&(h=l[f],"\x00"!==h);f+=1)d+=h;return d}return l},n.parseExifTag=function(e,t,i,r,o){var a=e.getUint16(i,r);o.exif[a]=n.getExifValue(e,t,i,e.getUint16(i+2,r),e.getUint32(i+4,r),r)},n.parseExifTags=function(t,n,i,r,o){var a,s,u;if(i+6>t.byteLength)return void e.log("Invalid Exif data: Invalid directory offset.");if(a=t.getUint16(i,r),s=i+2+12*a,s+4>t.byteLength)return void e.log("Invalid Exif data: Invalid directory size.");for(u=0;a>u;u+=1)this.parseExifTag(t,n,i+2+12*u,r,o);return t.getUint32(s,r)},n.parseExifData=function(t,i,r,o){var a,s,u=i+10;if(1165519206===t.getUint32(i+4)){if(u+8>t.byteLength)return void e.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(i+8))return void e.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(u)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void e.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(u+2,a))return void e.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(u+4,a),o.exif=new n.ExifMap,s=n.parseExifTags(t,u,u+s,a,o)}},t.parsers[65505].push(n.parseExifData),n}),t("runtime/html5/jpegencoder",[],function(){function e(e){function t(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;64>n;n++){var i=E((t[n]*e+50)/100);1>i?i=1:i>255&&(i=255),k[P[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;64>o;o++){var a=E((r[o]*e+50)/100);1>a?a=1:a>255&&(a=255),F[P[o]]=a}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],u=0,c=0;8>c;c++)for(var l=0;8>l;l++)S[u]=1/(k[P[u]]*s[c]*s[l]*8),T[u]=1/(F[P[u]]*s[c]*s[l]*8),u++}function n(e,t){for(var n=0,i=0,r=new Array,o=1;16>=o;o++){for(var a=1;a<=e[o];a++)r[t[i]]=[],r[t[i]][0]=n,r[t[i]][1]=o,i++,n++;n*=2}return r}function i(){_=n(z,$),y=n(Q,G),w=n(N,V),x=n(J,W)}function r(){for(var e=1,t=2,n=1;15>=n;n++){for(var i=e;t>i;i++)A[32767+i]=n,D[32767+i]=[],D[32767+i][1]=n,D[32767+i][0]=i;for(var r=-(t-1);-e>=r;r++)A[32767+r]=n,D[32767+r]=[],D[32767+r][1]=n,D[32767+r][0]=t-1+r;e<<=1,t<<=1}}function o(){for(var e=0;256>e;e++)B[e]=19595*e,B[e+256>>0]=38470*e,B[e+512>>0]=7471*e+32768,B[e+768>>0]=-11059*e,B[e+1024>>0]=-21709*e,B[e+1280>>0]=32768*e+8421375,B[e+1536>>0]=-27439*e,B[e+1792>>0]=-5329*e}function a(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(I|=1<<q),n--,q--,0>q&&(255==I?(s(255),s(0)):s(I),q=7,I=0)}function s(e){C.push(M[e])}function u(e){s(e>>8&255),s(255&e)}function c(e,t){var n,i,r,o,a,s,u,c,l,f=0,d=8,h=64;for(l=0;d>l;++l){n=e[f],i=e[f+1],r=e[f+2],o=e[f+3],a=e[f+4],s=e[f+5],u=e[f+6],c=e[f+7];var p=n+c,g=n-c,m=i+u,v=i-u,b=r+s,_=r-s,y=o+a,w=o-a,x=p+y,R=p-y,E=m+b,k=m-b;e[f]=x+E,e[f+4]=x-E;var F=.707106781*(k+R);e[f+2]=R+F,e[f+6]=R-F,x=w+_,E=_+v,k=v+g;var S=.382683433*(x-k),T=.5411961*x+S,D=1.306562965*k+S,A=.707106781*E,U=g+A,C=g-A;e[f+5]=C+T,e[f+3]=C-T,e[f+1]=U+D,e[f+7]=U-D,f+=8}for(f=0,l=0;d>l;++l){n=e[f],i=e[f+8],r=e[f+16],o=e[f+24],a=e[f+32],s=e[f+40],u=e[f+48],c=e[f+56];var I=n+c,q=n-c,L=i+u,H=i-u,j=r+s,M=r-s,B=o+a,P=o-a,z=I+B,$=I-B,N=L+j,V=L-j;e[f]=z+N,e[f+32]=z-N;var Q=.707106781*(V+$);e[f+16]=$+Q,e[f+48]=$-Q,z=P+M,N=M+H,V=H+q;var G=.382683433*(z-V),J=.5411961*z+G,W=1.306562965*V+G,X=.707106781*N,K=q+X,Z=q-X;e[f+40]=Z+J,e[f+24]=Z-J,e[f+8]=K+W,e[f+56]=K-W,f++}var Y;for(l=0;h>l;++l)Y=e[l]*t[l],O[l]=Y>0?Y+.5|0:Y-.5|0;return O}function l(){u(65504),u(16),s(74),s(70),s(73),s(70),s(0),s(1),s(1),s(0),u(1),u(1),s(0),s(0)}function f(e,t){u(65472),u(17),s(8),u(t),u(e),s(3),s(1),s(17),s(0),s(2),s(17),s(1),s(3),s(17),s(1)}function d(){u(65499),u(132),s(0);for(var e=0;64>e;e++)s(k[e]);s(1);for(var t=0;64>t;t++)s(F[t])}function h(){u(65476),u(418),s(0);for(var e=0;16>e;e++)s(z[e+1]);for(var t=0;11>=t;t++)s($[t]);s(16);for(var n=0;16>n;n++)s(N[n+1]);for(var i=0;161>=i;i++)s(V[i]);s(1);for(var r=0;16>r;r++)s(Q[r+1]);for(var o=0;11>=o;o++)s(G[o]);s(17);for(var a=0;16>a;a++)s(J[a+1]);for(var c=0;161>=c;c++)s(W[c])}function p(){u(65498),u(12),s(3),s(1),s(0),s(2),s(17),s(3),s(17),s(0),s(63),s(0)}function g(e,t,n,i,r){for(var o,s=r[0],u=r[240],l=16,f=63,d=64,h=c(e,t),p=0;d>p;++p)U[P[p]]=h[p];var g=U[0]-n;n=U[0],0==g?a(i[0]):(o=32767+g,a(i[A[o]]),a(D[o]));for(var m=63;m>0&&0==U[m];m--);if(0==m)return a(s),n;for(var v,b=1;m>=b;){for(var _=b;0==U[b]&&m>=b;++b);var y=b-_;if(y>=l){v=y>>4;for(var w=1;v>=w;++w)a(u);y=15&y}o=32767+U[b],a(r[(y<<4)+A[o]]),a(D[o]),b++}return m!=f&&a(s),n}function m(){for(var e=String.fromCharCode,t=0;256>t;t++)M[t]=e(t)}function v(e){if(0>=e&&(e=1),e>100&&(e=100),R!=e){var n=0;n=Math.floor(50>e?5e3/e:200-2*e),t(n),R=e}}function b(){e||(e=50),m(),i(),r(),o(),v(e)}var _,y,w,x,R,E=(Math.round,Math.floor),k=new Array(64),F=new Array(64),S=new Array(64),T=new Array(64),D=new Array(65535),A=new Array(65535),O=new Array(64),U=new Array(64),C=[],I=0,q=7,L=new Array(64),H=new Array(64),j=new Array(64),M=new Array(256),B=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],z=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],V=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){t&&v(t),C=new Array,I=0,q=7,u(65496),l(),d(),f(e.width,e.height),h(),p();var n=0,i=0,r=0;I=0,q=7,this.encode.displayName="_encode_";for(var o,s,c,m,b,R,E,k,F,D=e.data,A=e.width,O=e.height,U=4*A,M=0;O>M;){for(o=0;U>o;){for(b=U*M+o,R=b,E=-1,k=0,F=0;64>F;F++)k=F>>3,E=4*(7&F),R=b+k*U+E,M+k>=O&&(R-=U*(M+1+k-O)),o+E>=U&&(R-=o+E-U+4),s=D[R++],c=D[R++],m=D[R++],L[F]=(B[s]+B[c+256>>0]+B[m+512>>0]>>16)-128,H[F]=(B[s+768>>0]+B[c+1024>>0]+B[m+1280>>0]>>16)-128,j[F]=(B[s+1280>>0]+B[c+1536>>0]+B[m+1792>>0]>>16)-128;n=g(L,S,n,_,w),i=g(H,T,i,y,x),r=g(j,T,r,y,x),o+=32}M+=8}if(q>=0){var P=[];P[1]=q+1,P[0]=(1<<q+1)-1,a(P)}u(65497);var z="data:image/jpeg;base64,"+btoa(C.join(""));return C=[],z},b()}return e.encode=function(t,n){var i=new e(n);return i.encode(t)},e}),t("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,t,n){var i,r=e.canvasToDataUrl;e.canvasToDataUrl=function(e,o,a){var s,u,c,l,f;return n.os.android?("image/jpeg"===o&&"undefined"==typeof i&&(l=r.apply(null,arguments),f=l.split(","),l=~f[0].indexOf("base64")?atob(f[1]):decodeURIComponent(f[1]),l=l.substring(0,2),i=255===l.charCodeAt(0)&&216===l.charCodeAt(1)),"image/jpeg"!==o||i?r.apply(null,arguments):(u=e.width,c=e.height,s=e.getContext("2d"),t.encode(s.getImageData(0,0,u,c),a))):r.apply(null,arguments)}}),t("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(e,t,n){var i="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return t.register("Image",{modified:!1,init:function(){var e=this,t=new Image;t.onload=function(){e._info={type:e.type,width:this.width,height:this.height},e._metas||"image/jpeg"!==e.type?e.owner.trigger("load"):n.parseMeta(e._blob,function(t,n){e._metas=n,e.owner.trigger("load")})},t.onerror=function(){e.owner.trigger("error")},e._img=t},loadFromBlob:function(e){var t=this,i=t._img;t._blob=e,t.type=e.type,i.src=n.createObjectURL(e.getSource()),t.owner.once("load",function(){n.revokeObjectURL(i.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete")},getAsBlob:function(e){var t,i=this._blob,r=this.options;if(e=e||this.type,this.modified||this.type!==e){if(t=this._canvas,"image/jpeg"===e){if(i=n.canvasToDataUrl(t,"image/jpeg",r.quality),r.preserveHeaders&&this._metas&&this._metas.imageHead)return i=n.dataURL2ArrayBuffer(i),i=n.updateImageHead(i,this._metas.imageHead),i=n.arrayBufferToBlob(i,e)}else i=n.canvasToDataUrl(t,e);i=n.dataURL2Blob(i)}return i},getAsDataUrl:function(e){var t=this.options;return e=e||this.type,"image/jpeg"===e?n.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src=i,this._img=this._blob=null},_resize:function(e,t,n,i){var r,o,a,s,u,c=this.options,l=e.width,f=e.height,d=this.getOrientation();~[5,6,7,8].indexOf(d)&&(n^=i,i^=n,n^=i),r=Math[c.crop?"max":"min"](n/l,i/f),c.allowMagnify||(r=Math.min(1,r)),o=l*r,a=f*r,c.crop?(t.width=n,t.height=i):(t.width=o,t.height=a),s=(t.width-o)/2,u=(t.height-a)/2,c.preserveHeaders||this._rotate2Orientaion(t,d),this._renderImageToCanvas(t,e,s,u,o,a)},_rotate2Orientaion:function(e,t){var n=e.width,i=e.height,r=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=i,e.height=n}switch(t){case 2:r.translate(n,0),r.scale(-1,1);break;case 3:r.translate(n,i),r.rotate(Math.PI);break;case 4:r.translate(0,i),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-i);break;case 7:r.rotate(.5*Math.PI),r.translate(n,-i),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-n,0)}},_renderImageToCanvas:function(){function t(e,t,n){var i,r,o,a=document.createElement("canvas"),s=a.getContext("2d"),u=0,c=n,l=n;for(a.width=1,a.height=n,s.drawImage(e,0,0),i=s.getImageData(0,0,1,n).data;l>u;)r=i[4*(l-1)+3],0===r?c=l:u=l,l=c+u>>1;return o=l/n,0===o?1:o}function n(e){var t,n,i=e.naturalWidth,r=e.naturalHeight;return i*r>1048576?(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-i+1,0),0===n.getImageData(0,0,1,1).data[3]):!1}return e.os.ios?e.os.ios>=7?function(e,n,i,r,o,a){var s=n.naturalWidth,u=n.naturalHeight,c=t(n,s,u);return e.getContext("2d").drawImage(n,0,0,s*c,u*c,i,r,o,a)}:function(e,i,r,o,a,s){var u,c,l,f,d,h,p,g=i.naturalWidth,m=i.naturalHeight,v=e.getContext("2d"),b=n(i),_="image/jpeg"===this.type,y=1024,w=0,x=0;for(b&&(g/=2,m/=2),v.save(),u=document.createElement("canvas"),u.width=u.height=y,c=u.getContext("2d"),l=_?t(i,g,m):1,f=Math.ceil(y*a/g),d=Math.ceil(y*s/m/l);m>w;){for(h=0,p=0;g>h;)c.clearRect(0,0,y,y),c.drawImage(i,-h,-w),v.drawImage(u,0,0,y,y,r+p,o+x,f,d),h+=y,p+=f;w+=y,x+=d}v.restore(),u=c=null}:function(e,t,n,i,r,o){e.getContext("2d").drawImage(t,n,i,r,o)}}()})}),t("runtime/html5/transport",["base","runtime/html5/runtime"],function(e,t){var n=e.noop,i=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var t,n,r,o=this.owner,a=this.options,s=this._initAjax(),u=o._blob,c=a.server;a.sendAsBinary?(c+=(/\?/.test(c)?"&":"?")+i.param(o._formData),n=u.getSource()):(t=new FormData,i.each(o._formData,function(e,n){t.append(e,n)}),t.append(a.fileVal,u.getSource(),a.filename||o._formData.name||"")),a.withCredentials&&"withCredentials"in s?(s.open(a.method,c,!0),s.withCredentials=!0):s.open(a.method,c),this._setRequestHeader(s,a.headers),n?(s.overrideMimeType("application/octet-stream"),e.os.android?(r=new FileReader,r.onload=function(){s.send(this.result),r=r.onload=null},r.readAsArrayBuffer(n)):s.send(n)):s.send(t)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=n,e.onreadystatechange=n,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new XMLHttpRequest,i=this.options;return!i.withCredentials||"withCredentials"in t||"undefined"==typeof XDomainRequest||(t=new XDomainRequest),t.upload.onprogress=function(t){var n=0;return t.lengthComputable&&(n=t.loaded/t.total),e.trigger("progress",n)},t.onreadystatechange=function(){return 4===t.readyState?(t.upload.onprogress=n,t.onreadystatechange=n,e._xhr=null,e._status=t.status,t.status>=200&&t.status<300?(e._response=t.responseText,e.trigger("load")):t.status>=500&&t.status<600?(e._response=t.responseText,e.trigger("error","server")):e.trigger("error",e._status?"http":"abort")):void 0},e._xhr=t,t},_setRequestHeader:function(e,t){i.each(t,function(t,n){e.setRequestHeader(t,n)})},_parseJson:function(e){var t;try{t=i.parseJSON(e)}catch(n){t={}}return t}})}),t("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,i){function r(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function o(){function i(e,t){var n,i,r=e.type||e;n=r.split("::"),i=n[0],r=n[1],"Ready"===r&&i===c.uid?c.trigger("ready"):o[i]&&o[i].trigger(r.toLowerCase(),e,t)}var r={},o={},a=this.destory,c=this,l=t.guid("webuploader_");n.apply(c,arguments),c.type=s,c.exec=function(e,n){var i,a=this,s=a.uid,l=t.slice(arguments,2);return o[s]=a,u[e]&&(r[s]||(r[s]=new u[e](a,c)),i=r[s],i[n])?i[n].apply(i,l):c.flashExec.apply(a,arguments)},e[l]=function(){var e=arguments;setTimeout(function(){i.apply(null,e)},1)},this.jsreciver=l,this.destory=function(){return a&&a.apply(this,arguments)},this.flashExec=function(e,n){var i=c.getFlash(),r=t.slice(arguments,2);return i.exec(this.uid,e,n,r)}}var a=t.$,s="flash",u={};return t.inherits(n,{constructor:o,init:function(){var e,n=this.getContainer(),i=this.options;n.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),e='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+i.swf+'" ',t.browser.ie&&(e+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),e+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+i.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.html(e)},getFlash:function(){return this._flash?this._flash:(this._flash=a("#"+this.uid).get(0),this._flash)}}),o.register=function(e,n){return n=u[e]=t.inherits(i,a.extend({flashExec:function(){var e=this.owner,t=this.getRuntime();return t.flashExec.apply(e,arguments)}},n))},r()>=11.4&&n.addRuntime(s,o),o}),t("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(e){var t,i,r=n.extend({},e);for(t=r.accept&&r.accept.length,i=0;t>i;i++)r.accept[i].title||(r.accept[i].title="Files");delete r.button,delete r.container,this.flashExec("FilePicker","init",r)},destroy:function(){}})}),t("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),t("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(e,t,n){var i=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e,t=this.owner,n=this.options,r=this._initAjax(),o=t._blob,a=n.server;r.connectRuntime(o.ruid),n.sendAsBinary?(a+=(/\?/.test(a)?"&":"?")+i.param(t._formData),e=o.uid):(i.each(t._formData,function(e,t){r.exec("append",e,t)}),r.exec("appendBlob",n.fileVal,o.uid,n.filename||t._formData.name||"")),this._setRequestHeader(r,n.headers),r.exec("send",{method:n.method,url:a},e)},getStatus:function(){return this._status},getResponse:function(){return this._response},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;e&&(e.exec("abort"),e.destroy(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new n("XMLHttpRequest");return t.on("uploadprogress progress",function(t){return e.trigger("progress",t.loaded/t.total)}),t.on("load",function(){var n=t.exec("getStatus"),i="";return t.off(),e._xhr=null,n>=200&&300>n?(e._response=t.exec("getResponse"),e._responseJson=t.exec("getResponseAsJson")):n>=500&&600>n?(e._response=t.exec("getResponse"),e._responseJson=t.exec("getResponseAsJson"),i="server"):i="http",t.destroy(),t=null,i?e.trigger("error",i):e.trigger("load")}),t.on("error",function(){t.off(),e._xhr=null,e.trigger("error","http")}),e._xhr=t,t},_setRequestHeader:function(e,t){i.each(t,function(t,n){e.exec("setRequestHeader",t,n)})}})}),t("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport"],function(e){return e}),t("webuploader",["preset/all"],function(e){return e}),n("webuploader")})});
;define("common:widget/map/map.js",function(o,t,n){function e(){try{if(!i)throw new Error("需要引入地图js");if(!a)throw new Error("需要引入SearchInfoWindow.js")}catch(o){console.log(o.message)}return!0}function r(o){return"string"==typeof o||o instanceof String?o:new i.Point(o.baidu_longitude,o.baidu_latitude)}var i=i||window.BMap,a=a||window.BMapLib,s=function(o){return this instanceof s?(e(),void(this._oBdMap=new i.Map(o))):new s(o)};s.point=r,s.prototype.fixedView=function(o,t){return o=o||"北京",t=parseInt(t),o=r(o),this._oBdMap.centerAndZoom(o,t),this},s.prototype.reset=function(){return this._oBdMap.reset(),this},s.prototype.autoView=function(o){var t=[];for(var n in o){var e=o[n];t.push(r(e))}return this._oBdMap.setViewport(t),this._oBdMap.enableScrollWheelZoom(),this},s.prototype.getMapOrigin=function(){return this._oBdMap},s.prototype.centerTo=function(o){return o=r(o),this._oBdMap.panTo(o),this},s.prototype.zoomTo=function(o){return o=parseInt(o)||15,this._oBdMap.zoomTo(o),this},s.prototype.addPin=function(o,t){var n=this._oBdMap,e=[];for(var a in o){var s=r(o[a]),p=new i.Marker(s);"function"==typeof t&&p.addEventListener("click",t),n.addOverlay(p),e.push(p)}return e},s.prototype.removePin=function(o){var t=this._oBdMap;o instanceof i.Marker&&(o=[o]);for(var n=0;n!=o.length;++n){var e=o[n];t.addOverlay(e)}return this},s.prototype.clearPin=function(){var o=this._oBdMap;return o.clearOverlays(),this},s.searchInfoWindow=function(o,t,n){return this instanceof s.searchInfoWindow?(e(),void(this._oSIW=new a.SearchInfoWindow(o,t,n))):new s.searchInfoWindow(o,t,n)},s.searchInfoWindow.prototype.open=function(o){return o=r(o),this._oSIW.open(o),this},s.searchInfoWindow.prototype.close=function(){return this._oSIW.close(),this},s.searchInfoWindow.prototype.onClickClose=function(o){return"function"!=typeof o?this:(this._oSIW.addEventListener("clickclose",o),this)},n.exports=s});
;define("common:widget/map/MapDialog.js",function(t){var e=(t("common:widget/ui/dialog/dialog.js"),t("common:widget/map/map.js")),o={dlgOpt:{title:"",content:"我是内容",footer:"",top:0,left:0,width:300,height:"auto",zIndex:101,mask:{enable:!0,zIndex:100}},siwOpt:{title:"",width:290,height:"auto",panel:"j-search-result",enableAutoPan:!1,enableSendToPhone:!1,searchTypes:[BMAPLIB_TAB_TO_HERE,BMAPLIB_TAB_SEARCH,BMAPLIB_TAB_FROM_HERE]},dataCountKey:"count",dataShopKey:"shop",mapContainer:"j-md-map-view",shopSelectId:"j-md-shop-all",shopListId:"j-md-branch-view"},n=function(t){this._opt=$.extend(o,t,!0),this._map=new e(this._opt.mapContainer)};n.prototype.show=function(){},n.prototype.hide=function(){}});
;define("common:widget/new_gotop/SideNav.js",function(t,i,o){function n(t){this.options=$.extend({main:"#j-go-top",trigger:".go-top-2"},t),this.init()}var e=-1!==navigator.userAgent.indexOf("MSIE 6.0");n.prototype={constructor:n,init:function(){this.initDom(),this.initEvent()},initDom:function(){this.element=$(this.options.main),this.trigger=this.element.find(this.options.trigger),this.hideInIpad()},initEvent:function(){this._destroyed||(this.element.on("click",this.options.trigger,$.proxy(this.goTop,this)),$(window).on("scroll",$.proxy(this.onScroll,this)))},hide:function(){this.element.hide()},show:function(){this.element.show()},goTop:function(t){$("html,body").animate({scrollTop:"0px"},500),t.preventDefault()},onScroll:function(){var t=$(window).scrollTop();t>10&&!e?this.show():this.hide()},destroy:function(){this.element.remove(),this._destroyed=!0,this.element=this.trigger=null},hideInIpad:function(){var t=navigator.userAgent.toLowerCase();t.match(/iPad/i)&&this.destroy()}},o.exports=n});
;define("common:widget/ui/passport_bind_phone/passport_bind_phone.js",function(n,e,o){var i=n("common:widget/ui/dialog/dialog.js"),t=F.context("passport_base"),a=t+"/passApi/js/uni_armorwidget_wrapper.js",r=null,c="/pclogin/main/bindphonetoken",d="/pclogin/main/check2phones",s="/pclogin/main/syncpassphone",l=window.location.href.replace(/#.*$/,""),h=!1,u=!1,f={token:"",title:"绑定手机号",msg:"",otherValue:{tpl:"nuomi"},onInitFail:function(n,e){var o=e.errno,t=e.errmsg;t="系统繁忙，请稍后再试",0!=o&&i.alert({content:'<p class="bindphone-init-errmsg">'+t+"</p>"})},onSubmitSuccess:function(){h=!0,g.syncPhone()},onSubmitFail:function(){return},onHide:function(){!h&&p.needRedirectWhenFailOrCancel&&g.refresh()}},p={},b=function(n){p=$.extend({},{bindWhenStatusEq:[],u:l,needRedirectWhenFailOrCancel:!1},n||{});var e=p.bindWhenStatusEq;g.getPhoneStatus(function(n,o){if(e instanceof Array&&e.length>0&&-1==$.inArray(n,e))return void(p.needRedirectWhenFailOrCancel&&g.refresh());var i=m["handlerno"+n];i&&i(o)},function(){p.needRedirectWhenFailOrCancel&&g.refresh()})},g={syncPhone:function(){$.getJSON(s,function(n){{var e=n.errno;n.data}0==e?g.refresh():p.needRedirectWhenFailOrCancel&&g.refresh()})},getPhoneStatus:function(n,e){"function"==typeof n&&$.getJSON(d,function(o){var i=o.errno,t=o.data;if(0==i){var a=t.phoneState;n(a,t)}else"function"==typeof e&&e()})},refresh:function(){window.location=p.u}},m={handlerno1:function(){v.newBindPhone()},handlerno2:function(n){m.handlerno5(n)},handlerno3:function(){v.newBindPhone()},handlerno4:function(){v.reBindPhone()},handlerno5:function(n){var e=n.passPhone,o=n.nuomiPhone,t=["糯米贴心服务，可以快速将您的购买手机号",o?"（"+o+"）":"","一键更新为登录手机号",e?"（"+e+"）":"","，快来体验吧！"].join(""),a=['<div class="content">','<div class="title">'+t+"</div>",'<div class="btns">','<a href="javascript:;" class="dialog-btn-cancel j-dialog-btn" data-event="rebind">更改其它手机号</a>','<a href="javascript:;" class="dialog-btn-ok j-dialog-btn" data-event="ok">一键更新</a>',"</div>","</div>"],r=520;new i({title:"一键更新",content:a.join(""),width:r,customClassName:"ui-dialog-pass-bindphone",onok:function(){g.syncPhone()},onrebind:function(){v.reBindPhone()},oncancel:function(){p.needRedirectWhenFailOrCancel&&g.refresh()}}).center()}},v={bindPhone:function(){return h=!1,u=!1,r?(r=passport.pop.ArmorWidget("bindmobile",f),void r.show()):void $.getScript(a).done(function(){r=passport.pop.ArmorWidget("bindmobile",f),r.show()})},newBindPhone:function(){$.getJSON(c,{action:"bindmobile"},function(n){var e=n.data,o=e.token;$.extend(f,{action:"bindmobile",token:o}),v.bindPhone()})},reBindPhone:function(){$.getJSON(c,{action:"rebindmobile"},function(n){var e=n.data,o=e.token;$.extend(f,{action:"rebindmobile",token:o}),v.bindPhone()})}};o.exports={bind:b}});
;define("common:widget/ui/passport/passport.js",function(s,n,i){var a=s("common:widget/ui/account_forbidden/account_forbidden.js"),t=s("common:widget/ui/dialog/dialog.js"),e=s("common:widget/ui/passport_bind_phone/passport_bind_phone.js"),o=s("common:widget/ui/cookie/cookie.js"),l=F.context("passport_base"),c=F.context("nuomi_old_base"),r=F.context("passport_reg"),d=null,p=l+"/passApi/js/uni_login_wrapper.js",m=window.location.protocol+"//"+window.location.host+"/static/common/html/v3Jump.html",u="/pclogin/main/userinfo",v="/pclogin/main/accountbind",f=window.location.href.replace(/#.*$/,""),h="https://passport.baidu.com/v3/login/api/auth?tpl=nuomi&return_type=5&u=https%3a%2f%2fm.nuomi.com%2fwebapp%2fuser%2fsetstoken%3fcallback%3dcb%26redirect%3d1&callback=cb",g=null,b=!1,j={accBaiduTitleHtml:['<div class="pass-custom-title">',"百度第三方登录","</div>"].join(""),oldNuomiHtml:['<div class="pass-phoenix-list clearfix">','<div class="pass-phoenix-btn clearfix">','<div class="pass-custom-title">',"原糯米第三方登录","</div>",'<ul class="bd-acc-list">','<li class="bd-acc-qzone">','<a class="phoenix-btn-item" href="{%$url%}" title="qq">qq</a>',"</li>",'<li class="bd-acc-tsina">','<a class="phoenix-btn-item" href="{%$url%}" title="新浪微博">新浪微博</a>',"</li>",'<li class="bd-acc-renren">','<a class="phoenix-btn-item" href="{%$url%}" title="人人网">人人网</a>',"</li>",'<li class="bd-acc-zhifubao">','<a class="phoenix-btn-item" href="{%$url%}" title="支付宝">支付宝</a>',"</li>",'<li class="bd-acc-360">','<a class="phoenix-btn-item" href="{%$url%}" title="360">360</a>',"</li>","</ul>","</div>","</div>"].join(""),simpleNuomiHtml:['<ul class="bd-acc-list" id="bd-acc-topfix">','<li class="bd-acc-nuomi">','<a class="phoenix-btn-item" href="{%$url%}" title="原糯米第三方登录">qq</a>',"</li>","</ul>"].join(""),smsConflictNo2Html:['<div class="ui-passport-sms-conflict-content">','<div class="title">{%$msg%}</div>','<div class="text {%$clsUsername%}">用户名：{%$username%}</div>','<div class="text {%$clsEmail%}">邮箱：{%$email%}</div>',"</div>",'<div class="ui-passport-sms-conflict-btns">','<a href="javascript:;" class="dialog-btn-cancel j-dialog-btn" data-event="cancel">取消</a>','<a href="javascript:;" class="dialog-btn-ok j-dialog-btn" data-event="ok">去登录</a>',"</div>"].join(""),smsConflictNo4Step1Html:['<div class="ui-passport-sms-no4">','<div class="title">{%$msg%}</div>','<div class="content clearfix">','<div class="img-wrap"><img src="{%$imgSrc%}" width="55" height="55" /></div>','<div class="userinfo-area">','<div class="info {%$clsUsername%}">用户名：{%$username%}</div>','<div class="info {%$clsEmail%}">邮箱：{%$email%}</div>',"</div>","</div>",'<div class="btns">','<a href="javascript:;" class="dialog-btn-cancel j-dialog-btn" data-event="cancel">取消</a>','<a href="javascript:;" class="dialog-btn-ok j-dialog-btn" data-event="ok">下一步</a>',"</div>",'<div class="tips">','<span class="tip-icon"></span>','<span class="tip">确定后，需要修改您冲突的百度账号用户名</span>','<a href="javascript:;" class="link j-dialog-btn" data-event="normallogin">用账号密码登录</a>',"</div>","</div>"].join(""),smsConflictNo4Step2Html:['<div class="ui-passport-sms-no4">','<div class="title">{%$msg%}</div>','<div class="content clearfix">','<div class="input-wrap">','<input type="text" class="input-text" id="j-usernameInput"/>','<span class="clear-btn j-dialog-btn" id="j-clearBtn" data-event="clearinput" style="display:none"></span>',"</div>",'<div class="err-area" id="j-errArea" style="display:none">','<span class="err-icon"></span>','<div class="err-wrap" id="j-errWrap"></div>',"</div>","</div>",'<div class="btns">','<a href="javascript:;" class="dialog-btn-cancel j-dialog-btn" data-event="cancel">取消</a>','<a href="javascript:;" class="dialog-btn-ok j-dialog-btn" data-event="ok">确定</a>',"</div>",'<div class="tips">','<span class="tip-icon"></span>','<span class="tip">今后可使用修改后的用户名登录相应账号</span>',"</div>","</div>"].join(""),smsConflictNo5Html:['<div class="ui-passport-sms-no5">','<div class="title">{%$msg%}</div>','<div class="content clearfix">','<div class="img-wrap"><img src="{%$imgSrc%}" width="55" height="55" /></div>','<div class="userinfo-area">','<div class="info {%$clsUsername%}">用户名：{%$username%}</div>','<div class="info {%$clsEmail%}">邮箱：{%$email%}</div>',"</div>","</div>",'<div class="btns">','<a href="javascript:;" class="dialog-btn-cancel j-dialog-btn" data-event="cancel">取消</a>','<a href="javascript:;" class="dialog-btn-ok j-dialog-btn" data-event="ok">确定</a>',"</div>",'<div class="tips">','<a href="javascript:;" class="link j-dialog-btn" data-event="normallogin">用账号密码登录</a>',"</div>","</div>"].join("")},w=F.context("loginTest")?!0:!1;if(w)var x=2,N="nuomi-pc-test";else var x=1,N="nuomi-pc";var k={apiOpt:{loginType:1,staticPage:m,product:"nuomi",charset:"utf-8",u:h,memberPass:!0,safeFlag:0,sms:x,connect:!0,idc:F.context("login_idc"),subpro:N,autosuggest:!0,loginMerge:!0},registerLink:r+"&u="+encodeURIComponent(h),color:"pink",cache:!1,tangram:!0,authsite:["qzone","tsina","renren","tqq"],authsiteCfg:{display:"popup",act:"explicit"},onConnectError:function(s){var n=s.rsp?s.rsp:s,i=n.errInfo.no,a=n.data,t=_["handlerno"+i];t&&(d.hide(),s.returnValue=t(a))},onLoginSuccess:function(s){var n=s.rsp?s.rsp:s,i=n.connect,a=n.data||{},t=a.connecttype;if(d.hide(),"1"==t){i&&"function"==typeof i.hide&&i.hide();var o={token:a.info,bduss:a.bduss};$.post(v,o,function(s){var n=s.errno,i=s.data,a="function"==typeof U["handlerno"+n]?U["handlerno"+n]:U.handlerDefault;a(i)},"json"),s.returnValue=!1}else $.getJSON(u,function(s){0==s.errno?e.bind({bindWhenStatusEq:[2,5],u:k.apiOpt.u,needRedirectWhenFailOrCancel:!0}):window.location=f});var l={ecom_login:{email:a.mail||"",phone:a.phoneNumber||""}};F.context("tongji_hm").init({data:l}),s.returnValue=!1},onLoginError:function(){},onSubmitStart:function(){b=!1},onSubmitedErr:function(s){if(b){var n=s.rsp||s,i=n.errInfo,a=i.msg;t.alert({content:'<p class="smsloginsubmit-errmsg">'+a+"</p>"}),s.returnValue=!1}},onShow:function(){},onRender:function(){g=$("#passport-login-pop"),g.find(".pass-normal-btn").html("使用普通方式登录"),g.find(".tang-title span").html("登录百度糯米"),g.find(".pass-label-userName").html("手机/邮箱/用户名/糯米帐号"),g.find(".pass-text-input-userName").attr("placeholder","手机/邮箱/用户名/糯米帐号"),g.find("#pass_phoenix_btn").after($.formatTpl(j.simpleNuomiHtml,{url:c+"/account/login?u="+encodeURIComponent(f)})),g.find(".pass-sms-link-back").html("<<返回普通登录")}},S={getBaiduName:function(s){var n="";return s&&(n=s.passUname?s.passUname:s.passEmail?s.passEmail:s.passPhone?s.passPhone:""),n},getNuomiName:function(s){var n="";return s&&(n=s.email?s.email:s.phone?s.phone:""),n},refresh:function(){window.location=f},changeToNormalLogin:function(){d&&(d.show(),d.reset(),g.find(".pass-sms-link-back").get(0).click())},smsLoginSubmit:function(){d&&(b=!0,d.smsLoginSubmit())}},U={handlerDefault:function(){S.refresh()},handlerno0:function(s){var n=s.sendVoucher,i=S.getBaiduName(s.baiduUserInfo),a=1==n?"升级成功！10元优惠券已发放到您的帐户！":"恭喜您！账号升级成功！",o=['<div class="img"></div>'];o.push('<div class="title">'+a+"</div>"),i&&(o.push('<div class="text">以后请使用以下百度账号登录</div>'),o.push('<div class="text">'+i+"</div>")),o.push('<a href="javascript:;" class="dialog-btn-close j-dialog-btn" data-event="cancel">×</a>'),new t({content:o.join(""),width:410,customClassName:"ui-dialog-pass-update-success",oncancel:function(){e.bind({bindWhenStatusEq:[2,5],u:k.apiOpt.u,needRedirectWhenFailOrCancel:!0})}}).center()},handlerno9600208:function(s){var n=s.otherBaiduUserInfo,i=S.getBaiduName(s.otherBaiduUserInfo),a=i?"您的糯米账号已与下面的百度账号绑定,请使用该帐号登录！":"您的糯米账号已与其它的百度账号绑定,请使用该帐号登录！",e=['<div class="ui-passport-tip9600210">','<div class="title">'+a+"</div>"];n.passPhone&&e.push('<div class="text">手机号：'+n.passPhone+"</div>"),n.passEmail&&e.push('<div class="text">邮箱：'+n.passEmail+"</div>"),n.passUname&&e.push('<div class="text">用户名：'+n.passUname+"</div>"),e.push("</div>");var o=500;t.confirm({title:"提示",content:e.join(""),width:o,onok:function(){d.show(),d.reset()}})},handlerno9600210:function(s){var n=S.getNuomiName(s.nuomiUserInfo),i="您的百度帐号已经与其他的糯米账号绑定，下面的糯米账号无法登录。",a=['<div class="ui-passport-tip9600210">','<div class="title">'+i+"</div>",'<div class="text">'+n+"</div>","</div>"],e=600;t.alert({title:"提示",content:a.join(""),width:e})}},_={handlerno2:function(s){var n=s.conflictUser,i=n.passUname,a=n.passEmail,e="您输入的手机号已经有对应的帐号，请使用该账号登录",o=$.formatTpl(j.smsConflictNo2Html,{msg:e,username:i,email:a,clsUsername:i?"":"hide",clsEmail:a?"":"hide"}),l=600;return new t({title:"提示",content:o,width:l,customClassName:"ui-dialog-pass-sms-conflict-no2",onok:function(){S.changeToNormalLogin()}}).center(),!1},handlerno4:function(s){return _.handlerno4step1(s),!1},handlerno5:function(s){return _.handlerno5step1(s),!1},handlerno4step1:function(s){var n=s.conflictUser,i=n.pic_url,a=n.passUname,e=n.passEmail,o="检测到该手机号对应以下账号，确认登录吗？",l=$.formatTpl(j.smsConflictNo4Step1Html,{msg:o,imgSrc:i,username:a,email:e,clsUsername:a?"":"hide",clsEmail:e?"":"hide"}),c=514;new t({title:"提示",content:l,width:c,customClassName:"ui-dialog-pass-sms-conflict-no4",onok:function(){_.handlerno4step2()}}).center().on("normallogin",function(){S.changeToNormalLogin()})},handlerno4step2:function(){var s=$.trim(g.find(".pass-text-input-smsPhone").val()),n=$.trim(g.find(".pass-text-input-smsVerifyCode").val()),i=!1,a=$.formatTpl(j.smsConflictNo4Step2Html,{msg:"检测到一个与输入手机号同名的百度账号，为避免冲突，将其用户名改为："}),e=514;new t({title:"提示",content:a,width:e,customClassName:"ui-dialog-pass-sms-conflict-no4-step2",onok:function(){var a=this;if(i)return!1;var t={username:$.trim(this.getDom().find("#j-usernameInput").val()),phone:s,password:n},e=this.getDom().find("#j-errArea"),o=this.getDom().find("#j-errWrap");return i=!0,$.post("/pclogin/main/writepass",t,function(s){i=!1;var n=s.errno,t=(s.data,s.msg);0==n?(a.hide(),S.smsLoginSubmit()):(o.html(t),e.show())},"json"),!1},onrender:function(){var s=this.getDom().find("#j-usernameInput"),n=this.getDom().find("#j-clearBtn");return $.getJSON("/pclogin/main/recpsname",function(i){var a=i.errno,t=i.data;0==a&&t.suggName&&(s.val(t.suggName),n.show())}),s.on("keyup",function(){""==$.trim(s.val())?n.hide():n.show()}),!1}}).center().on("clearinput",function(){return this.getDom().find("#j-usernameInput").val(""),this.getDom().find("#j-clearBtn").hide(),!1})},handlerno5step1:function(s){var n=s.conflictUser,i=n.pic_url,a=n.passUname,e=n.passEmail,o=$.trim(g.find(".pass-text-input-smsPhone").val()),l=$.trim(g.find(".pass-text-input-smsVerifyCode").val()),c="检测到该手机号对应以下账号，确认登录吗？",r=$.formatTpl(j.smsConflictNo5Html,{msg:c,imgSrc:i,username:a,email:e,clsUsername:a?"":"hide",clsEmail:e?"":"hide"}),d=514,p=!1;new t({title:"提示",content:r,width:d,customClassName:"ui-dialog-pass-sms-conflict-no5",onok:function(){var s=this;if(p)return!1;p=!0;var n={phone:o,password:l};return $.post("/pclogin/main/writepass",n,function(n){p=!1;var i=n.errno,a=(n.data,n.msg);s.hide(),0==i?S.smsLoginSubmit():t.alert({content:'<p class="writepass-errmsg">'+a+"</p>"})},"json"),!1}}).center().on("normallogin",function(){S.changeToNormalLogin()})}},C={show:function(s){return o.set("back_url",f),d?void d.show():(s&&(s.u&&o.set("back_url",s.u),s.onLoginSuccess&&(k.onLoginSuccess=s.onLoginSuccess)),void $.getScript(p).done(function(){d=passport.pop.init(k),d.show()}))},check:function(s,n){var i=this;s=s||function(){},n=n||function(){},$.get(u,function(t){if(0==t.errno){var e=t.data.userInfo;e?2==e.status?(a.init(),n()):s():i.show()}},"json")}};i.exports=C});
;define("common:widget/new_header/bar/recentVisited.js",function(e,i,a){function t(){var e=navigator.userAgent.toLowerCase(),i=e.match(/iPad/i)?!0:!1,a={visitedAreaEnterhandler:function(){function e(){i("数据载入中...")}function i(e){var i=['<div class="loading">',e,"</div>"];l.html(i.join(""))}function a(e,i){var a=[],t=0;for(var n in e)if(e.hasOwnProperty(n)){var s=e[n],r="";0===t&&(r+="first"),a.push(['<a href="'+s.link+'" class="item '+r+'" mon="s='+i+"&element="+s.deal_id+"&position="+(t+1)+'&element_type=item" data-item-st="'+i+'" target="_blank">','<img src="'+s.tiny_image+'" width="120" height="74">','<div class="title-area">','<div class="title">'+s.min_title+"</div>",'<div class="price-area">','<span class="price">￥'+s.current_price/100+"</span>",'<span class="ori-price">￥'+s.market_price/100+"</span>","</div>","</div>","</a>"].join("")),t++}a.push(['<div class="visited-clear">','<a href="javascript:;" class="link j-clearVisited" mon="element=clear&element_type=nav">清空浏览记录</a>',"</div>"].join("")),l.html(a.join(""))}$(this).addClass("hover"),e(),$.getJSON(c,function(e){if(0===e.errno){var t=e.data.visitedDeal.detail,n=e.data.visitedDeal.s;t?a(t,n):i("暂无浏览记录")}else i(e.msg)})},visitedAreaLeaveHandler:function(){var e=this;$(e).removeClass("hover"),r.one({mouseenter:a.visitedAreaEnterhandler})},visitedAreaPadClickhandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?a.visitedAreaEnterhandler.apply(r[0]):r.removeClass("hover")},visitedAreaBodyClickHandler:function(e){function i(){d.hasClass("clicked")&&d.removeClass("clicked"),r.removeClass("hover")}var a=$(e.target).is("#j-visitedArea-title"),t=$(e.target).parents("#j-visitedContainer").length;t?setTimeout(function(){i()},500):a||i()},clearVisitedHandler:function(){function e(e){var i=['<div class="loading">',e,"</div>"];l.html(i.join(""))}o.set("visited","","-1"),o.set("visitedRight","","-1"),e("暂无浏览记录")}};i||(r.one({mouseenter:a.visitedAreaEnterhandler}),r.on({mouseleave:a.visitedAreaLeaveHandler}),$("#addFav").on("click",function(e){n(),e.preventDefault()})),d.on("click",a.visitedAreaPadClickhandler),r.on("click",".j-clearVisited",a.clearVisitedHandler)}function n(){var e=window.location,i=document.title,a=navigator.userAgent.toLowerCase(),t="您可以尝试通过快捷键Ctrl/Cmd + D 加入到收藏夹~";if(a.indexOf("360se")>-1)alert(t);else if(a.indexOf("msie 8")>-1)window.external.AddToFavoritesBar(e,i);else if(document.all)try{window.external.addFavorite(e,i)}catch(n){alert(t)}else window.sidebar?window.sidebar.addPanel(i,e,""):alert(t)}function s(){t()}var r=$("#j-visitedArea"),d=$("#j-visitedArea-title"),l=$("#j-visitedContainer"),o=e("common:widget/ui/cookie/cookie.js"),c="/pcindex/visited";a.exports={init:s}});
;define("common:widget/new_header/bar/bar.js",function(a){var e=(a("common:widget/ui/passport/passport.js"),a("common:widget/ui/account_forbidden/account_forbidden.js")),t=a("common:widget/ui/cookie/cookie.js"),n=a("common:widget/ui/dialog/dialog.js");$(function(){function o(){var e=t.get("CLOSE_CITY_TIP");null===e&&$(".city-tip-area").css("display","inline-block"),i(),r(),s(),d.attr("href",d.attr("href")+"?u="+encodeURIComponent(window.location.href)),l.attr("href",l.attr("href")+"&u="+encodeURIComponent(window.location.href)),a("common:widget/new_header/bar/recentVisited.js").init()}function i(){g.click(_.closeCityTip),u.click(_.logOutHandler)}function r(){var a=F.context("baid_uss_url");$.ajax(a,{dataType:"jsonp",success:function(){$.getJSON(m,{page:j},_.getUserHandler)},error:function(){$.getJSON(m,{page:j},_.getUserHandler)}})}function s(){var a=F.context("baidu_stoken_url");$.ajax(a,{dataType:"jsonp",jsonpCallback:"cb",success:function(){},error:function(){}})}var c=$("#j-ucLoginList"),d=$("#j-barLoginBtn"),u=$("#j-logout"),l=$("#j-barRegBtn"),p=$("#j-welcomeTag"),f=$("#j-ucOrderStatus"),g=$("#j-bubble-close"),m="/pclogin/main/userinfo",v="/uc/order/orderstatuscount",h=navigator.userAgent.toLowerCase(),j=(h.match(/iPad/i)?!0:!1,F.context("page_name")),S=F.context("nuomi_base"),_={closeCityTip:function(){t.set("CLOSE_CITY_TIP","1","week"),$(".city-tip-area").css("display","none")},getUserHandler:function(a){if(0==a.errno&&a.data.userInfo)if(c.addClass("has-login"),2==a.data.userInfo.status)e.init();else{var o="Hi，";o+=a.data.userInfo.passUname?decodeURIComponent(a.data.userInfo.passUname):a.data.userInfo.passPhone?a.data.userInfo.passPhone.replace(/^(\d{3}).*(\d{4})$/g,"$1****$2"):a.data.userInfo.passEmail,p.html(o);var i=t.get("BAINUO_ORDER_STATUS_CLOSE");(!i||i.indexOf("a")<0)&&($.getJSON(v,_.getOrderStatusHandler),f.find("a").on("click",_.ucOrderStatusItemClickHandler))}else{var r=a.errno,s=a.data,d=s.baiduUserInfo,u=s.otherBaiduUserInfo,l=s.nuomiUserInfo,g="";d&&(g=d.passUname?d.passUname:d.passEmail?d.passEmail:d.passPhone?d.passPhone:"");var m="";u&&(m=u.passUname?u.passUname:u.passEmail?u.passEmail:u.passPhone?u.passPhone:"");var h="";if(l&&(h=l.email?l.email:l.phone?l.phone:""),9600210==r){g&&(g="（"+g+"）");var j="您的百度帐号已经与其他的糯米账号绑定，下面的糯米账号无法登录。",S=['<div class="ui-passport-tip9600210">','<div class="title">'+j+"</div>",'<div class="text">'+h+"</div>","</div>"],U=600;n.alert({title:"提示",content:S.join(""),width:U}),_.userErrorHandler()}else if(9600208==r){var j="您的糯米账号已与下面的百度账号绑定,请使用该帐号登录！";m||(j="您的糯米账号已与其它的百度账号绑定,请使用该帐号登录！");var S=['<div class="ui-passport-tip9600210">','<div class="title">'+j+"</div>",'<div class="text">'+m+"</div>","</div>"],U=500;n.alert({title:"提示",content:S.join(""),width:U,onok:function(){}}),_.userErrorHandler()}}},getOrderStatusHandler:function(a){if(0==a.errno){for(var e=!1,n=t.get("BAINUO_ORDER_STATUS_CLOSE"),o=["",a.data.soonexpireCount,a.data.uncommentCount,a.data.unpayCount,a.data.merchantReplyCount,a.data.usableHongbaoCount],i="abcdef",r=1;5>=r;r++)(null===n||n.indexOf(i.charAt(r))<0)&&o[r]>0&&(e=!0,f.find("#j-ucStatusLink-"+i.charAt(r)).prev("span").html(o[r]),f.find("#j-ucStatusLink-"+i.charAt(r)).parent().show());e===!0&&f.show()}},ucOrderStatusItemClickHandler:function(a){function e(a){var e=t.get("BAINUO_ORDER_STATUS_CLOSE");t.set("BAINUO_ORDER_STATUS_CLOSE",a+(null===e?"":e),"today")}function n(){if(f.is(":visible")){for(var a=!1,e="abcde",t=1;4>=t;t++)if(f.find("#j-ucStatusLink-"+e.charAt(t)).is(":visible")){a=!0;break}a||f.hide()}}a.target.parentNode.style.display="none",n(),"e"!=a.target.id.charAt(a.target.id.length-1)&&e(a.target.id.charAt(a.target.id.length-1))},logOutHandler:function(){var a=F.context("logout_nuomi");$.ajax(a,{dataType:"json",async:!1,success:function(a){var e=u.attr("href");if(0==a.errno){var t=a.data.BDUSS64;t&&(e+="&sid="+encodeURIComponent(t))}e+="&u="+encodeURIComponent(window.location.protocol+S),u.attr("href",e)}})},userErrorHandler:function(){var a=F.context("logout_nuomi");$.ajax(a,{dataType:"json",async:!1,success:function(a){var e=F.context("logout_baidu");if(0==a.errno){var t=a.data.BDUSS64;t&&(e+="&sid="+encodeURIComponent(t))}$.ajax(e,{dataType:"jsonp"})}})}};o()})});
;define("common:widget/new_header/bar/dropdown.js",function(n,o,t){function i(n){this.options=$.extend({},r,n),this.init()}var r={container:"#header-bar",containerClass:"j-bar-dropdown"};i.prototype={constructor:i,init:function(){this.container=$(this.options.container),this.dropdownContainer=this.container.find("."+this.options.containerClass),this.bindEvent()},bindEvent:function(){this.dropdownContainer.on("mouseenter",$.proxy(this.onShowDropdown,this)),this.dropdownContainer.on("mouseleave",$.proxy(this.onHideDropdown,this))},onShowDropdown:function(n){$(n.currentTarget).addClass("hover")},onHideDropdown:function(n){$(n.currentTarget).removeClass("hover")}},t.exports=i});
;define("common:widget/new_header/bar/revision_recentVisited.js",function(e,i,a){function t(){var e=navigator.userAgent.toLowerCase(),i=e.match(/iPad/i)?!0:!1,a={visitedAreaEnterhandler:function(){function e(){i("数据载入中...")}function i(e){var i=['<div class="drop-block"></div><div class="loading">',e,"</div>"];o.html(i.join(""))}function a(e){var i=['<div class="drop-block"></div>'],a=0;for(var t in e)if(e.hasOwnProperty(t)){var s=e[t],n="";0===a&&(n+="first");var r;r=s.per_price?"人均￥"+s.per_price/100:"暂无价格";var d;d=s.average_score?'<div class="s-grey"><div class="s-color" style="width: '+100*s.average_score/5+'%;"></div></div>':'<div class="score">暂无评分</div>',d='<div class="score"></div>',i.push(['<a href="//www.nuomi.com/shop/'+s.poi_id+'" class="item '+n+'" mon="element='+s.deal_id+"&position="+(a+1)+'&element_type=item" target="_blank">','<img src="'+s.tiny_image+'" width="117" height="84">','<div class="title-area">','<div class="title">'+s.poi_name+"</div>",d,'<div class="price-area">','<span class="price">'+r+"</span>",'<span class="position">'+s.poi_dist+"</span>","</div>","</div>","</a>"].join("")),a++}i.push(['<div class="visited-clear">','<a href="javascript:;" class="link j-clearVisited" mon="element=clear&element_type=nav">清空浏览记录</a>',"</div>"].join("")),o.html(i.join(""))}$(this).addClass("hover"),e(),$.getJSON(c,function(e){if(0===e.errno){var t=e.data.visitedShop.detail;t?a(t):i("暂无浏览记录")}else i(e.msg)})},visitedAreaLeaveHandler:function(){var e=this;$(e).removeClass("hover"),r.one({mouseenter:a.visitedAreaEnterhandler})},visitedAreaPadClickhandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?a.visitedAreaEnterhandler.apply(r[0]):r.removeClass("hover")},visitedAreaBodyClickHandler:function(e){function i(){d.hasClass("clicked")&&d.removeClass("clicked"),r.removeClass("hover")}var a=$(e.target).is("#j-visitedArea-title"),t=$(e.target).parents("#j-visitedContainer").length;t?setTimeout(function(){i()},500):a||i()},clearVisitedHandler:function(){function e(e){var i=['<div class="drop-block"></div><div class="loading">',e,"</div>"];o.html(i.join(""))}l.set("visited","","-1"),l.set("visitedRight","","-1"),l.set("shop_visited","","-1"),e("暂无浏览记录"),setTimeout(function(){r.removeClass("hover")},1500)}};i||(r.one({mouseenter:a.visitedAreaEnterhandler}),r.on({mouseleave:a.visitedAreaLeaveHandler}),$("#addFav").on("click",function(e){s(),e.preventDefault()})),d.on("click",a.visitedAreaPadClickhandler),r.on("click",".j-clearVisited",a.clearVisitedHandler)}function s(){var e=window.location,i=document.title,a=navigator.userAgent.toLowerCase(),t="您可以尝试通过快捷键Ctrl/Cmd + D 加入到收藏夹~";if(a.indexOf("360se")>-1)alert(t);else if(a.indexOf("msie 8")>-1)window.external.AddToFavoritesBar(e,i);else if(document.all)try{window.external.addFavorite(e,i)}catch(s){alert(t)}else window.sidebar?window.sidebar.addPanel(i,e,""):alert(t)}function n(){t()}var r=$("#j-visitedArea"),d=$("#j-visitedArea-title"),o=$("#j-visitedContainer"),l=e("common:widget/ui/cookie/cookie.js"),c="/pcindex/visited";a.exports={init:n}});
;define("common:widget/new_header/bar/revision_bar.js",function(a){var e=(a("common:widget/ui/passport/passport.js"),a("common:widget/ui/account_forbidden/account_forbidden.js")),t=a("common:widget/ui/cookie/cookie.js"),n=a("common:widget/ui/dialog/dialog.js");$(function(){function o(){var e=t.get("CLOSE_CITY_TIP");null===e&&$(".city-tip-area").css("display","inline-block"),i(),r(),s(),d.attr("href",d.attr("href")+"?u="+encodeURIComponent(window.location.href)),l.attr("href",l.attr("href")+"&u="+encodeURIComponent(window.location.href)),a("common:widget/new_header/bar/revision_recentVisited.js").init()}function i(){g.click(S.closeCityTip),u.click(S.logOutHandler)}function r(){var a=F.context("baid_uss_url");$.ajax(a,{dataType:"jsonp",success:function(){$.getJSON(m,{page:_},S.getUserHandler)},error:function(){$.getJSON(m,{page:_},S.getUserHandler)}})}function s(){var a=F.context("baidu_stoken_url");$.ajax(a,{dataType:"jsonp",jsonpCallback:"cb",success:function(){},error:function(){}})}var c=$("#j-ucLoginList"),d=$("#j-barLoginBtn"),u=$("#j-logout"),l=$("#j-barRegBtn"),p=$("#j-welcomeTag"),f=$("#j-ucOrderStatus"),g=$("#j-bubble-close"),m="/pclogin/main/userinfo",v="/uc/order/orderstatuscount",h=navigator.userAgent.toLowerCase(),_=(h.match(/iPad/i)?!0:!1,F.context("page_name")),j=F.context("nuomi_base"),S={closeCityTip:function(){t.set("CLOSE_CITY_TIP","1","week"),$(".city-tip-area").css("display","none")},getUserHandler:function(a){if(0==a.errno&&a.data.userInfo)if(c.addClass("has-login"),2==a.data.userInfo.status)e.init();else{var o="Hi，";o+=a.data.userInfo.passUname?decodeURIComponent(a.data.userInfo.passUname):a.data.userInfo.passPhone?a.data.userInfo.passPhone.replace(/^(\d{3}).*(\d{4})$/g,"$1****$2"):a.data.userInfo.passEmail,p.html(o);var i=t.get("BAINUO_ORDER_STATUS_CLOSE");(!i||i.indexOf("a")<0)&&($.getJSON(v,S.getOrderStatusHandler),f.find("a").on("click",S.ucOrderStatusItemClickHandler))}else{var r=a.errno,s=a.data,d=s.baiduUserInfo,u=s.otherBaiduUserInfo,l=s.nuomiUserInfo,g="";d&&(g=d.passUname?d.passUname:d.passEmail?d.passEmail:d.passPhone?d.passPhone:"");var m="";u&&(m=u.passUname?u.passUname:u.passEmail?u.passEmail:u.passPhone?u.passPhone:"");var h="";if(l&&(h=l.email?l.email:l.phone?l.phone:""),9600210==r){g&&(g="（"+g+"）");var _="您的百度帐号已经与其他的糯米账号绑定，下面的糯米账号无法登录。",j=['<div class="ui-passport-tip9600210">','<div class="title">'+_+"</div>",'<div class="text">'+h+"</div>","</div>"],U=600;n.alert({title:"提示",content:j.join(""),width:U}),S.userErrorHandler()}else if(9600208==r){var _="您的糯米账号已与下面的百度账号绑定,请使用该帐号登录！";m||(_="您的糯米账号已与其它的百度账号绑定,请使用该帐号登录！");var j=['<div class="ui-passport-tip9600210">','<div class="title">'+_+"</div>",'<div class="text">'+m+"</div>","</div>"],U=500;n.alert({title:"提示",content:j.join(""),width:U,onok:function(){}}),S.userErrorHandler()}}},getOrderStatusHandler:function(a){if(0==a.errno){for(var e=!1,n=t.get("BAINUO_ORDER_STATUS_CLOSE"),o=["",a.data.soonexpireCount,a.data.uncommentCount,a.data.unpayCount,a.data.merchantReplyCount,a.data.usableHongbaoCount],i="abcdef",r=1;5>=r;r++)(null===n||n.indexOf(i.charAt(r))<0)&&o[r]>0&&(e=!0,f.find("#j-ucStatusLink-"+i.charAt(r)).prev("span").html(o[r]),f.find("#j-ucStatusLink-"+i.charAt(r)).parent().show());e===!0&&f.show()}},ucOrderStatusItemClickHandler:function(a){function e(a){var e=t.get("BAINUO_ORDER_STATUS_CLOSE");t.set("BAINUO_ORDER_STATUS_CLOSE",a+(null===e?"":e),"today")}function n(){if(f.is(":visible")){for(var a=!1,e="abcde",t=1;4>=t;t++)if(f.find("#j-ucStatusLink-"+e.charAt(t)).is(":visible")){a=!0;break}a||f.hide()}}a.target.parentNode.style.display="none",n(),"e"!=a.target.id.charAt(a.target.id.length-1)&&e(a.target.id.charAt(a.target.id.length-1))},logOutHandler:function(){var a=F.context("logout_nuomi");$.ajax(a,{dataType:"json",async:!1,success:function(a){var e=u.attr("href");if(0==a.errno){var t=a.data.BDUSS64;t&&(e+="&sid="+encodeURIComponent(t))}e+="&u="+encodeURIComponent(window.location.protocol+j),u.attr("href",e)}})},userErrorHandler:function(){var a=F.context("logout_nuomi");$.ajax(a,{dataType:"json",async:!1,success:function(a){var e=F.context("logout_baidu");if(0==a.errno){var t=a.data.BDUSS64;t&&(e+="&sid="+encodeURIComponent(t))}$.ajax(e,{dataType:"jsonp"})}})}};o()})});
;define("common:widget/new_header/cart/cart.js",function(t,a,e){var n=t("common:widget/dep/etpl/main.js"),i=!1,r=$("#bar-cart-container"),o=$("#cart-item-container"),c=$(".bar-cart-overview"),d=$("#bar-cart-template").html(),s=n.compile(d),l="/uc/user/mycart",u="/uc/user/delmycart",m={type:"GET",dataType:"json"},v={type:"POST",dataType:"json"},f=function(t){var a="market_price",e="formal_price",n="current_price",i=!1;if(t.showMarketPrice=t[a]/100||0,t.discount&&t.discount.activityList)for(var r=0;r<t.discount.activityList.length;r++){var o=t.discount.activityList[r];if(o.matchPrice>0||0===o.type&&t[e]>0){i=!0;break}}t.showCurrentPrice=i?t.discount.price/1e3||0:t[n]/100||0},h=function(t,a){t||(t={});var e=t.data||{totalNum:0},n=0,r="购物车<em>"+(e.totalNum||0)+'</em>件<span class="arrow-down-logo"></span>';a=a||0,$.isArray(t.data.list)&&(t.data.list.length>5?(t.data.remainGoods=t.data.list.length-5,t.data.list=t.data.list.slice(0,5),n=5):n=t.data.list.length);for(var d=0;n>d;d++)f(t.data.list[d]);1===a&&(i=!0,t.isAdd2Cart=!0),c.html(r),o.html(s(t))},p=function(){if(!i){i=!0;var t='<div class="loading">数据载入中...</div>';o.html(t),$.ajax(l,m).then(function(t){h(t)})}},y=function(t){var a=Date.now();$.ajax(l,m).then(function(e){var n=t-Date.now()+a;h(e,1),setTimeout(function(){r.addClass("hover")},n)})},w=function(){$("body").on("click",function(t){var a=t.target;$.contains(r[0],a)||(r.removeClass("hover"),i=!1)}),r.on("click",".bar-cart-overview",function(t){var a=+$(this).find("em").text();a||t.preventDefault()})},g=function(){var t=!1;return function(){t||(p(),w(),r.on("mouseenter",p),r.on("mouseleave",function(){i=!1}),o.on("click",".deal-delete",function(){var t=$(this);v.data={itemList:[{dealId:t.data("deal-id"),num:t.data("deal-num")}]},$.ajax(u,v).then(function(t){h(t)})}),t=!0)}}();e.exports={init:g,add2cart:y}});
;define("common:widget/new_header/sug.js",function(t,e,n){function i(){d.init(document.body,m),o()}function o(){var t,e=d.get("main-searcher");e.on("autocomplete",function(t){var e=$(this.main);"move"===t.mode&&(t.suggestion.seg?(t.current>=0&&e.find("#autocomplate-list-"+t.current).hide(),e.find("#autocomplate-list-"+t.next).show()):e.find("#autocomplate-list-"+t.current).hide()),e.find("#j-input-hidden").val(this.get("rid"))}),e.on("show",function(e){u(e.main,e.suggestions),t=e.suggestions}),$("#j-searchForm").on("submit",function(n){var i;$.trim(e.input.value)?(null!=t&&$.each(t,function(t,n){return e.input.value===n.relword?(i=!0,!1):void 0}),i||e.input.value===e.input.getAttribute("data-placeholder")||$(this).find("#j-input-hidden").remove()):n.preventDefault(),$("#search-tieba").find(".n-textbox-autocomplete").hide()})}function r(){var t=d.get("main-searcher");t.on("selectClick",function(t){var e=t.value;location.href="https://gss0.bdstatic.com/search?k="+encodeURIComponent(e)+"&rid="+this.get("rid")})}function a(){var t=d.get("main-searcher");t.on("selectClick",function(t){var e=t.value;window.open("/search?k="+encodeURIComponent(e)+"&rid="+this.get("rid")+"&cid=7754")})}function u(t,e){function n(t,e,n){if(n){if(1>e)return void t.css({top:0});var r=(e-1)*i,a=(n/2+1)*i;return r+a>o?void t.css({bottom:12}):void t.css({top:r})}}var i=30,o=e.length*i;t.find(".autocomplete-panel .list").each(function(){var t=$(this),r=t.data("index"),a=t.closest(".panel-inner"),u=e[r].seg.length;n(a,r,u);var c=Math.ceil(u/2)*i+i;c>o&&(o=c)}),t.css({height:o})}t("common:widget/dep/moye/TextBox.js");var c=t("common:widget/dep/moye/plugin/TextBoxAutoComplete.js"),s=t("common:widget/util/ejson.js"),d=t("common:widget/dep/moye/main.js"),l=t("common:widget/dep/etpl/main.js");l.addFilter("encode",function(t){return encodeURIComponent(t)});var m={"main-searcher":{name:"k",type:"TextBox",plugins:[new c({template:l.compile($("#autocomplete-template").html()),datasource:function(t,e){return s.get("/searchsug",{data:{kw:t}}).then(function(t){return t&&t.suglist?(e.textbox.set("rid",t.recomwd_id),$.each(t.suglist,function(e,n){n.rid=t.recomwd_id}),t.suglist):[]})},adapter:{toList:function(t){return t},toInput:function(t){return t.relword}},setPosition:function(t){var e=$(this.textbox.input);t=$(t),t.css({position:"absolute",left:0,width:e.outerWidth()-2,top:e.outerHeight()})}})]}};n.exports={init:i,bind:r,bindTieba:a}});
;define("common:widget/new_header/header.js",function(e){var a=e("common:widget/ui/cookie/cookie.js"),t=e("common:widget/ui/placeholder/placeholder.js"),i=(e("common:widget/ui/dialog/dialog.js"),e("common:widget/new_header/sug.js")),o=e("common:widget/dep/moye/lib.js");$(function(){function e(){s(),n(),i.init(),i.bind(),new t({element:u,selClass:"input-placeholder"}),p&&$(".flexible").addClass("na-width"),(10===o.browser.ie||/Trident\/7\./.test(navigator.userAgent))&&$("body").addClass("ie10")}function n(){var e=new Date("2015/4/29"),a=new Date("2015/5/4"),t=new Date("2015/5/11"),i=new Date("2015/5/18"),o="qrcode-51",n="qrcode-517",s="qrcode-discount",c=$("#j-go-top .img"),r=$(".right-erweima a"),l=$("#j-ucLoginList .img"),g="",u="";d>=e&&a>d?(g=o,u=".logo-area .img51"):d>=t&&i>d?(g=n,u=".logo-area .img517"):(g=s,u=".logo-area .img-discount"),$(u).show(),c.addClass(g),r.addClass(g),l.addClass(g),r.css("visibility","visible")}function s(){p&&(r&&(v.on({click:H.catgRowPadClickHandler}),c||m.on({click:H.catgPadClickHandler})),$(document).on({touchstart:function(){this._isMove=!1},touchmove:function(){this._isMove=!0},touchend:function(e){this._isMove||setTimeout(function(){H.catgRowBodyClickHandler(e),c||H.catgBodyClickHandler(e)},200)}})),g.on("click",H.topSpreadCloseClickHandler)}var c=F.context("isIndex"),r=F.context("isHotCity"),d=F.context("erweimaCurrentTime"),l=$("#j-topSpread"),g=$("#j-topSpreadClose"),u=($("#j-searchBtn"),$("#j-searchForm"),$("#j-searchInput")),v=($("#j-input-hidden"),$(".j-catg-row")),h=$("#j-catg"),m=h,C=$("#j-catg-list"),f=($("#j-nav-area"),$("#j-visitedArea"),$("#j-visitedArea-title"),$("#j-visitedContainer"),$.browser.msie&&6==$.browser.version),w=navigator.userAgent.toLowerCase(),p=w.match(/iPad/i)?!0:!1,k="/mis/ad/ad?adarea_id=10,11,12,13,14,15,16,17",j=!1,H={catgRowMouseEnterHandler:function(){var e=this;if($(this).addClass("hover"),$(e).addClass("active"),"page=index"==$("body").attr("mon")&&!j){j=!0;var a={326:"10",345:"11",320:"12",330:"13",316:"14",642:"15",708:"16",955:"17"};$.getJSON(k,function(e){if(0===e.errno)for(var t in a){var i=e.data[a[t]];if(i.length>0){var o=$(".j-catg-row[catg-id='"+t+"']"),n=o.children(".subcatg-list").first();0===n.length&&(n=$('<div class="subcatg-list subcatg-no-link" mon="area=catgHover_'+t+'"></div>'),o.append(n));for(var s in i){var c=i[s];n.append('<a class="subcatg-ad" target="_blank" href="'+c.url+'" bn_box="catgAd&position" mon="element=adver_'+c.id+'&position=1"><img src="'+c.img+'" alt="'+c.title+'"/></a>')}}}})}},catgRowMouseLeaveHandler:function(){var e=this;$(this).removeClass("hover"),$(e).removeClass("active")},catgRowPadClickHandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?(H.catgRowMouseEnterHandler.call(this),$(this).siblings().each(function(e,a){$(a).removeClass("hover"),$(a).removeClass("active"),$(a).removeClass("clicked")})):H.catgRowMouseLeaveHandler.call(this)},catgRowBodyClickHandler:function(e){$(e.target).parents(".j-catg-row").length||(v.hasClass("clicked")&&v.removeClass("clicked"),v.each(function(e,a){var t=a;$(a).removeClass("hover"),$(t).removeClass("active")}))},catgMouseEnterHandler:function(){h.addClass("active"),C.show()},catgMouseLeaveHandler:function(){c||h.removeClass("active"),C.hide()},catgPadClickHandler:function(){$(this).toggleClass("clicked");var e=$(this).hasClass("clicked");e?H.catgMouseEnterHandler.call(h[0]):C.hide()},catgBodyClickHandler:function(e){$(e.target).parents("#j-catg").length||(m.hasClass("clicked")&&m.removeClass("clicked"),C.hide())},navMouseEnterHandler:function(){h.clearQueue("short")},navMouseLeaveHandler:function(){f?(C.hide(),h.removeClass("hover")):C.hide(function(){h.stop().animate({width:211},{duration:100,queue:"short",complete:function(){C.hide()}}),setTimeout(function(){h.dequeue("short")},500)})},topSpreadCloseClickHandler:function(){l.slideUp(400,function(){l.remove()}),a.set("TOP_SPREAD_CLOSED","1","today")}};e()})});
;define("common:widget/new_header/nav/nav.js",function(t,n,i){function e(t){this.options=$.extend({},o,t),this.init()}var s=t("common:widget/new_header/nav/triangle.js"),o={triggerType:"mousemove",triggerDelay:300,navContainerClass:"j-catg",navClass:"j-catg-row",currentNav:-1,panelClass:"second-level",triangleContainer:"#j-catg-list",forceSelect:!1};e.prototype={constructor:e,init:function(){this.container=$(this.options.container),this.navContainer=this.container.find("."+this.options.navContainerClass),this.navs=this.navContainer.find("."+this.options.navClass),this.forceSelect=this.options.forceSelect,this.minNavIdx=this.options.forceSelect?0:-1,this.currentNav=this.options.currentNav>=this.minNavIdx&&this.options.currentNav<this.navs.length?this.options.currentNav:this.minNavIdx,this.triangleContainer=$(this.options.triangleContainer),this._initStatus(),this._bindEvent()},_initStatus:function(){this.navs.removeClass(this.options.selectedClass),s.init(this.triangleContainer,this.navs)},_bindEvent:function(){var t=this;this._bindShowHide(),this.navs.on("mousemove",function(n){var i=$(this).data("index");"mousemove"===n.type?-1!==t.currentNav&&s.isInTriangle(n)||t.switchTo(i):("click"===n.type||"tap"===n.type)&&t.switchTo(i)}),~t.options.triggerType.indexOf("mousemove")&&(this.navs.on("mouseenter",function(){var n=$(this).data("index"),i=setTimeout(function(){t.switchTo(n)},t.options.triggerDelay);t.navs.data("delayTimer",i)}),this.navs.on("mouseleave",function(){var n=t.navs.data("delayTimer");n&&clearTimeout(n)})),this.forceSelect||t.container.on("mouseleave",function(){t.switchTo(-1)})},_bindShowHide:function(){F.context("isIndex")||(this.navContainer.on("mouseenter",$.proxy(this.onShowNav,this)),this.navContainer.on("mouseleave",$.proxy(this.onHideNav,this)))},onShowNav:function(){this.navContainer.addClass("active")},onHideNav:function(){this.navContainer.removeClass("active")},switchTo:function(t){var n=this;t<n.minNavIdx&&t>=n.navs.length||t===n.currentNav||n._switchTo(t)},_switchTo:function(t){var n=this;n.navs.eq(n.currentNav).parent().removeClass(n.options.selectedClass),t>=0&&n.navs.eq(t).parent().addClass(n.options.selectedClass),n.currentNav=t}},i.exports=e});
;define("common:widget/search/search.js",function(t,e,s){var i=function(){this.init.apply(this,arguments)};$.extend(i.prototype,{init:function(e){this.suggestion=t("common:widget/ui/suggestion/suggestion.js"),this.storage=t("common:widget/ui/storage/storage.js"),this.sug=null,this._sugApi="/searchsug",this._storageNamespace="searchHistory",this._jumpUrl=F.context("nuomi_base")+"/search?k=",this._inputId=".j-searchInput",this._searchBtnId=$(".j-search-btn"),this.$searchForm=null,this.$inputHidden=null,this._sugItemTpl=['<a class="j-suggestion-item suggestion-item" mon="element=sug">','<span class="j-sug-word">${htmlEscapedWord}</span>','<span class="sug-count">约<em class="count">${count}</em>单在线</span>',"</a>"].join(""),this._historyItemTpl=['<a class="j-suggestion-item suggestion-item history-item" mon="element=sugHistory">','<em class="history-word j-sug-word">${htmlEscapedWord}</em>','<span class="sug-count">搜索历史</span>',"</a>"].join(""),$.extend(this,e),this.$input=this._inputId,this.rid=this.$inputHidden.val(),this._historyWordStr=this.storage.getItem(this._storageNamespace),this._historyWordList=this._historyWordStr?this._historyWordStr.split("&"):[],this._showHistoryItemNum=2,this._searchWord="";var s=t("common:widget/ui/placeholder/placeholder.js");new s({element:$(".placeholder")}),this.sugInit(),this.bindEvent()},jump:function(t){var e=this._jumpUrl+encodeURIComponent(t)+"&rid="+this.rid;window.open(e)},jumpNoRid:function(t){var e=this._jumpUrl+encodeURIComponent(t);window.open(e)},saveHistoryWord:function(t){var e;t=encodeURIComponent(t),-1!==(e=$.inArray(t,this._historyWordList))&&this._historyWordList.splice(e,1),this._historyWordList.unshift(t),this.storage.setItem(this._storageNamespace,this._historyWordList.join("&"))},getSearchHistory:function(t){var e,s=[],i=this._historyWordList,n=this._showHistoryItemNum;t=encodeURIComponent(t);for(var o=0,r=i.length;r>o;o++)e=i[o],0===e.indexOf(t)&&n-->0&&s.push({relword:decodeURIComponent(e),htmlEscapedWord:$("<div />").text(decodeURIComponent(e)).html(),urlencodedWord:e});return s},renderSearchHistoryItem:function(t){for(var e,s=[],i=this._historyItemTpl,n=this.getSearchHistory(t),o=0,r=n.length;r>o;o++)e=n[o],s.push(i.replace(/\$\{([^\}]*)\}/g,function(t,s){return e[s]}));return s},getDataKw:function(t){return decodeURIComponent($(t).find(".j-sug-word").html())},sugInit:function(){var t=this,e=new t.suggestion(this.$input.get(0),{delay:100,zIndex:101,url:this._sugApi,className:"search-suggestion",itemTem:this._sugItemTpl,onconfirm:function(e){var s=t.getDataKw(e.target);t.saveHistoryWord(s),t.jump(s)},onEnter:function(e){t.saveHistoryWord(e.value),t.jumpNoRid(e.value)},formatParam:function(e){return t._searchWord=e,{kw:encodeURIComponent(e)}},formatRespons:function(e){return 0===e.errno&&e.data&&e.data.suglist?(t.rid=e.data.recomwd_id,e.data.suglist):[]},onActiveItem:function(e){t.$input.val(t.getDataKw(e.target))},renderItem:function(s){var i,n=t._sugItemTpl,o=[];o=t.renderSearchHistoryItem(t._searchWord);for(var r=0,a=s.length;a>r;r++){i=s[r];var h=i.relword;i.htmlEscapedWord=$("<div />").text(h).html(),o.push(n.replace(/\$\{([^\}]*)\}/g,function(t,e){return i[e]}))}return 0===o.length&&e.hide(),o.join("")}})},searchBtnClickHandler:function(){var t=$.trim(this.$input.val());t||this.$input.val(this.$input.attr("placeholder"))},searchFormClickHandler:function(){},bindEvent:function(){var t=this;this._searchBtnId.on("click",function(){t.searchBtnClickHandler();$.trim(t.$input.val())}),this.$searchForm.on("submit",function(){t.$input.val()!=t.$input.attr("placeholder")&&t.$inputHidden.remove()})}}),s.exports=i});
;define("common:widget/sort_bar/sort_bar.js",function(e,c,n){function t(){$("#j-filter-area").delegate("a.filter-checkbox","click",function(e){var c=$(e.target);c.hasClass("checked")?c.removeClass("checked"):c.addClass("checked")})}function s(){var e=F.context("sortBarPage"),c=i("#j-bar-area");c.on("sticky",function(e){$(e.el).addClass("sticky")}),c.on("unsticky",function(e){$(e.el).removeClass("sticky")}),"search"!==e&&"index"!==e&&(c.on("sticky",function(e){e.el.find(".w-search").show()}),c.on("unsticky",function(e){e.el.find(".w-search").hide()})),t()}var i=e("common:widget/dep/moye/sticky.js");n.exports={init:s}});
;define("common:widget/tools/string.js",function(e,n,r){r.exports=function(){"use strict";function e(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function n(e){return e.replace(/([-.*+?^$=!:{}()|[\]\/\\])/g,"\\$1")}function r(e,n){function r(e){return 25>=e?0:e>=32&&8191>=e||e>=65377&&65439>=e?1:2}e+="";for(var t=e.length,c=0,u=0;t>u;u++)if((c+=r(e.charCodeAt(u)))>n){for(;c>n-2;)c-=r(e.charCodeAt(u--));return e.slice(0,u+1)+"..."}return e}function t(e){return(e+"").replace(/["'\\\n\r\u2028\u2029]/g,function(e){switch(e){case'"':case"'":case"\\":return"\\"+e;case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})}function c(e){return encodeURIComponent(e)}function u(e){return decodeURIComponent(e.replace(/\+/g," "))}return{encodeHTML:e,escapeReg:n,limitlen:r,escapeJs:t,escapeURI:c,unescapeURI:u}}()});
;define("common:widget/tools/type.js",function(e,t,r){r.exports=function(){"use strict";function e(e){return Object.prototype.toString.call(e).slice(8,-1)}function t(t,r,n){if(null==t)return t+"";if(!r)return e(t).toLowerCase();var o;if("Number"===e(t)){var i=[["integer","Integer"],["double","Double"],["zero","Zero"],["NaN","NAN"],["Infinity","INFINITY"]],u=+("number"!=typeof t);o=Number.isFinite(t)?t.valueOf()?Number.parseInt(t,10)===t.valueOf()?i[0][u]:i[1][u]:(1/t===-1/0?"-":"")+i[2][u]:Number.isNaN(t)?i[3][u]:(t+"").slice(0,-8)+i[4][u]}else o=~"string,boolean".indexOf(typeof t)?typeof t:e(t);return n?o.toLowerCase():o}return{getRawType:e,getType:t}}()});
;define("common:widget/tools/smarty.js",function(e,n,t){t.exports=function(){"use strict";function n(e,n){return 1===arguments.length&&(n=!1),function(){switch(arguments.length){case 1:return e(arguments[0]);case 2:var t=a.base.get(arguments[0],arguments[1]);return t.result?e(t.data):n}}}function t(e){if(null!=e)for(var n=arguments.length,t=1;n>t;t++){var r=arguments[t];for(var u in r)s.call(r,u)&&(e[u]=r[u])}return e}var r=e("common:widget/tools/string.js"),u=e("common:widget/tools/type.js"),a={},s=Object.prototype.hasOwnProperty,o=u.getType,i={data:null};return a.context=function(e){return t(i,e)},a.base={get:function(){function e(e,n){return null!=e&&s.call(e,n)}var n,r,u={result:!1},a=arguments;switch(a.length){case 1:n=a[0];break;case 2:~"string,number".indexOf(typeof a[1])?(r=a[0],n=a[1]):(n=a[0],r=t({},i,a[1]||{}));break;default:return u}if(null==n)return u;n+="";for(var o=~n.indexOf(".")?n.split("."):[n],l=0,c=o.length;c>l;l++){var f=o[l];if(!e(r,f))return u;r=r[f]}return{result:!0,data:r}},has:function(e,n){return a.base.get(e,n).result},output:n(function(e){switch(e){case null:case void 0:case!1:return"";case!0:return 1;default:return~"string,number".indexOf(o(e))?e:"Array"}},""),bool:n(function(e){return"0"===e||"array"===o(e)&&!e.length?!e:!!e},"")},a.fn={isset:n(function(e){return null!=e}),empty:function(){return!a.base.bool.apply(this,arguments)},count:n(function(e){if(null==e)return 0;if("array"===o(e))return e.length;if("object"!==o(e))return 1;var n=0;for(var t in e)s.call(e,t)&&n++;return n})},a.base["if"]=a.base["boolean"]=a.base.bool,a["function"]=a.fn,a.filter={escape:{none:function(e){return e},html:r.encodeHTML,javascript:r.escapeJs,uri:r.escapeURI},unescape:{uri:r.unescapeURI},limitlen:r.limitlen},a}()});
;define("common:widget/static/init.js",function(t){"use strict";function a(){h("."+r+", ."+n).removeClass(d)}function o(t){var a=/(?:^|\s)(static-hook-id-\d+)(?:\s|$)/,o='<div class="static-hack-body">'+t.html.match(/<body.*?>([\s\S]*?)<\/body>/)[1]+"</div>",s=h(h.parseHTML(o)[0]),r=s.find("."+e),n=s.find("."+c);r.each(function(t,o){var s=h(o),e=s[0].className.match(a)[1],r=h("."+c+"."+e);s.hasClass(i)?s.prop("outerHTML",r.prop("outerHTML")):s.html(r.html()),s.removeClass(d)}),n.each(function(t,o){var s=h(o),c=s[0].className.match(a)[1],r=h("."+e+"."+c);r.hasClass(i)?r.prop("outerHTML",s.prop("outerHTML")):r.html(s.html()),r.removeClass(d)})}var s=t("common:widget/tools/smarty.js"),e="static-hook-ph",c="static-hook-real",i="static-hook-outer",r="static-hide",n="static-hidden",d=r+" "+n,h=jQuery,l=F.context("staticController");l.loadAjax&&l.loadAjax(h),l.pageReady&&l.pageReady({smarty:s},function(t){try{s.context({data:t.data}),o(t),a()}catch(e){a(),l.fail("REPLACER",e)}})});
;define("common:widget/top_search_box/top_sug/top_sug.js",function(e,t,o){function n(){d.init(document.body,p),i()}function i(){var e,t=d.get("top-searcher");t.on("autocomplete",function(e){var t=$(this.main);t.removeClass("autocomplete-panel-show"),"move"===e.mode&&(e.suggestion.seg?(e.current>=0&&t.find("#autocomplate-list-"+e.current).hide(),t.addClass("autocomplete-panel-show"),t.find("#autocomplate-list-"+e.next).show()):t.find("#autocomplate-list-"+e.current).hide()),t.find("#j-top-input-hidden").val(this.get("rid"))}),t.on("show",function(t){c(t.main,t.suggestions),e=t.suggestions,$(this.main).addClass("autocomplate-show")}),t.on("autocompletebeforehide",function(e){e.isDefaultPrevented()||$(this.main).removeClass("autocomplate-show autocomplete-panel-show")}),$("#j-top-searchForm").on("submit",function(){var o;$.trim(t.input.value).length?(null!=e&&$.each(e,function(e,n){return t.input.value===n.relword?(o=!0,!1):void 0}),o||t.input.value===t.input.getAttribute("data-placeholder")||$(this).find("#j-top-input-hidden").remove()):event.preventDefault(),$("#search-tieba").find(".n-textbox-autocomplete").hide()})}function a(){var e=d.get("top-searcher");e.on("selectClick",function(e){var t=e.value;location.href="https://gss0.bdstatic.com/search?k="+encodeURIComponent(t)+"&rid="+this.get("rid")})}function s(){var e=d.get("top-searcher");e.on("selectClick",function(e){var t=e.value;window.open("/search?k="+encodeURIComponent(t)+"&rid="+this.get("rid")+"&cid=7754")})}function c(e,t){function o(e,t,o){if(o){if(1>t)return void e.css({top:0});var a=(t-1)*n,s=(o/2+1)*n;return a+s>i?void e.css({bottom:12}):void e.css({top:a})}}var n=30,i=t.length*n;e.find(".autocomplete-panel .list").each(function(){var e=$(this),a=e.data("index"),s=e.closest(".panel-inner"),c=t[a].seg.length;o(s,a,c);var r=Math.ceil(c/2)*n+n;r>i&&(i=r)}),e.css({height:i})}e("common:widget/dep/moye/TextBox.js");var r=e("common:widget/dep/moye/plugin/TextBoxAutoComplete.js"),u=e("common:widget/util/ejson.js"),d=e("common:widget/dep/moye/main.js"),l=e("common:widget/dep/etpl/main.js");l.addFilter("encode",function(e){return encodeURIComponent(e)});var p={"top-searcher":{name:"k",type:"TextBox",plugins:[new r({template:l.compile($("#autocomplete-template").html()),datasource:function(e,t){return u.get("/searchsug",{data:{kw:e}}).then(function(e){return e&&e.suglist?(t.textbox.set("rid",e.recomwd_id),$.each(e.suglist,function(t,o){o.rid=e.recomwd_id}),e.suglist):[]})},adapter:{toList:function(e){return e},toInput:function(e){return e.relword}},setPosition:function(e){$('[data-ui-id="top-searcher"]');e=$(e),e.css({position:"absolute"})}})]}};o.exports={init:n,bind:a,bindTieba:s}});
;define("common:widget/top_search_box/top_search_box.js",function(o,t,e){function c(){n.init(),n.bind(),new p({element:r,selClass:"input-placeholder"}),s()}function s(){$(window).scrollTop()>580&&($("#j-top-search-bg").css("top","0"),$("#j-top-search-content").css("top","0")),$(window).on("scroll",function(){$(window).scrollTop()>580?($("#j-top-search-bg").css("top","0"),$("#j-top-search-content").css("top","0")):($("#j-top-search-bg").css("top","-51px"),$("#j-top-search-content").css("top","-51px"),$("#j-top-search-content").find(".n-textbox-autocomplete").css("display","none"),$("#j-topSearchInput").trigger("blur"))})}var n=o("common:widget/top_search_box/top_sug/top_sug.js"),p=o("common:widget/ui/placeholder/placeholder.js"),r=$("#j-topSearchInput");e.exports={init:c}});
;define("common:widget/top_search_box_revision/top_sug/top_sug.js",function(t,e,o){function n(){d.init(document.body,p),i()}function i(){var t,e=d.get("top-searcher");e.on("autocomplete",function(t){var e=$(this.main);e.removeClass("autocomplete-panel-show"),"move"===t.mode&&(t.suggestion.seg?(t.current>=0&&e.find("#autocomplate-list-"+t.current).hide(),e.addClass("autocomplete-panel-show"),e.find("#autocomplate-list-"+t.next).show()):e.find("#autocomplate-list-"+t.current).hide()),e.find("#j-top-input-hidden").val(this.get("rid"))}),e.on("show",function(e){c(e.main,e.suggestions),t=e.suggestions,$(this.main).addClass("autocomplate-show")}),e.on("autocompletebeforehide",function(t){t.isDefaultPrevented()||$(this.main).removeClass("autocomplate-show autocomplete-panel-show")}),$("#j-top-searchForm").on("submit",function(o){var n;if($.trim(e.input.value).length)null!=t&&$.each(t,function(t,o){return e.input.value===o.relword?(n=!0,!1):void 0}),n||e.input.value===e.input.getAttribute("data-placeholder")||$(this).find("#j-top-input-hidden").remove();else{var i=$("#j-input-city-up").val();location.href="https:///"+i+".nuomi.com/all",o.preventDefault()}$("#search-tieba").find(".n-textbox-autocomplete").hide()})}function a(){var t=d.get("top-searcher");t.on("selectClick",function(t){var e=t.value;location.href="https://gss0.bdstatic.com/search?k="+encodeURIComponent(e)+"&rid="+this.get("rid")})}function s(){var t=d.get("top-searcher");t.on("selectClick",function(t){var e=t.value;window.open("/search?k="+encodeURIComponent(e)+"&rid="+this.get("rid")+"&cid=7754")})}function c(t,e){function o(t,e,o){if(o){if(1>e)return void t.css({top:0});var a=(e-1)*n,s=(o/2+1)*n;return a+s>i?void t.css({bottom:12}):void t.css({top:a})}}var n=30,i=e.length*n;t.find(".autocomplete-panel .list").each(function(){var t=$(this),a=t.data("index"),s=t.closest(".panel-inner"),c=e[a].seg.length;o(s,a,c);var r=Math.ceil(c/2)*n+n;r>i&&(i=r)})}t("common:widget/dep/moye/TextBox.js");var r=t("common:widget/dep/moye/plugin/TextBoxAutoComplete.js"),u=t("common:widget/util/ejson.js"),d=t("common:widget/dep/moye/main.js"),l=t("common:widget/dep/etpl/main.js");l.addFilter("encode",function(t){return encodeURIComponent(t)});var p={"top-searcher":{name:"k",type:"TextBox",plugins:[new r({template:l.compile($("#autocomplete-template").html()),datasource:function(t,e){return u.get("/searchsug",{data:{kw:t}}).then(function(t){return t&&t.suglist?(e.textbox.set("rid",t.recomwd_id),$.each(t.suglist,function(e,o){o.rid=t.recomwd_id}),t.suglist):[]})},adapter:{toList:function(t){return t},toInput:function(t){return t.relword}},setPosition:function(t){$('[data-ui-id="top-searcher"]');t=$(t),t.css({position:"absolute"})}})]}};o.exports={init:n,bind:a,bindTieba:s}});
;define("common:widget/top_search_box_revision/top_search_box.js",function(o,t,s){function e(){n.init(),n.bind(),new p({element:i,selClass:"input-placeholder"}),c()}function c(){$(window).scrollTop()>580&&($("#j-top-search-bg").css("top","0"),$("#j-top-search-content").css("top","0")),$(window).on("scroll",function(){$(window).scrollTop()>580?($("#j-top-search-bg").css("top","0"),$("#j-top-search-content").css("top","0"),$("#j-top-search-content").css("display","block")):($("#j-top-search-bg").css("top","-72px"),$("#j-top-search-content").css("top","-72px"),$("#j-top-search-content").css("display","none"),$("#j-top-search-content").find(".n-textbox-autocomplete").css("display","none"),$("#j-topSearchInput").trigger("blur"))})}var n=o("common:widget/top_search_box_revision/top_sug/top_sug.js"),p=o("common:widget/ui/placeholder/placeholder.js"),i=$("#j-topSearchInput");s.exports={init:e}});
;define("common:widget/ui/area_filter/area_filter.js",function(e,t,r){function a(){function e(){for(var e=($(this).attr("id"),[]),r=t._opt.ids,a=0;a!=r.length;++a){var i=r[a];e.push($("#"+i).val())}return t.render(e),t._opt.onChangeEvt(),!0}if(!(this instanceof l))throw new Error("_bindChangeEvt should be called as a method");for(var t=this,r=this._opt.ids,a=0;a!=r.length;++a){var i=r[a];$("#"+i).on("change",e)}}var i=function(){this._filterRule={dataKey:0},this._selectedRule={},this._renderRule={}};i.prototype.addRule=function(e,t,r){switch(e){case 0:if(void 0===t)throw new Error("dataKey is a must");this._filterRule={dataKey:t,key:r};break;case 1:this._selectedRule={key:t};break;case 2:for(var a=[].slice.call(arguments,1),i=1,n=0;n!=a.length;++n){i+=n;var l=a[n];if(l instanceof Array)for(var o=0;o!=l.length;++o)i+=o,this._renderRule["key"+i]=l[o];else this._renderRule["key"+i]=l}}return this},i.prototype.addFilterRule=function(e,t){return this.addRule(0,e,t),this},i.prototype.addSelectedRule=function(e){return this.addRule(1,e),this},i.prototype.addRenderRule=function(){return this.addRule(2,[].slice.call(arguments,0)),this},i.prototype.filterData=function(e,t){var r=this._filterRule;if(!r.key)return e[r.dataKey]||{};for(var a in e){var i=e[a];if(i[r.key]==t)return i[r.dataKey]||{}}return{}},i.prototype.renderHTML=function(e,t,r){if(!e)return"";var a=this._selectedRule,i=this._renderRule,n="";for(var l in t){var o=t[l];if(o){var s=e;for(var d in i)s=s.replace("<%="+d+"%>",o[i[d]]);r==o[a.key]&&void 0!==r&&(s=$("<div></div>").append($(s).attr("selected",!0)).html()),n+=s}}return n};var n={ids:["j-af-1","j-af-2"],defaultValue:{"j-af-1":"","j-af-2":"全部城区"},selOptionTpl:'<option value="<%=key1%>"><%=key2%></option>',onChangeEvt:function(){},rules:[new i,new i,new i]},l=function(e,t){this._dataAll=e,this._opt=$.extend(n,t)};l.prototype.render=function(e,t){for(var r=this,i=this._opt.ids,n=this._dataAll,l=0;l!=i.length;++l){var o=i[l],s=this._opt.rules[l],d=void 0,u=l>e.length?void 0:e[l];0!=l&&(d=$("#"+i[l-1]).val());var n=s.filterData(n,d),h="";r._opt.defaultValue[o]&&(h+='<option value="">'+r._opt.defaultValue[o]+"</option>"),h+=s.renderHTML(this._opt.selOptionTpl,n,u),$("#"+o).html(h)}t&&a.call(this)},r.exports={Rules:i,AreaFilter:l}});
;define("common:widget/ui/ceiling/ceiling.js",function(o,t,e){var i={offsetParent:"body",top:0,zIndex:201,ceilingClass:"ceiling-fixed",referDomId:"",pageDown:null,onscroll:function(){}},s=function(o,t){if(void 0===o)throw new Error("id is a must");this._opt=$.extend({},i,t),this.isFlag=!1,this._setTimeout=null,this._dom="object"==typeof o&&o.nodeType==Node.ELEMENT_NODE?o:document.getElementById(o);var e=this._opt.referDomId;return this._referDom="object"==typeof e&&e.nodeType==Node.ELEMENT_NODE?e:e?document.getElementById(e):$(this._dom).parent()[0],this};s.prototype.init=function(o){function t(){clearTimeout(l._setTimeout);var o=$(l._referDom).offset().top;o!=c&&(f+=o-c,c=o,s()),l._setTimeout=setTimeout(t,300)}function e(){var o=l._dom;$(o).removeClass(l._opt.ceilingClass),o.style.position=p,o.style.top=r,o.style.zIndex=d,l._opt.onscroll(!1)}function i(){var o=l._dom,t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,i=$(window).height(),s=$(o).height();if(f>t)e();else if(f+s>i+t)e();else if(l.isFlag)if(m()){var n=i-l._opt.top>s?0:i-s-l._opt.top;$(o).addClass(l._opt.ceilingClass),$.browser.msie&&7>$.browser.version?(o.style.position="absolute",o.style.top=t+l._opt.top+n+"px"):(o.style.position="fixed",o.style.top=l._opt.top+n+"px"),o.style.zIndex=l._opt.zIndex,l._opt.onscroll.call(l,!0,o)}else e();"function"==typeof onscroll&&onscroll.call(null)}function s(){l.isFlag=n(),i()}function n(){var o=$(l._dom),t=40,e=70-t,i=document.documentElement.scrollTop||document.body.scrollTop,s=l._opt.pageDown?l._opt.pageDown.offset().top:0,n=1*o.offset().top,p=n+1*o.height()+t;if(s>0)if(clearTimeout(l._dom.__timeout),l._dom.__isStop&&i<parseInt(o.css("top"),10)-e)l._dom.__isStop=!1;else if(p>=s)return"absolute"!=o.css("position")&&(l._dom.__timeout=function(o){setTimeout(function(){o.css({position:"absolute",top:1*$(document).height()-1*l._opt.pageDown[0].offsetHeight-o[0].offsetHeight-t,zIndex:10})},1)}(o),l._dom.__isStop=!0),!1;return!0}var l=this,p=this._dom.style.position,r=this._dom.style.top,d=this._dom.style.zIndex,f=$(this._dom).offset().top,c=$(this._referDom).offset().top,m=function(){return!0};"function"==typeof o&&(m=o),t(),this._setTimeout=setTimeout(t,300),$(document).on("scroll",s),s()},e.exports=s});
;define("common:widget/ui/comment/comment.js",function(e,t,a){var i=e("common:widget/ui/dialog/dialog.js"),s=e("common:widget/lib/webuploader/webuploader.js"),n=function(){var e=66,t=410,a=620,n=10485760,o=43,r=43,c=500,l={detail:"/uc/comment/detail",submit:"/uc/comment/submit"},d=null,u=null,m=null,p=null,f=null,v=null,g=null,h=!1,b=null,w=null,_=0,x=[],j="$1.swf"/*tpa=https://gss0.bdstatic.com/8r1VfDn9KggZnd_b8IqT0jB-xx1xbK/static/common/$1.swf*/,C="upload-failure_4a61605.png"/*tpa=https://gss0.bdstatic.com/8r1VfDn-KggZnd_b8IqT0jB-xx1xbK/static/common/widget/ui/comment/img/upload-failure_4a61605.png*/,k="load_46b3216.gif"/*tpa=https://gss0.bdstatic.com/8r1VfDn7KggZnd_b8IqT0jB-xx1xbK/static/common/widget/ui/comment/img/load_46b3216.gif*/,y=8,I={file_size_exceed:"每张图片不超过10M，请压缩图片后重新上传！",content:"您输入的字数超过了500字,请删除一些！",score:"请输入总体评价！",upload:"图片还没有全部上传完！",contentLess:"您还没输入评价详情呢！",file_count_exceed:"最多只能选择8张图片"},S={isUploadPic:!1,isSuccess:!1},T={all:{name:"总体评分",desc:["很差","差","一般","很好","非常好"]}},F={catg_ids:"",dealId:"",orderId:"",score:0,content:"",pic_list:{},item:{}},z=function(e){$.extend(F,e||{})},A=function(e){var t=F.score;if(1==e&&0!=t){var a=$("#j-overral-comment a");a.each(function(e,a){t>=e+1&&$(a).addClass("click-star")});var i=T.all.desc[t-1];$("#j-score-all").text(i)}},D=function(e,t,a){var s={width:e,title:a||"提示",content:t};w=new i(s),w.center()},K=function(){m=$("#j-text-area"),p=$("#j-word-number"),f=$("#j-word-tip"),v=$("#j-word-limit"),u=$("#j-pic-gallery"),d=$("#j-upload-pic"),g=$("#j-error-info"),b=$("#j-submit-comment")},P=function(e){var t=e.attr("data-item"),a=t.split("_"),i=a[0],s=a[1];"all"==i?F.score=s:F.item[i]=s;var n=$("#j-score-"+i);n.text(T[i].desc[s-1])},U=function(){var e=$("#j-star-level a");e.on("mouseenter",function(){var e=$(this),t="hover-star";e.hasClass("star")||(t="hover-star-s"),e.addClass(t),e.prevAll().addClass(t),e.nextAll().removeClass(t)}),e.on("mouseleave",function(){var e=$(this),t="hover-star";e.hasClass("star")||(t="hover-star-s"),e.siblings().removeClass(t),e.removeClass(t)}),e.on("click",function(){var e=$(this),t="click-star";e.hasClass("star")||(t="click-star-s"),e.addClass(t),e.prevAll().addClass(t),e.nextAll().removeClass(t),P(e)})},O=function(){m.on({keyup:function(){q()},paste:function(){q()}})},V=function(){var t=$("#j-comment-label");t.height()>e&&t.addClass("label-hidden")},q=function(){var e=m.val(),t=e.length,a=c-t;if(0>=a){v.show(),f.hide();var i=e.substr(0,c);m.val(i)}else f.show(),v.hide(),p.text(a)},B=function(){var e=$("#j-comment-label a");e.on("click",function(){var e=$(this),t=e.find(".item").text(),a=t+" ",i=m.val(),s=i.length,n=a.length,o=s+n;if(!(s>=c||o>c)){var r=i.replace(t,"");if(e.hasClass("good-selected"))return e.removeClass("good-selected"),m.val(r),void q();if(e.hasClass("bad-selected"))return e.removeClass("bad-selected"),m.val(r),void q();e.hasClass("good-item")&&e.addClass("good-selected"),e.hasClass("bad-item")&&e.addClass("bad-selected"),m.val(""+i+a),q()}})},N=function(){var e=s.create({auto:!0,swf:j,server:"/uc/comment/uploadpic",pick:"#j-upload-pic",compress:!1,accept:{title:"Images",extensions:"jpg,jpeg,bmp,png",mimeTypes:"image/*"}});e.on("beforeFileQueued",function(e){return _++,_>y?(_=y,this.trigger("error","file_count_exceed",e),!1):e.size>n?(this.trigger("error","file_size_exceed",e),!1):void g.text("")}),e.on("error",function(e){("file_size_exceed"===e||"file_count_exceed"===e)&&g.text(I[e])}),e.on("fileQueued",function(e){S.isUploadPic=!0;var t=8>_?13:0;$pic=$('<a href="javascript:;" class="thumb-img" id='+e.id+' style="margin-right:'+t+'px;"><img><span class="mask"></span><span class="closed j-pic-closed"></span></a>'),u.append($pic),8==_&&d.addClass("hide-pic-button")}),e.on("uploadProgress",function(e){var t=$("#"+e.id);t.find("img").attr("src",k)}),e.on("uploadAccept",function(e,t){return 0!==t.errno?!1:void 0}),e.on("uploadSuccess",function(t,a){var i=a.data,s=i.picUrl,n=i.picId,c=$("#"+t.id).find("img");c.attr("data-id",n),F.pic_list[n]=s,e.makeThumb(t,function(){c.attr("src",s)},o,r),E()}),e.on("uploadError",function(e){var t=$("#"+e.id);t.find("img").attr("src",C)}),e.on("uploadFinished",function(){S.isSuccess=!0})},Z=function(){h=!0,u.on("click",".j-pic-closed",function(){var e=$(this),t=e.siblings("img"),a=t.attr("data-id");delete F.pic_list[a],e.parent().remove(),_--,7==_&&(d.removeClass("hide-pic-button"),u.find("a:last-child").css("margin-right","13px"),g.text(""))})},E=function(){_>0&&h===!1&&(picHandler=Z())},G=function(){var e=u.find("img"),t=e.length;0!=t&&(_=t,e.each(function(e,t){var a=$(t),i=a.attr("data-id"),s=a.attr("src");F.pic_list[i]=s}),Z())},J=function(e){K(),G(),A(e),U(),O(),V(),B(),N(),Y()},L=function(e){F.score=e.score;for(var t=e.sub_score,a=0,i=t.length;i>a;a++){var s=t[a].itemId,n=t[a].score;F.item[s]=n}},Q=function(e){for(var t=0,a=e.length;a>t;t++){var i=e[t],s=i.name,n=i.itemid,o=i.starmsg;x.push(n),T[n]={name:s,desc:o}}},H=function(){var e=document.title.split("#")[0];document.attachEvent("onpropertychange",function(t){t=t||window.event,"title"===t.propertyName&&document.title!==e&&setTimeout(function(){document.title=e},1)})},M=function(){var e;try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(t){e="0.0"}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)},X=function(e){var a=M(),i=$.browser.msie&&$.browser.version<10;if(!a&&i){var n=['<div class="p-info-tip">',"没有安装flash player播放器,请下载安装",'<a href="http://www.adobe.com/go/getflashplayer" target="_blank" border="0">','<img alt="get flash player" src="160x41_Get_Flash_Player.jpg"/*tpa=https://www.adobe.com/macromedia/style_guide/images/160x41_Get_Flash_Player.jpg*/ />',"</a>","</div>"].join("");return void D(t,n)}if(!s.Uploader.support("flash")&&i){window.expressinstallcallback=function(e){switch(e){case"Download.Cancelled":alert("您取消了更新！");break;case"Download.Failed":alert("安装失败");break;default:alert("安装已成功，请刷新！")}delete window.expressinstallcallback};var o="expressInstall.swf"/*tpa=https://gss0.bdstatic.com/static/widget/lib/webuploader/expressInstall.swf*/,n='<object type="application/x-shockwave-flash" data="'+o+'"';return s.browser.ie&&(n+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"'),n+='style="position:absolute;width:100%;height:100%;left:0;top:0;z-index:999;outline:0"><param name="movie" value="'+o+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',$("body").append(n),void $("html").scrollTop(0)}i&&H(),z(e),R()},R=function(){var e={catg_ids:F.catg_ids,dealId:F.dealId,orderId:F.orderId,timestamp:(new Date).getTime()};$.get(l.detail,e,function(e){var e=$.parseJSON(e),i=e.errno;if(0==i){var s=e.data,n=s.doc.item,o=s.comment_type,r=s.html,c=1==o?"发表评论":"修改评论";2==o&&L(s.detail),Q(n),D(a,r,c),J(o)}else{var r='<div class="error-info-tip">'+e.msg+"</div>";D(t,r)}})},W=function(){if(0===F.score)throw{error_msg:I.score};for(var e=0,t=x.length;t>e;e++){var a=x[e];if(!F.item[a])throw{error_msg:"请输入"+T[a].name+"的评分！"}}var i=m.val();if(F.content=i,i.length>c)throw{error_msg:I.content};if(0===$.trim(i).length)throw{error_msg:I.contentLess};if(S.isUploadPic&&S.isSuccess===!1)throw{error_msg:I.upload}},Y=function(){b.on("click",function(){try{W()}catch(e){var t=e.error_msg;return void g.text(t)}delete F.catg_ids,$.post(l.submit,F,function(e){e instanceof Object||(e=$.parseJSON(e));var t="";e.data&&e.data.html?t=e.data.html:0!==e.errno&&(t='<div class="p-comment-status"><div class="status-failure"><span class="comment-failure"></span><span>'+e.msg+"</span></div></div>"),w.hide();var s={width:a,content:t,title:"提示",timeout:5e3,mask:{enable:!0,zIndex:100,opacity:.3,backgroundColor:"#000"},onhide:function(){window.location.reload()}};i.splash(s)})})};return{init:function(e){X(e)}}}();a.exports={init:n.init}});
;define("common:widget/ui/sidlog/utils.js",function(e,n,t){"use strict";var r={each:function(e,n){var t=Object.prototype;if("[object Array]"===t.toString.call(e)){for(var r=e.length,o=0;r>o;o++)if(n(o,e[o])===!1)return}else if(e)for(var c in e)if(t.hasOwnProperty.call(e,c)&&n(c,e[c])===!1)return},extend:function(e){function n(n,t){e[n]=t}for(var t=arguments.length,o=1;t>o;o++)r.each(arguments[o],n);return e},escapeReg:function(e){return e.replace(/([-.*+?^$=!:{}()|[\]\/\\])/g,"\\$1")},encode:encodeURIComponent,decode:function(e){e+="";try{return decodeURIComponent(e.replace(/\+/g," "))}catch(n){return e}},serialize:function(e,n){n=n||r.encode;var t=[];return r.each(e,function(e,r){null!=r&&t.push(n(e)+"="+n(r))}),t.join("&")},query2obj:function(e,n){n=n||r.decode;var t={};return"string"!=typeof e?e||t:(e=e.replace(/^&|^\?/,""),r.each(e?e.split("&"):[],function(e,r){r=r.split("="),t[n(r[0])]=n(r[1])}),t)},getRawCookie:function(e){return new RegExp("(?:^|; )"+r.escapeReg(e)+"=(.*?)(?:; |$)").test(document.cookie||"")&&"string"==typeof RegExp.$1?RegExp.$1:void 0}};t.exports=r});
;define("common:widget/ui/sidlog/log.js",function(t,e,n){"use strict";function o(){return v=+new Date+"_"+(Math.random()+"").replace(/^0./,"")}function i(t){document.createElement("img").src=t}function r(t){void 0!==typeof console&&console&&console.info&&console.info(t)}function c(t){try{var e={target:"sidlog",tips:"小流量日志",type:"error",log:""};"string"==typeof t?e.log=t:g.extend(e,t);var n={};g.each(e,function(t,e){n["fe_"+t]=e}),i(d.uri+"?"+g.serialize(n)+"&_uuid="+o()),r(n)}catch(c){i(d.uri+"?fe_target=sidlog&fe_type=fatal&_uuid="+o()),r("小流量日志: log error")}}function a(){h||(y.init(),c({type:"warn",log:"use before init"}))}function u(t){var e={uri:"error-1.html"/*tpa=https://gss0.bdstatic.com/8r1VfDn9KggZnd_b8IqT0jB-xx1xbK/static/common/pkg/samplelog.nuomi.com/t.gif*/,container:document.body,selector:"a[mon]",attr:"mon"};t&&g.extend(e,t);var n=e.uri;if("https:"===location.protocol)try{e.uri="http://"+n,c("https")}catch(o){}return e.uri=location.protocol+"//"+n,e}function l(){var t={common:{},pv:{},click:{}},e=t.common;return g.each(["channel","BAIDUID","SID","access_log"],function(t,n){var o=g.getRawCookie(n);null!=o&&(e[n.toLowerCase()]=o)}),t}function s(t){var e=document.referrer,n=e?"&"+g.serialize({refer:e}):"",r=d.uri+"?"+g.serialize(t),c=function(t){i(r+"&_uuid="+o()+(e&&t?"&"+g.serialize({refer:e.match(/^(.*?)(?=#|\?|$)/)[0],js_cut:1}):n))};try{c()}catch(a){c(!0)}}function f(){var t={set:function(t,e){g.extend(p[e&&e.action_type||"common"],t)},send:function(t,e){e=e||{};var n=e.action_type||t.action_type||p.common.action_type;switch(n){case"pv":break;case"click":break;default:return void c("send without action_type")}s(g.extend({},p.common,p[n],t,{action_type:n}))},getLastUUID:function(){return v},dispose:function(){}};return m.each(["set","send"],function(e,n){var o=t[n];t[n]=function(){try{a(),o.apply(null,arguments)}catch(t){c("call member `"+n+"` error")}}}),t}var m,d,p,g=t("common:widget/ui/sidlog/utils.js"),y={},h=!1,v="";y.init=function(t){try{if(h)return;h=!0,t=t||{},m=t.$||window.$,d=u(t),p=l(),g.extend(y,f())}catch(e){c("call member `init` error")}},n.exports=y});
;define("common:widget/ui/sidlog/pclog.js",function(i,n,t){"use strict";var e=i("common:widget/ui/sidlog/log.js"),c={init:function(){e.init({$:$}),e.set({client:"pc",action_type:"click"})},sendPv:function(i){e.send(i,{action_type:"pv"})},sendClick:function(i){e.send(i)},getUUID:function(){return e.getLastUUID()}};c.init(),t.exports=c});
;define("common:widget/ui/usertrack/usertrack.js",function(e,t,n){function o(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+e[n]);return 0==t.indexOf("&")&&(t=t.slice(1)),t}function i(e){var t=$(e.target),n=[],o="";do{var i=t.attr("mon");i&&n.push(i),t.is("a")&&(n.push("href="+encodeURIComponent(t.attr("href"))),o="undefined"!=typeof t.attr("redirect-url")?t.attr("redirect-url"):""),t=t.parent()}while(!t.is("html"));n=n.join("&").split("&");for(var r={},c=0,l=n.length;l>c;c++){var d=n[c].split("=");void 0===r[d[0]]&&(r[d[0]]=d[1])}var p=r.page;if(""!=o){var u=o.split("activity/common/short_url/");u.length>1&&(p="topic_"+u[1].split(/[?|&|#]/)[0])}var m="",g=F.context("label_sort_js");"1"==g?m="FL1":"2"==g&&(m="FL2"),r.da_src=encodeURIComponent($.stringify({page:p,area:r.area,element:r.element,position:r.position,exp_id:m})),a.sendClick({page:p,area:r.area,element:r.element}),delete r.page,delete r.area,delete r.element,delete r.position,delete r.redirect_url,s(r)}var r=e("common:widget/ui/cookie/cookie.js"),a=e("common:widget/ui/sidlog/pclog.js"),c={channel:"",channel_content:""},l=F.context("nuomi_base")+"/s.gif",s=function(e){var t=$.param(c,!0);e&&(t+="&"+o(e)),(new Image).src=l+"?"+t+"&_uuid="+a.getUUID()+"&_="+(new Date).valueOf()},d=function(e){$("body").on("mousedown",e,i)},p=r.get("SID"),u=F.context("sample_hit");p&&u&&(p+="|"+u);var m=function(){$.extend(c,{channel:r.get("channel"),channel_content:r.get("channel_content"),target_city:r.get("areaCode"),client_type:"PC_WEB",request_type:"pc_main",login_id:F.context("login_id"),real_refer:document.referrer,xll:F.context("xll"),sid:p})},g=function(){m(),d("a[mon], input[mon], span[mon]")};n.exports={init:g,send:s}});
;define("common:widget/ui/httpslink/httpslink.js",function(t,e,s){function n(){var t={element_type:"https",is_success:1},e="https:"!==window.location.protocol&&1!==+i.get("https_lync");e&&$.ajax({async:!1,url:"https://app.nuomi.com/naserver/https/httpslink",dataType:"jsonp",jsonp:"callback",timeout:2e4,data:{appid:"pc",method:"naserver.https.httpslink",deviceType:"pc",sign:""}}).done(function(){i.set("https_lync","1","week")}).fail(function(){i.set("https_lync","0","week"),t.is_success=0}).always(function(){o.send(t)})}var i=t("common:widget/ui/cookie/cookie.js"),o=t("common:widget/ui/usertrack/usertrack.js");s.exports={init:n}});
;define("common:widget/ui/items_post/items_post.js",function(t,n,e){function o(t,n){for(var e=t.attr("href"),o="_blank"==t.attr("target"),i=o?'target="_blank"':"",a=$('<form action="'+e+'" method="post" '+i+"></form>"),r=[],u={},f='<input type="hidden" name="{name}" value="{value}" />',s=0,c=n.length;c>s;s++)u={name:n[s].split("=")[0],value:n[s].split("=")[1]||""},r.push(f.replace(/\{(\w+)\}/g,function(t,n){return n in u?u[n]:t}));a.html(r.join("")).appendTo(document.body).submit().remove()}function i(t,n){var e="_blank"==t.attr("target"),o=t.attr("href");o+=o.indexOf("?")<0?"?":"&",o+=n.join("&"),e?window.open(o):window.location=o}function a(){r()}function r(){$(document.body).on("click","a[data-item-st]",function(t){var n=$(this),e=u(n);e&&e.length>0&&(t.preventDefault(),f?o(n,e):i(n,e))})}function u(t){var n=t.data("item-st"),e=[];if(n)if("string"==typeof n)e.push("s="+(f?n:encodeURIComponent(n)));else if($.isPlainObject(n))for(var o in n)""!=n[o]&&e.push([o,f?n[o]:encodeURIComponent(n[o])].join("="));return e}var f=!1;e.exports={init:a}});
;define("common:widget/ui/lazyload/lazyload.js",function(i,t,n){var a={container:window,lazy:$("img"),direction:"vertical",delay:100,expect:0,placeholder:"lazy-loading_2689268.png"/*tpa=https://gss0.bdstatic.com/8r1VfDn-KggZnd_b8IqT0jB-xx1xbK/static/common/img/lazy-loading_2689268.png*/,effect:"fadeIn",effectTime:400,original:"data-original",callback:function(){}},e=function(){this.initialize.apply(this,arguments)};$.extend(e.prototype,{initialize:function(i){if($.extend(this,a,i),this.lazy&&!(this.lazy.size()<=0)){var t=this;this.$container=$(void 0===this.container||this.container===window?window:this.container),this.lazy.each(function(){var i=this,n=$(this);(void 0===n.attr("src")||n.attr("src")===!1||""==n.attr("src"))&&n.is("img")&&n.attr("src",t.placeholder),n.one("appear",function(){this.loaded||$("<img />").bind("load",function(){var a=n.attr(t.original);if(a){n.hide(),n.is("img")?n.attr("src",a):n.css("background-image","url('"+a+"')"),n[t.effect](t.effectTime),i.loaded=!0;var e=$.grep(t.lazy,function(i){return!i.loaded});t.lazy=$(e)}}).attr("src",n.attr(t.original))})}),this.callback.call(this),this.bindEvent()}},run:function(){var i=this;setTimeout(function(){}),i.lazy.each(function(){i[i.direction](this)&&$(this).trigger("appear")})},vertical:function(i){return $(i).offset().top<$(document).scrollTop()+this.$container.height()+this.expect},horizontal:function(){},bindEvent:function(){var i=this;$(document).ready(function(){i.run()}),$(window).bind("resize",function(){i.run()}),this.$container.bind("scroll",function(){return i.run()})}}),n.exports=e});
;define("common:widget/ui/messenger/messenger.js",function(t,e,n){function i(t,e){var n="";if(arguments.length<2?n="target error - target and name are both requied":"object"!=typeof t?n="target error - target itself must be window object":"string"!=typeof e&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=t,this.name=e}function o(t,e){this.targets={},this.name=t,this.listenFunc=[],r=e||r,"string"!=typeof r&&(r=r.toString()),this.initListen()}var r="[PROJECT_NAME]",s="postMessage"in window;i.prototype.send=s?function(t){this.target.postMessage(r+t,"*")}:function(t){var e=window.navigator[r+this.name];if("function"!=typeof e)throw new Error("target callback function is not defined");e(r+t,window)},o.prototype.addTarget=function(t,e){var n=new i(t,e);this.targets[e]=n},o.prototype.initListen=function(){var t=this,e=function(e){"object"==typeof e&&e.data&&(e=e.data),e=e.slice(r.length);for(var n=0;n<t.listenFunc.length;n++)t.listenFunc[n](e)};s?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[r+this.name]=e},o.prototype.listen=function(t){this.listenFunc.push(t)},o.prototype.clear=function(){this.listenFunc=[]},o.prototype.send=function(t){var e,n=this.targets;for(e in n)n.hasOwnProperty(e)&&n[e].send(t)},n.exports=o});
;define("common:widget/ui/pager/pager.js",function(t,e,i){var n=n||window.$;n.extend({formatString:function(t,e){return e?t.replace(/#\{(.+?)\}/gi,function(t,i){var n=e[i];return"undefined"==typeof n?t:n}):t}});var a=function(t,e){this.$container=n("string"==typeof t?"#"+t:t),this._options={showIfTotalOne:!1,currentPage:1,totalPage:1,viewSize:10,tplUrl:"##{pageNum}",tplLabelNormal:"#{pageNum}",tplLabelCurrent:"#{pageNum}",labelFirst:"首页",labelPrev:'<div class="ico-pre"></div>',labelNext:'<div class="ico-next"></div>',labelLast:"最后页",islabelLastShow:!1,showPrevWhenDisabled:!1,showNextWhenDisabled:!1,autoDispose:!1},this._init(e)};a.prototype={_EXPANDO:"widget-ui-pager-"+ +new Date+"-"+Math.random(),_init:function(t){this._initOptions(t),this._options.autoDispose&&this.$container[0][this._EXPANDO]&&this.$container[0][this._EXPANDO].dispose(),this.$container[0][this._EXPANDO]=this,this._render(),this._bindEvent()},_initOptions:function(t){n.extend(!0,this._options,t)},_createLink:function(t,e,i,a,s){return'<a href="'+n.formatString(this._options.tplUrl,{pageNum:t})+'" data-pagenum="'+t+'" class="ui-pager-'+e+" "+(s?s:"")+'" mon="element='+a+'">'+i+"</a>"},_render:function(){var t=parseInt(this._options.currentPage,10),e=parseInt(this._options.totalPage,10),i=parseInt(this._options.viewSize,10);if(0>=e&&(e=1),1==e&&!this._options.showIfTotalOne)return void this.$container.html("");t>e&&(t=e),i>e&&(i=e);var a,s,r;r=parseInt((i+2)/2,10),a=r>=t?1:Math.min(t-r+1,e-i+1),s=Math.min(e,a+i-1);var o=[],l=this._options;o.push('<div class="ui-pager">'),t>1&&""!==l.labelFirst&&o.push(this._createLink(1,"first",l.labelFirst,"first")),""!==l.labelPrev&&(t>1?o.push(this._createLink(t-1,"prev",l.labelPrev,"back")):l.showPrevWhenDisabled&&o.push(this._createLink(t-1,"prev",l.labelPrev,"back","disabled")));for(var h=a;t>h;h++)o.push(this._createLink(h,"normal",n.formatString(l.tplLabelNormal,{pageNum:h}),h));for(o.push('<span class="ui-pager-current">'+n.formatString(l.tplLabelCurrent,{pageNum:h})+"</span>"),h++;s>=h;h++)o.push(this._createLink(h,"normal",n.formatString(l.tplLabelNormal,{pageNum:h}),h));e>t&&""!==l.labelLast&&l.islabelLastShow&&o.push(this._createLink(e,"last",l.labelLast,"last")),""!==l.labelNext&&(e>t?o.push(this._createLink(t+1,"next",l.labelNext,"next")):l.showNextWhenDisabled&&o.push(this._createLink(t+1,"next",l.labelNext,"next","disabled"))),o.push("</div>"),this.$container.html(o.join(""))},_pageChangeHandler:null,_bindEvent:function(){var t=this;this.$container.on("click","a",this._pageChangeHandler=function(){var e=n(this);if(e.hasClass("disabled"))return!1;var i=e.data("pagenum");return t._options.currentPage=i,t._render(),t.fire("pagechange",[i])})},on:function(t,e){return this["on"+t]=e,this},fire:function(t,e){var i=this["on"+t];return"function"==typeof i?i.apply(this,e):!0},dispose:function(){this.$container.html(""),this.$container[0][this._EXPANDO]=null,this._pageChangeHandler&&this.$container.off("click","a",this._pageChangeHandler),this.onpagechange=this._pageChangeHandler=this.$container=null}},i.exports=a});
;define("common:widget/ui/replace_img_cdn/cdn_map.js",function(i,o,m){m.exports=[{origin:"http://newpc0.nuomi.bdimg.com/",mirror:"//gss0.bdstatic.com/8r1VfDn9KggZnd_b8IqT0jB-xx1xbK"},{origin:"http://newpc1.nuomi.bdimg.com/",mirror:"//gss0.bdstatic.com/8r1VfDn-KggZnd_b8IqT0jB-xx1xbK"},{origin:"http://newpc2.nuomi.bdimg.com/",mirror:"//gss0.bdstatic.com/8r1VfDn7KggZnd_b8IqT0jB-xx1xbK"},{origin:"http://s0.nuomi.bdimg.com/",mirror:"//gss0.bdstatic.com/5eR1ciub_Q63otebn9fN2DJv"},{origin:"http://s1.nuomi.bdimg.com/",mirror:"//gss0.baidu.com/5eN1ciub_Q63otebn9fN2DJv"},{origin:"http://s0.nuomi.bdimg.com/",mirror:"//gss0.bdstatic.com/5eR1ciub_Q63otebn9fN2DJv"},{origin:"http://s2.nuomi.bdimg.com/",mirror:"//gss0.bdstatic.com/5eZ1ciub_Q63otebn9fN2DJv"},{origin:"http://nuomi.xnimg.cn/",mirror:"//gss0.bdstatic.com/8q12cT4a4Ag2n2jgoY_"},{origin:"http://a.hiphotos.baidu.com/",mirror:"//gss0.baidu.com/94o3dSag_xI4khGko9WTAnF6hhy"},{origin:"http://b.hiphotos.baidu.com/",mirror:"//gss0.baidu.com/9vo3dSag_xI4khGko9WTAnF6hhy"},{origin:"http://c.hiphotos.baidu.com/",mirror:"//gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy"},{origin:"http://d.hiphotos.baidu.com/",mirror:"//gss0.baidu.com/-Po3dSag_xI4khGko9WTAnF6hhy"},{origin:"http://e.hiphotos.baidu.com/",mirror:"//gss0.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy"},{origin:"http://f.hiphotos.baidu.com/",mirror:"//gss0.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy"},{origin:"http://g.hiphotos.baidu.com/",mirror:"//gss0.baidu.com/-fo3dSag_xI4khGko9WTAnF6hhy"},{origin:"http://apps.bdimg.com/",mirror:"//gss0.bdstatic.com/9_QWf8Sm1A5BphGlnYG"},{origin:"http://map.baidu.com/",mirror:"https://sp1.baidu.com/80MWsjip0QIZ8tyhnq"},{origin:"http://himg.bdimg.com/",mirror:"https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG"},{origin:"http://timg01.baidu-1img.cn/",mirror:"https://gss0.baidu.com/6Ls0a7b-KgQFm2e8867O_jowehu"}]});
;define("common:widget/ui/replace_img_cdn/url_cdn_replace.js",function(e,n,r){function i(e){if(null==e||"string"!=typeof e)return e;for(o=0;t>o;o++){var n=c[o];e=e.replace(new RegExp(n.origin,"ig"),n.mirror)}return e}var c=e("common:widget/ui/replace_img_cdn/cdn_map.js"),o=0,t=c.length;r.exports={doReplace:i}});
;define("common:widget/ui/scrollspy/scrollspy.js",function(t,s,e){function o(t){$("body").scrollspy({target:t})}+function(t){"use strict";function s(e,o){var i=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(e).is("body")?window:e),this.options=t.extend({},s.DEFAULTS,o),this.selector=(this.options.target||"")+" li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",i),this.refresh(),this.process()}function e(e){return this.each(function(){var o=t(this),i=o.data("bs.scrollspy"),r="object"==typeof e&&e;i||o.data("bs.scrollspy",i=new s(this,r)),"string"==typeof e&&i[e]()})}s.VERSION="3.3.2",s.DEFAULTS={offset:10},s.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},s.prototype.refresh=function(){var s="offset",e=0;t.isWindow(this.$scrollElement[0])||(s="position",e=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var o=this;this.$body.find(this.selector).map(function(){var o=t(this),i=o.data("target")||o.attr("href"),r=/^#./.test(i)&&t(i);return r&&r.length&&r.is(":visible")&&[[r[s]().top+e,i]]||null}).sort(function(t,s){return t[0]-s[0]}).each(function(){o.offsets.push(this[0]),o.targets.push(this[1])})},s.prototype.process=function(){var t,s=this.$scrollElement.scrollTop()+this.options.offset,e=this.getScrollHeight(),o=this.options.offset+e-this.$scrollElement.height(),i=this.offsets,r=this.targets,l=this.activeTarget;if(this.scrollHeight!=e&&this.refresh(),s>=o)return l!=(t=r[r.length-1])&&this.activate(t);if(l&&s<i[0])return this.activeTarget=null,this.clear();for(t=i.length;t--;)l!=r[t]&&s>=i[t]&&(!i[t+1]||s<=i[t+1])&&this.activate(r[t])},s.prototype.activate=function(s){this.activeTarget=s,this.clear();var e=this.selector+'[data-target="'+s+'"],'+this.selector+'[href="'+s+'"]',o=t(e).addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},s.prototype.clear=function(){t(this.selector).removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=e,t.fn.scrollspy.Constructor=s,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var s=t(this);e.call(s,s.data())})})}(jQuery),e.exports=o});
;define("common:widget/ui/sidlog/wap/utils.js",function(e,n,t){"use strict";var r={each:function(e,n){var t=Object.prototype;if("[object Array]"===t.toString.call(e)){for(var r=e.length,o=0;r>o;o++)if(n(o,e[o])===!1)return}else if(e)for(var c in e)if(t.hasOwnProperty.call(e,c)&&n(c,e[c])===!1)return},extend:function(e){function n(n,t){e[n]=t}for(var t=arguments.length,o=1;t>o;o++)r.each(arguments[o],n);return e},escapeReg:function(e){return e.replace(/([-.*+?^$=!:{}()|[\]\/\\])/g,"\\$1")},encode:encodeURIComponent,decode:function(e){e+="";try{return decodeURIComponent(e.replace(/\+/g," "))}catch(n){return e}},serialize:function(e,n){n=n||r.encode;var t=[];return r.each(e,function(e,r){null!=r&&t.push(n(e)+"="+n(r))}),t.join("&")},query2obj:function(e,n){n=n||r.decode;var t={};return"string"!=typeof e?e||t:(e=e.replace(/^&|^\?/,""),r.each(e?e.split("&"):[],function(e,r){r=r.split("="),t[n(r[0])]=n(r[1])}),t)},getRawCookie:function(e){return new RegExp("(?:^|; )"+r.escapeReg(e)+"=(.*?)(?:; |$)").test(document.cookie||"")&&"string"==typeof RegExp.$1?RegExp.$1:void 0}};t.exports=r});
;define("common:widget/ui/sidlog/wap/log.js",function(e,o,t){"use strict";function n(){return+new Date+"_"+(Math.random()+"").replace(/^0./,"")}function c(e){try{var o={};d.each({_:n(),target:"sidlog",tip:"小流量日志",type:"error",log:""},function(e,t){o["fe_"+e]=t}),"string"==typeof e?o.log=e:d.extend(o,e),document.createElement("img").src=m.uri+"?"+d.serialize(o),void 0!==typeof console&&console&&console.info&&console.info(o)}catch(t){void 0!==typeof console&&console&&console.info&&console.info("小流量日志: log error")}}function i(){g||(p.init(),c({type:"warn",log:"use before init"}))}function r(e){var o={uri:"error-1.html"/*tpa=https://gss0.bdstatic.com/8r1VfDn9KggZnd_b8IqT0jB-xx1xbK/static/common/pkg/sample.log.nuomi.com/t.gif*/,container:document.body,selector:"a[mon]",attr:"mon"};return e&&d.extend(o,e),o.uri=location.protocol+"//"+o.uri,o}function a(){var e={common:{},pv:{},click:{}};if(!/(\.|\/)nuomi\.com$/.test(location.hostname)){var o=e.common;d.each(["channel","BAIDUID","SID","access_log"],function(e,t){var n=d.getRawCookie(t);null!=n&&(o[t.toLowerCase()]=n)})}return e}function l(e){var o=document.referrer,t=o?"&"+d.serialize({refer:o}):"",c=m.uri+"?"+d.serialize(e)+"&__="+n(),i=function(e){document.createElement("img").src=c+(o&&e?"&"+d.serialize({refer:o.match(/^(.*?)(?=#|\?|$)/)[0],js_cut:1}):t)};try{i()}catch(r){i(!0)}}function s(){return{uuid:n(),set:function(e,o){try{i(),d.extend(f[o&&o.action_type||"common"],e)}catch(t){c("call member `set` error")}},send:function(e,o){try{i(),o=o||{};var t=o.action_type||e.action_type||f.common.action_type;switch(t){case"pv":break;case"click":break;default:return void c("send without action_type")}l(d.extend({},f.common,f[t],e,{action_type:t}))}catch(n){c("call member `send` error")}},dispose:function(){}}}var u,m,f,d=e("common:widget/ui/sidlog/wap/utils.js"),p={},g=!1;p.init=function(e){try{if(g)return;g=!0,e=e||{},u=e.$||window.$,m=r(e),f=a(),d.extend(p,s())}catch(o){c("call member `init` error")}},t.exports=p});
;define("common:widget/ui/sliderbar/sliderbar.js",function(t,e,i){$.extend(Function.prototype,{bind:function(t){var e=this,i=Array.prototype.slice.call(arguments,1);return function(){return e.apply(t,i.concat(Array.prototype.slice.call(arguments,0)))}}});var n=t("common:widget/ui/showtrack/showtrack.js"),s={isStart:!0,interval:4e3,direction:"left",timer:600,container:null,pageNumber:null,prevButton:null,nextButton:null,pageNumberHover:"hover",isPlay:!0,exposureLog:!1,callback:function(){},runCallback:function(){},beginCallback:function(t,e){"opacity"==this.direction&&e.show()},endCallback:function(t){"opacity"==this.direction&&t.hide()}},o=function(){this.initialize.apply(this,arguments)};$.extend(o.prototype,{initialize:function(t){return $.extend(this,s,t),!this.container||this.container.size()<=0?!1:(this.elements=this.container.children(),this.len=this.elements.size(),this._hover="j-sliderbar-hover",this.len<=0?this:(this.exposureLog&&this.len>1&&n.slideElementHandler(this.elements.eq(0)),this.width=this.elements.eq(0).width()+10,this.height=this.elements.eq(0).height()+10,this._curIndex=0,this.intervalObj=!1,this.elements.eq(0).css(this.direction,"opacity"==this.direction?1:0).show(),this.elements.eq(0).hasClass(this._hover)||this.elements.eq(0).addClass(this._hover),this.pageNumber&&this.pageNumber.size()>0&&!this.pageNumber.eq(0).hasClass(this.pageNumberHover)&&this.pageNumber.eq(0).addClass(this.pageNumberHover),this.isStart&&this.start(this.direction),this.callback.call(this),void this.bindEvent()))},top:function(){this.step("top")},opacity:function(){this.height=1,this.step("opacity",function(t,e){return e.next[t]=1,e.cur[t]=0,e})},bottom:function(){this.step("top",function(t,e,i,n){return e.next[t]=-e.distance,n.css(e.next),e.next[t]=0,e.cur[t]=+e.distance,e})},left:function(){this.step("left")},right:function(){this.step("left",function(t,e,i,n){return e.next[t]=-e.distance,n.css(e.next),e.next[t]=0,e.cur[t]=+e.distance,e})},step:function(t,e){var i=this._curIndex,s=this.elements.filter("."+this._hover),o={cur:{},next:{},distance:/bottom|top|opacity/i.test(t)?this.height:this.width},h=null;i=/left|top|opacity/i.test(t)?++i>=this.len?0:i:/right|bottom/i.test(t)&&--i<0?this.len-1:i,h=this.elements.eq(i),this._curIndex=i,"undefined"!=typeof e?o=e.call(this,t,o,s,h):(o.next[t]=o.distance,h.css(o.next),o.next[t]=0,o.cur[t]=-o.distance),this.beginCallback.call(this,s,h),h.addClass(this._hover).stop(!0).animate(o.next,this.timer,"",this.endCallback.bind(this,s,h)),s.removeClass(this._hover).stop(!0).animate(o.cur,this.timer),this.exposureLog&&(n.slideElementHandler(s),n.slideElementHandler(h)),this.pageNumber&&this.pageNumber.eq(this._curIndex).addClass(this.pageNumberHover).siblings().removeClass(this.pageNumberHover)},start:function(){this.len>1&&this.isPlay&&(this.intervalObj=setInterval(this[this.direction].bind(this,this.direction),this.interval))},prev:function(){var t=this._curIndex-1;t=0>t?this.len-1:t,this.go(t,"<")},next:function(){var t=this._curIndex+1;t=t>this.len?0:t,this.go(t,">")},reset:function(){this.go(0,">")},stop:function(){clearInterval(this.intervalObj)},setCurrentIndex:function(t){this._curIndex=t},getCurrentIndex:function(){return this._curIndex},go:function(t,e){var i=(this.direction,this._curIndex),n={"<right":"left",">right":"right","<left":"right",">left":"left","<top":"bottom",">top":"top","<bottom":"top",">bottom":"bottom","<opacity":"opacity",">opacity":"opacity"};this.stop(),t!=i&&(e="undefined"!=typeof e?e:i>t?"<":">",this._curIndex=t-1,this[n[e+this.direction]](n[e+this.direction])),this.start()},bindEvent:function(){var t=this;this.container.bind("mouseenter",function(){t.prevButton&&t.prevButton.show(),t.nextButton&&t.nextButton.show(),t.stop()}).bind("mouseleave",function(){t.prevButton&&t.prevButton.hide(),t.nextButton&&t.nextButton.hide(),t.start()}),this.pageNumber&&this.pageNumber.bind("click",function(){t.go($(this).index())}),this.prevButton&&this.prevButton.on({mouseenter:function(){t.nextButton&&t.nextButton.show(),$(this).show()},mouseleave:function(){t.nextButton&&t.nextButton.hide(),$(this).hide()},click:function(){t.prev()}}),this.nextButton&&this.nextButton.on({mouseenter:function(){t.prevButton&&t.prevButton.show(),$(this).show()},mouseleave:function(){t.prevButton&&t.prevButton.hide(),$(this).hide()},click:function(){t.next()}})}}),i.exports=o});
;define("common:widget/ui/slideshow/slideshow.js",function(t,e,i){function n(t,e){this.options=$.extend({},s,e),this.container=t,this.selectors=t.find(">li"),this.pageInfo={},this._eventList={};var i=this.selectors.size(),n=Math.ceil(i/this.options.perPage),o=1;this.pageInfo={size:i,page:n,currentPage:o},this.fullWidth=964,this.bindEvents()}var s={auto:!1,timegap:2e3,perPage:4};n.prototype.animatePostion=function(){"beforeSlide"in this._eventList;var t=-(this.fullWidth*(this.pageInfo.currentPage-1));this.container.animate({left:t})},n.prototype.on=function(t,e){if(e=e||function(){},"string"!=typeof t)throw new Error("event must be a string");this._eventList[t]=e},n.prototype.disableBtn=function(t){var e=this.options.btn.next.find("a"),i=this.options.btn.prev.find("a");if("next"===t)i.removeClass("disable"),e.addClass("disable");else{if("prev"!==t)throw new Error("no select btn");e.removeClass("disable"),i.addClass("disable")}},n.prototype.moveLeft=function(){this.pageInfo.currentPage--,this.animatePostion(),1===this.pageInfo.currentPage&&this.disableBtn("prev")},n.prototype.moveRight=function(){this.pageInfo.currentPage++,this.animatePostion(),this.pageInfo.currentPage===this.pageInfo.page&&this.disableBtn("next")},n.prototype.bindEvents=function(){var t=this;this.options.btn.next.on("click",function(e){var i=$(this).find("a");i.hasClass("disable")||t.moveRight(),e.preventDefault()}),this.options.btn.prev.on("click",function(e){var i=$(this).find("a");i.hasClass("disable")||t.moveLeft(),e.preventDefault()})},i.exports=n});
;define("common:widget/ui/swiper/swiper.js",function(e,t,i){var n=function(e,t){"use strict";function i(e,t){return document.querySelectorAll?(t||document).querySelectorAll(e):jQuery(e,t)}function n(e){return"[object Array]"===Object.prototype.toString.apply(e)?!0:!1}function r(){var e=I-N;return t.freeMode&&(e=I-N),t.slidesPerView>k.slides.length&&!t.centeredSlides&&(e=0),0>e&&(e=0),e}function s(){function e(e){var i=new Image;i.onload=function(){"undefined"!=typeof k&&null!==k&&(void 0!==k.imagesLoaded&&k.imagesLoaded++,k.imagesLoaded===k.imagesToLoad.length&&(k.reInit(),t.onImagesReady&&k.fireCallback(t.onImagesReady,k)))},i.src=e}var n=k.h.addEventListener,r="wrapper"===t.eventTarget?k.wrapper:k.container;if(k.browser.ie10||k.browser.ie11?(n(r,k.touchEvents.touchStart,g),n(document,k.touchEvents.touchMove,w),n(document,k.touchEvents.touchEnd,m)):(k.support.touch&&(n(r,"touchstart",g),n(r,"touchmove",w),n(r,"touchend",m)),t.simulateTouch&&(n(r,"mousedown",g),n(document,"mousemove",w),n(document,"mouseup",m))),t.autoResize&&n(window,"resize",k.resizeFix),o(),k._wheelEvent=!1,t.mousewheelControl){if(void 0!==document.onmousewheel&&(k._wheelEvent="mousewheel"),!k._wheelEvent)try{new WheelEvent("wheel"),k._wheelEvent="wheel"}catch(s){}k._wheelEvent||(k._wheelEvent="DOMMouseScroll"),k._wheelEvent&&n(k.container,k._wheelEvent,d)}if(t.keyboardControl&&n(document,"keydown",l),t.updateOnImagesReady){k.imagesToLoad=i("img",k.container);for(var a=0;a<k.imagesToLoad.length;a++)e(k.imagesToLoad[a].getAttribute("src"))}}function o(){var e,n=k.h.addEventListener;if(t.preventLinks){var r=i("a",k.container);for(e=0;e<r.length;e++)n(r[e],"click",f)}if(t.releaseFormElements){var s=i("input, textarea, select",k.container);for(e=0;e<s.length;e++)n(s[e],k.touchEvents.touchStart,h,!0)}if(t.onSlideClick)for(e=0;e<k.slides.length;e++)n(k.slides[e],"click",p);if(t.onSlideTouch)for(e=0;e<k.slides.length;e++)n(k.slides[e],k.touchEvents.touchStart,u)}function a(){var e,n=k.h.removeEventListener;if(t.onSlideClick)for(e=0;e<k.slides.length;e++)n(k.slides[e],"click",p);if(t.onSlideTouch)for(e=0;e<k.slides.length;e++)n(k.slides[e],k.touchEvents.touchStart,u);if(t.releaseFormElements){var r=i("input, textarea, select",k.container);for(e=0;e<r.length;e++)n(r[e],k.touchEvents.touchStart,h,!0)}if(t.preventLinks){var s=i("a",k.container);for(e=0;e<s.length;e++)n(s[e],"click",f)}}function l(e){var t=e.keyCode||e.charCode;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)){if(37===t||39===t||38===t||40===t){for(var i=!1,n=k.h.getOffset(k.container),r=k.h.windowScroll().left,s=k.h.windowScroll().top,o=k.h.windowWidth(),a=k.h.windowHeight(),l=[[n.left,n.top],[n.left+k.width,n.top],[n.left,n.top+k.height],[n.left+k.width,n.top+k.height]],d=0;d<l.length;d++){var p=l[d];p[0]>=r&&p[0]<=r+o&&p[1]>=s&&p[1]<=s+a&&(i=!0)}if(!i)return}O?((37===t||39===t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),39===t&&k.swipeNext(),37===t&&k.swipePrev()):((38===t||40===t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),40===t&&k.swipeNext(),38===t&&k.swipePrev())}}function d(e){var i=k._wheelEvent,n=0;if(e.detail)n=-e.detail;else if("mousewheel"===i)if(t.mousewheelControlForceToAxis)if(O){if(!(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)))return;n=e.wheelDeltaX}else{if(!(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)))return;n=e.wheelDeltaY}else n=e.wheelDelta;else if("DOMMouseScroll"===i)n=-e.detail;else if("wheel"===i)if(t.mousewheelControlForceToAxis)if(O){if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY)))return;n=-e.deltaX}else{if(!(Math.abs(e.deltaY)>Math.abs(e.deltaX)))return;n=-e.deltaY}else n=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;if(t.freeMode){var s=k.getWrapperTranslate()+n;if(s>0&&(s=0),s<-r()&&(s=-r()),k.setWrapperTransition(0),k.setWrapperTranslate(s),k.updateActiveSlide(s),0===s||s===-r())return}else(new Date).getTime()-q>60&&(0>n?k.swipeNext():k.swipePrev()),q=(new Date).getTime();return t.autoplay&&k.stopAutoplay(!0),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}function p(e){k.allowSlideClick&&(c(e),k.fireCallback(t.onSlideClick,k,e))}function u(e){c(e),k.fireCallback(t.onSlideTouch,k,e)}function c(e){if(e.currentTarget)k.clickedSlide=e.currentTarget;else{var i=e.srcElement;do{if(i.className.indexOf(t.slideClass)>-1)break;i=i.parentNode}while(i);k.clickedSlide=i}k.clickedSlideIndex=k.slides.indexOf(k.clickedSlide),k.clickedSlideLoopIndex=k.clickedSlideIndex-(k.loopedSlides||0)}function f(e){return k.allowLinks?void 0:(e.preventDefault?e.preventDefault():e.returnValue=!1,t.preventLinksPropagation&&"stopPropagation"in e&&e.stopPropagation(),!1)}function h(e){return e.stopPropagation?e.stopPropagation():e.returnValue=!1,!1}function g(e){if(t.preventLinks&&(k.allowLinks=!0),k.isTouched||t.onlyExternal)return!1;var i=e.target||e.srcElement;document.activeElement&&document.activeElement!==i&&document.activeElement.blur();var n="input select textarea".split(" ");if(t.noSwiping&&i&&v(i))return!1;if($=!1,k.isTouched=!0,Z="touchstart"===e.type,!Z&&"which"in e&&3===e.which)return!1;if(!Z||1===e.targetTouches.length){k.callPlugins("onTouchStartBegin"),!Z&&!k.isAndroid&&n.indexOf(i.tagName.toLowerCase())<0&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var r=Z?e.targetTouches[0].pageX:e.pageX||e.clientX,s=Z?e.targetTouches[0].pageY:e.pageY||e.clientY;k.touches.startX=k.touches.currentX=r,k.touches.startY=k.touches.currentY=s,k.touches.start=k.touches.current=O?r:s,k.setWrapperTransition(0),k.positions.start=k.positions.current=k.getWrapperTranslate(),k.setWrapperTranslate(k.positions.start),k.times.start=(new Date).getTime(),D=void 0,t.moveStartThreshold>0&&(K=!1),t.onTouchStart&&k.fireCallback(t.onTouchStart,k,e),k.callPlugins("onTouchStartEnd")}}function w(e){if(k.isTouched&&!t.onlyExternal&&(!Z||"mousemove"!==e.type)){var i=Z?e.targetTouches[0].pageX:e.pageX||e.clientX,n=Z?e.targetTouches[0].pageY:e.pageY||e.clientY;if("undefined"==typeof D&&O&&(D=!!(D||Math.abs(n-k.touches.startY)>Math.abs(i-k.touches.startX))),"undefined"!=typeof D||O||(D=!!(D||Math.abs(n-k.touches.startY)<Math.abs(i-k.touches.startX))),D)return void(k.isTouched=!1);if(O){if(!t.swipeToNext&&i<k.touches.startX||!t.swipeToPrev&&i>k.touches.startX)return}else if(!t.swipeToNext&&n<k.touches.startY||!t.swipeToPrev&&n>k.touches.startY)return;if(e.assignedToSwiper)return void(k.isTouched=!1);if(e.assignedToSwiper=!0,t.preventLinks&&(k.allowLinks=!1),t.onSlideClick&&(k.allowSlideClick=!1),t.autoplay&&k.stopAutoplay(!0),!Z||1===e.touches.length){if(k.isMoved||(k.callPlugins("onTouchMoveStart"),t.loop&&(k.fixLoop(),k.positions.start=k.getWrapperTranslate()),t.onTouchMoveStart&&k.fireCallback(t.onTouchMoveStart,k)),k.isMoved=!0,e.preventDefault?e.preventDefault():e.returnValue=!1,k.touches.current=O?i:n,k.positions.current=(k.touches.current-k.touches.start)*t.touchRatio+k.positions.start,k.positions.current>0&&t.onResistanceBefore&&k.fireCallback(t.onResistanceBefore,k,k.positions.current),k.positions.current<-r()&&t.onResistanceAfter&&k.fireCallback(t.onResistanceAfter,k,Math.abs(k.positions.current+r())),t.resistance&&"100%"!==t.resistance){var s;if(k.positions.current>0&&(s=1-k.positions.current/N/2,k.positions.current=.5>s?N/2:k.positions.current*s),k.positions.current<-r()){var o=(k.touches.current-k.touches.start)*t.touchRatio+(r()+k.positions.start);s=(N+o)/N;var a=k.positions.current-o*(1-s)/2,l=-r()-N/2;k.positions.current=l>a||0>=s?l:a}}if(t.resistance&&"100%"===t.resistance&&(k.positions.current>0&&(!t.freeMode||t.freeModeFluid)&&(k.positions.current=0),k.positions.current<-r()&&(!t.freeMode||t.freeModeFluid)&&(k.positions.current=-r())),!t.followFinger)return;if(t.moveStartThreshold)if(Math.abs(k.touches.current-k.touches.start)>t.moveStartThreshold||K){if(!K)return K=!0,void(k.touches.start=k.touches.current);k.setWrapperTranslate(k.positions.current)}else k.positions.current=k.positions.start;else k.setWrapperTranslate(k.positions.current);return(t.freeMode||t.watchActiveIndex)&&k.updateActiveSlide(k.positions.current),t.grabCursor&&(k.container.style.cursor="move",k.container.style.cursor="grabbing",k.container.style.cursor="-moz-grabbin",k.container.style.cursor="-webkit-grabbing"),Q||(Q=k.touches.current),U||(U=(new Date).getTime()),k.velocity=(k.touches.current-Q)/((new Date).getTime()-U)/2,Math.abs(k.touches.current-Q)<2&&(k.velocity=0),Q=k.touches.current,U=(new Date).getTime(),k.callPlugins("onTouchMoveEnd"),t.onTouchMove&&k.fireCallback(t.onTouchMove,k,e),!1}}}function m(e){if(D&&k.swipeReset(),!t.onlyExternal&&k.isTouched){k.isTouched=!1,t.grabCursor&&(k.container.style.cursor="move",k.container.style.cursor="grab",k.container.style.cursor="-moz-grab",k.container.style.cursor="-webkit-grab"),k.positions.current||0===k.positions.current||(k.positions.current=k.positions.start),t.followFinger&&k.setWrapperTranslate(k.positions.current),k.times.end=(new Date).getTime(),k.touches.diff=k.touches.current-k.touches.start,k.touches.abs=Math.abs(k.touches.diff),k.positions.diff=k.positions.current-k.positions.start,k.positions.abs=Math.abs(k.positions.diff);var i=k.positions.diff,n=k.positions.abs,s=k.times.end-k.times.start;5>n&&300>s&&k.allowLinks===!1&&(t.freeMode||0===n||k.swipeReset(),t.preventLinks&&(k.allowLinks=!0),t.onSlideClick&&(k.allowSlideClick=!0)),setTimeout(function(){"undefined"!=typeof k&&null!==k&&(t.preventLinks&&(k.allowLinks=!0),t.onSlideClick&&(k.allowSlideClick=!0))},100);var o=r();if(!k.isMoved&&t.freeMode)return k.isMoved=!1,t.onTouchEnd&&k.fireCallback(t.onTouchEnd,k,e),void k.callPlugins("onTouchEnd");if(!k.isMoved||k.positions.current>0||k.positions.current<-o)return k.swipeReset(),t.onTouchEnd&&k.fireCallback(t.onTouchEnd,k,e),void k.callPlugins("onTouchEnd");if(k.isMoved=!1,t.freeMode){if(t.freeModeFluid){var a,l=1e3*t.momentumRatio,d=k.velocity*l,p=k.positions.current+d,u=!1,c=20*Math.abs(k.velocity)*t.momentumBounceRatio;-o>p&&(t.momentumBounce&&k.support.transitions?(-c>p+o&&(p=-o-c),a=-o,u=!0,$=!0):p=-o),p>0&&(t.momentumBounce&&k.support.transitions?(p>c&&(p=c),a=0,u=!0,$=!0):p=0),0!==k.velocity&&(l=Math.abs((p-k.positions.current)/k.velocity)),k.setWrapperTranslate(p),k.setWrapperTransition(l),t.momentumBounce&&u&&k.wrapperTransitionEnd(function(){$&&(t.onMomentumBounce&&k.fireCallback(t.onMomentumBounce,k),k.callPlugins("onMomentumBounce"),k.setWrapperTranslate(a),k.setWrapperTransition(300))}),k.updateActiveSlide(p)}return(!t.freeModeFluid||s>=300)&&k.updateActiveSlide(k.positions.current),t.onTouchEnd&&k.fireCallback(t.onTouchEnd,k,e),void k.callPlugins("onTouchEnd")}W=0>i?"toNext":"toPrev","toNext"===W&&300>=s&&(30>n||!t.shortSwipes?k.swipeReset():k.swipeNext(!0)),"toPrev"===W&&300>=s&&(30>n||!t.shortSwipes?k.swipeReset():k.swipePrev(!0));var f=0;if("auto"===t.slidesPerView){for(var h,g=Math.abs(k.getWrapperTranslate()),w=0,m=0;m<k.slides.length;m++)if(h=O?k.slides[m].getWidth(!0,t.roundLengths):k.slides[m].getHeight(!0,t.roundLengths),w+=h,w>g){f=h;break}f>N&&(f=N)}else f=A*t.slidesPerView;"toNext"===W&&s>300&&(n>=f*t.longSwipesRatio?k.swipeNext(!0):k.swipeReset()),"toPrev"===W&&s>300&&(n>=f*t.longSwipesRatio?k.swipePrev(!0):k.swipeReset()),t.onTouchEnd&&k.fireCallback(t.onTouchEnd,k,e),k.callPlugins("onTouchEnd")}}function v(e){var i=!1;do e.className.indexOf(t.noSwipingClass)>-1&&(i=!0),e=e.parentElement;while(!i&&e.parentElement&&-1===e.className.indexOf(t.wrapperClass));return!i&&e.className.indexOf(t.wrapperClass)>-1&&e.className.indexOf(t.noSwipingClass)>-1&&(i=!0),i}function S(e,t){var i,n=document.createElement("div");return n.innerHTML=t,i=n.firstChild,i.className+=" "+e,i.outerHTML}function T(e,i,n){function r(){var s=+new Date,u=s-o;a+=l*u/(1e3/60),p="toNext"===d?a>e:e>a,p?(k.setWrapperTranslate(Math.ceil(a)),k._DOMAnimating=!0,window.setTimeout(function(){r()},1e3/60)):(t.onSlideChangeEnd&&("to"===i?n.runCallbacks===!0&&k.fireCallback(t.onSlideChangeEnd,k,d):k.fireCallback(t.onSlideChangeEnd,k,d)),k.setWrapperTranslate(e),k._DOMAnimating=!1)}var s="to"===i&&n.speed>=0?n.speed:t.speed,o=+new Date;if(k.support.transitions||!t.DOMAnimation)k.setWrapperTranslate(e),k.setWrapperTransition(s);else{var a=k.getWrapperTranslate(),l=Math.ceil((e-a)/s*(1e3/60)),d=a>e?"toNext":"toPrev",p="toNext"===d?a>e:e>a;if(k._DOMAnimating)return;r()}k.updateActiveSlide(e),t.onSlideNext&&"next"===i&&k.fireCallback(t.onSlideNext,k,e),t.onSlidePrev&&"prev"===i&&k.fireCallback(t.onSlidePrev,k,e),t.onSlideReset&&"reset"===i&&k.fireCallback(t.onSlideReset,k,e),("next"===i||"prev"===i||"to"===i&&n.runCallbacks===!0)&&y(i)}function y(e){if(k.callPlugins("onSlideChangeStart"),t.onSlideChangeStart)if(t.queueStartCallbacks&&k.support.transitions){if(k._queueStartCallbacks)return;k._queueStartCallbacks=!0,k.fireCallback(t.onSlideChangeStart,k,e),k.wrapperTransitionEnd(function(){k._queueStartCallbacks=!1})}else k.fireCallback(t.onSlideChangeStart,k,e);if(t.onSlideChangeEnd)if(k.support.transitions)if(t.queueEndCallbacks){if(k._queueEndCallbacks)return;k._queueEndCallbacks=!0,k.wrapperTransitionEnd(function(i){k.fireCallback(t.onSlideChangeEnd,i,e)})}else k.wrapperTransitionEnd(function(i){k.fireCallback(t.onSlideChangeEnd,i,e)});else t.DOMAnimation||setTimeout(function(){k.fireCallback(t.onSlideChangeEnd,k,e)},10)}function x(){var e=k.paginationButtons;if(e)for(var t=0;t<e.length;t++)k.h.removeEventListener(e[t],"click",C)}function b(){var e=k.paginationButtons;if(e)for(var t=0;t<e.length;t++)k.h.addEventListener(e[t],"click",C)}function C(e){for(var i,n=e.target||e.srcElement,r=k.paginationButtons,s=0;s<r.length;s++)n===r[s]&&(i=s);t.autoplay&&k.stopAutoplay(!0),k.swipeTo(i)}function L(){J=setTimeout(function(){t.loop?(k.fixLoop(),k.swipeNext(!0)):k.swipeNext(!0)||(t.autoplayStopOnLast?(clearTimeout(J),J=void 0):k.swipeTo(0)),k.wrapperTransitionEnd(function(){"undefined"!=typeof J&&L()})},t.autoplay)}function M(){k.calcSlides(),t.loader.slides.length>0&&0===k.slides.length&&k.loadSlides(),t.loop&&k.createLoop(),k.init(),s(),t.pagination&&k.createPagination(!0),t.loop||t.initialSlide>0?k.swipeTo(t.initialSlide,0,!1):k.updateActiveSlide(0),t.autoplay&&k.startAutoplay(),k.centerIndex=k.activeIndex,t.onSwiperCreated&&k.fireCallback(t.onSwiperCreated,k),k.callPlugins("onSwiperCreated")}if(!document.body.outerHTML&&document.body.__defineGetter__&&HTMLElement){var E=HTMLElement.prototype;E.__defineGetter__&&E.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})}if(window.getComputedStyle||(window.getComputedStyle=function(e){return this.el=e,this.getPropertyValue=function(t){var i=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var i=t||0,n=this.length;n>i;i++)if(this[i]===e)return i;return-1}),(document.querySelectorAll||window.jQuery)&&"undefined"!=typeof e&&(e.nodeType||0!==i(e).length)){var k=this;k.touches={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,diff:0,abs:0},k.positions={start:0,abs:0,diff:0,current:0},k.times={start:0,end:0},k.id=(new Date).getTime(),k.container=e.nodeType?e:i(e)[0],k.isTouched=!1,k.isMoved=!1,k.activeIndex=0,k.centerIndex=0,k.activeLoaderIndex=0,k.activeLoopIndex=0,k.previousIndex=null,k.velocity=0,k.snapGrid=[],k.slidesGrid=[],k.imagesToLoad=[],k.imagesLoaded=0,k.wrapperLeft=0,k.wrapperRight=0,k.wrapperTop=0,k.wrapperBottom=0,k.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>=0;var P,A,I,W,D,N,G={eventTarget:"wrapper",mode:"horizontal",touchRatio:1,speed:300,freeMode:!1,freeModeFluid:!1,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,slidesPerView:1,slidesPerGroup:1,slidesPerViewFit:!0,simulateTouch:!0,followFinger:!0,shortSwipes:!0,longSwipesRatio:.5,moveStartThreshold:!1,onlyExternal:!1,createPagination:!0,pagination:!1,paginationElement:"span",paginationClickable:!1,paginationAsRange:!0,resistance:!0,scrollContainer:!1,preventLinks:!0,preventLinksPropagation:!1,noSwiping:!1,noSwipingClass:"swiper-no-swiping",initialSlide:0,keyboardControl:!1,mousewheelControl:!1,mousewheelControlForceToAxis:!1,useCSS3Transforms:!0,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,loop:!1,loopAdditionalSlides:0,roundLengths:!1,calculateHeight:!1,cssWidthAndHeight:!1,updateOnImagesReady:!0,releaseFormElements:!0,watchActiveIndex:!1,visibilityFullFit:!1,offsetPxBefore:0,offsetPxAfter:0,offsetSlidesBefore:0,offsetSlidesAfter:0,centeredSlides:!1,queueStartCallbacks:!1,queueEndCallbacks:!1,autoResize:!0,resizeReInit:!1,DOMAnimation:!0,loader:{slides:[],slidesHTMLType:"inner",surroundGroups:1,logic:"reload",loadAllSlides:!1},swipeToPrev:!0,swipeToNext:!0,slideElement:"div",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",wrapperClass:"swiper-wrapper",paginationElementClass:"swiper-pagination-switch",paginationActiveClass:"swiper-active-switch",paginationVisibleClass:"swiper-visible-switch"};t=t||{};for(var R in G)if(R in t&&"object"==typeof t[R])for(var H in G[R])H in t[R]||(t[R][H]=G[R][H]);else R in t||(t[R]=G[R]);k.params=t,t.scrollContainer&&(t.freeMode=!0,t.freeModeFluid=!0),t.loop&&(t.resistance="100%");var O="horizontal"===t.mode,V=["mousedown","mousemove","mouseup"];k.browser.ie10&&(V=["MSPointerDown","MSPointerMove","MSPointerUp"]),k.browser.ie11&&(V=["pointerdown","pointermove","pointerup"]),k.touchEvents={touchStart:k.support.touch||!t.simulateTouch?"touchstart":V[0],touchMove:k.support.touch||!t.simulateTouch?"touchmove":V[1],touchEnd:k.support.touch||!t.simulateTouch?"touchend":V[2]};for(var F=k.container.childNodes.length-1;F>=0;F--)if(k.container.childNodes[F].className)for(var z=k.container.childNodes[F].className.split(/\s+/),B=0;B<z.length;B++)z[B]===t.wrapperClass&&(P=k.container.childNodes[F]);k.wrapper=P,k._extendSwiperSlide=function(e){return e.append=function(){return t.loop?e.insertAfter(k.slides.length-k.loopedSlides):(k.wrapper.appendChild(e),k.reInit()),e},e.prepend=function(){return t.loop?(k.wrapper.insertBefore(e,k.slides[k.loopedSlides]),k.removeLoopedSlides(),k.calcSlides(),k.createLoop()):k.wrapper.insertBefore(e,k.wrapper.firstChild),k.reInit(),e},e.insertAfter=function(i){if("undefined"==typeof i)return!1;var n;return t.loop?(n=k.slides[i+1+k.loopedSlides],n?k.wrapper.insertBefore(e,n):k.wrapper.appendChild(e),k.removeLoopedSlides(),k.calcSlides(),k.createLoop()):(n=k.slides[i+1],k.wrapper.insertBefore(e,n)),k.reInit(),e},e.clone=function(){return k._extendSwiperSlide(e.cloneNode(!0))},e.remove=function(){k.wrapper.removeChild(e),k.reInit()},e.html=function(t){return"undefined"==typeof t?e.innerHTML:(e.innerHTML=t,e)},e.index=function(){for(var t,i=k.slides.length-1;i>=0;i--)e===k.slides[i]&&(t=i);return t},e.isActive=function(){return e.index()===k.activeIndex?!0:!1},e.swiperSlideDataStorage||(e.swiperSlideDataStorage={}),e.getData=function(t){return e.swiperSlideDataStorage[t]},e.setData=function(t,i){return e.swiperSlideDataStorage[t]=i,e},e.data=function(t,i){return"undefined"==typeof i?e.getAttribute("data-"+t):(e.setAttribute("data-"+t,i),e)},e.getWidth=function(t,i){return k.h.getWidth(e,t,i)},e.getHeight=function(t,i){return k.h.getHeight(e,t,i)},e.getOffset=function(){return k.h.getOffset(e)},e},k.calcSlides=function(e){var i=k.slides?k.slides.length:!1;k.slides=[],k.displaySlides=[];for(var n=0;n<k.wrapper.childNodes.length;n++)if(k.wrapper.childNodes[n].className)for(var r=k.wrapper.childNodes[n].className,s=r.split(/\s+/),l=0;l<s.length;l++)s[l]===t.slideClass&&k.slides.push(k.wrapper.childNodes[n]);for(n=k.slides.length-1;n>=0;n--)k._extendSwiperSlide(k.slides[n]);i!==!1&&(i!==k.slides.length||e)&&(a(),o(),k.updateActiveSlide(),k.params.pagination&&k.createPagination(),k.callPlugins("numberOfSlidesChanged"))},k.createSlide=function(e,i,n){i=i||k.params.slideClass,n=n||t.slideElement;var r=document.createElement(n);return r.innerHTML=e||"",r.className=i,k._extendSwiperSlide(r)},k.appendSlide=function(e,t,i){return e?e.nodeType?k._extendSwiperSlide(e).append():k.createSlide(e,t,i).append():void 0},k.prependSlide=function(e,t,i){return e?e.nodeType?k._extendSwiperSlide(e).prepend():k.createSlide(e,t,i).prepend():void 0},k.insertSlideAfter=function(e,t,i,n){return"undefined"==typeof e?!1:t.nodeType?k._extendSwiperSlide(t).insertAfter(e):k.createSlide(t,i,n).insertAfter(e)},k.removeSlide=function(e){if(k.slides[e]){if(t.loop){if(!k.slides[e+k.loopedSlides])return!1;k.slides[e+k.loopedSlides].remove(),k.removeLoopedSlides(),k.calcSlides(),k.createLoop()}else k.slides[e].remove();return!0}return!1},k.removeLastSlide=function(){return k.slides.length>0?(t.loop?(k.slides[k.slides.length-1-k.loopedSlides].remove(),k.removeLoopedSlides(),k.calcSlides(),k.createLoop()):k.slides[k.slides.length-1].remove(),!0):!1},k.removeAllSlides=function(){for(var e=k.slides.length-1;e>=0;e--)k.slides[e].remove()},k.getSlide=function(e){return k.slides[e]},k.getLastSlide=function(){return k.slides[k.slides.length-1]},k.getFirstSlide=function(){return k.slides[0]},k.activeSlide=function(){return k.slides[k.activeIndex]},k.fireCallback=function(){var e=arguments[0];if("[object Array]"===Object.prototype.toString.call(e))for(var i=0;i<e.length;i++)"function"==typeof e[i]&&e[i](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);else"[object String]"===Object.prototype.toString.call(e)?t["on"+e]&&k.fireCallback(t["on"+e],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]):e(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},k.addCallback=function(e,t){var i,r=this;return r.params["on"+e]?n(this.params["on"+e])?this.params["on"+e].push(t):"function"==typeof this.params["on"+e]?(i=this.params["on"+e],this.params["on"+e]=[],this.params["on"+e].push(i),this.params["on"+e].push(t)):void 0:(this.params["on"+e]=[],this.params["on"+e].push(t))},k.removeCallbacks=function(e){k.params["on"+e]&&(k.params["on"+e]=null)};var _=[];for(var Y in k.plugins)if(t[Y]){var X=k.plugins[Y](k,t[Y]);X&&_.push(X)}k.callPlugins=function(e,t){t||(t={});for(var i=0;i<_.length;i++)e in _[i]&&_[i][e](t)},!k.browser.ie10&&!k.browser.ie11||t.onlyExternal||k.wrapper.classList.add("swiper-wp8-"+(O?"horizontal":"vertical")),t.freeMode&&(k.container.className+=" swiper-free-mode"),k.initialized=!1,k.init=function(e,i){var n=k.h.getWidth(k.container,!1,t.roundLengths),r=k.h.getHeight(k.container,!1,t.roundLengths);if(n!==k.width||r!==k.height||e){k.width=n,k.height=r;var s,o,a,l,d,p,u;N=O?n:r;var c=k.wrapper;if(e&&k.calcSlides(i),"auto"===t.slidesPerView){var f=0,h=0;t.slidesOffset>0&&(c.style.paddingLeft="",c.style.paddingRight="",c.style.paddingTop="",c.style.paddingBottom=""),c.style.width="",c.style.height="",t.offsetPxBefore>0&&(O?k.wrapperLeft=t.offsetPxBefore:k.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(O?k.wrapperRight=t.offsetPxAfter:k.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(O?(k.wrapperLeft=(N-this.slides[0].getWidth(!0,t.roundLengths))/2,k.wrapperRight=(N-k.slides[k.slides.length-1].getWidth(!0,t.roundLengths))/2):(k.wrapperTop=(N-k.slides[0].getHeight(!0,t.roundLengths))/2,k.wrapperBottom=(N-k.slides[k.slides.length-1].getHeight(!0,t.roundLengths))/2)),O?(k.wrapperLeft>=0&&(c.style.paddingLeft=k.wrapperLeft+"px"),k.wrapperRight>=0&&(c.style.paddingRight=k.wrapperRight+"px")):(k.wrapperTop>=0&&(c.style.paddingTop=k.wrapperTop+"px"),k.wrapperBottom>=0&&(c.style.paddingBottom=k.wrapperBottom+"px")),p=0;var g=0;for(k.snapGrid=[],k.slidesGrid=[],a=0,u=0;u<k.slides.length;u++){s=k.slides[u].getWidth(!0,t.roundLengths),o=k.slides[u].getHeight(!0,t.roundLengths),t.calculateHeight&&(a=Math.max(a,o));var w=O?s:o;if(t.centeredSlides){var m=u===k.slides.length-1?0:k.slides[u+1].getWidth(!0,t.roundLengths),v=u===k.slides.length-1?0:k.slides[u+1].getHeight(!0,t.roundLengths),S=O?m:v;if(w>N){if(t.slidesPerViewFit)k.snapGrid.push(p+k.wrapperLeft),k.snapGrid.push(p+w-N+k.wrapperLeft);else for(var T=0;T<=Math.floor(w/(N+k.wrapperLeft));T++)k.snapGrid.push(0===T?p+k.wrapperLeft:p+k.wrapperLeft+N*T);k.slidesGrid.push(p+k.wrapperLeft)}else k.snapGrid.push(g),k.slidesGrid.push(g);g+=w/2+S/2}else{if(w>N)if(t.slidesPerViewFit)k.snapGrid.push(p),k.snapGrid.push(p+w-N);else if(0!==N)for(var y=0;y<=Math.floor(w/N);y++)k.snapGrid.push(p+N*y);else k.snapGrid.push(p);else k.snapGrid.push(p);k.slidesGrid.push(p)}p+=w,f+=s,h+=o}t.calculateHeight&&(k.height=a),O?(I=f+k.wrapperRight+k.wrapperLeft,c.style.width=f+"px",c.style.height=k.height+"px"):(I=h+k.wrapperTop+k.wrapperBottom,c.style.width=k.width+"px",c.style.height=h+"px")}else if(t.scrollContainer)c.style.width="",c.style.height="",l=k.slides[0].getWidth(!0,t.roundLengths),d=k.slides[0].getHeight(!0,t.roundLengths),I=O?l:d,c.style.width=l+"px",c.style.height=d+"px",A=O?l:d;else{if(t.calculateHeight){for(a=0,d=0,O||(k.container.style.height=""),c.style.height="",u=0;u<k.slides.length;u++)k.slides[u].style.height="",a=Math.max(k.slides[u].getHeight(!0),a),O||(d+=k.slides[u].getHeight(!0));o=a,k.height=o,O?d=o:(N=o,k.container.style.height=N+"px")}else o=O?k.height:k.height/t.slidesPerView,t.roundLengths&&(o=Math.ceil(o)),d=O?k.height:k.slides.length*o;for(s=O?k.width/t.slidesPerView:k.width,t.roundLengths&&(s=Math.ceil(s)),l=O?k.slides.length*s:k.width,A=O?s:o,t.offsetSlidesBefore>0&&(O?k.wrapperLeft=A*t.offsetSlidesBefore:k.wrapperTop=A*t.offsetSlidesBefore),t.offsetSlidesAfter>0&&(O?k.wrapperRight=A*t.offsetSlidesAfter:k.wrapperBottom=A*t.offsetSlidesAfter),t.offsetPxBefore>0&&(O?k.wrapperLeft=t.offsetPxBefore:k.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(O?k.wrapperRight=t.offsetPxAfter:k.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(O?(k.wrapperLeft=(N-A)/2,k.wrapperRight=(N-A)/2):(k.wrapperTop=(N-A)/2,k.wrapperBottom=(N-A)/2)),O?(k.wrapperLeft>0&&(c.style.paddingLeft=k.wrapperLeft+"px"),k.wrapperRight>0&&(c.style.paddingRight=k.wrapperRight+"px")):(k.wrapperTop>0&&(c.style.paddingTop=k.wrapperTop+"px"),k.wrapperBottom>0&&(c.style.paddingBottom=k.wrapperBottom+"px")),I=O?l+k.wrapperRight+k.wrapperLeft:d+k.wrapperTop+k.wrapperBottom,parseFloat(l)>0&&(!t.cssWidthAndHeight||"height"===t.cssWidthAndHeight)&&(c.style.width=l+"px"),parseFloat(d)>0&&(!t.cssWidthAndHeight||"width"===t.cssWidthAndHeight)&&(c.style.height=d+"px"),p=0,k.snapGrid=[],k.slidesGrid=[],u=0;u<k.slides.length;u++)k.snapGrid.push(p),k.slidesGrid.push(p),p+=A,parseFloat(s)>0&&(!t.cssWidthAndHeight||"height"===t.cssWidthAndHeight)&&(k.slides[u].style.width=s+"px"),parseFloat(o)>0&&(!t.cssWidthAndHeight||"width"===t.cssWidthAndHeight)&&(k.slides[u].style.height=o+"px")}k.initialized?(k.callPlugins("onInit"),t.onInit&&k.fireCallback(t.onInit,k)):(k.callPlugins("onFirstInit"),t.onFirstInit&&k.fireCallback(t.onFirstInit,k)),k.initialized=!0}},k.reInit=function(e){k.init(!0,e)},k.resizeFix=function(e){k.callPlugins("beforeResizeFix"),k.init(t.resizeReInit||e),t.freeMode?k.getWrapperTranslate()<-r()&&(k.setWrapperTransition(0),k.setWrapperTranslate(-r())):(k.swipeTo(t.loop?k.activeLoopIndex:k.activeIndex,0,!1),t.autoplay&&(k.support.transitions&&"undefined"!=typeof J?"undefined"!=typeof J&&(clearTimeout(J),J=void 0,k.startAutoplay()):"undefined"!=typeof et&&(clearInterval(et),et=void 0,k.startAutoplay()))),k.callPlugins("afterResizeFix")},k.destroy=function(){var e=k.h.removeEventListener,i="wrapper"===t.eventTarget?k.wrapper:k.container;k.browser.ie10||k.browser.ie11?(e(i,k.touchEvents.touchStart,g),e(document,k.touchEvents.touchMove,w),e(document,k.touchEvents.touchEnd,m)):(k.support.touch&&(e(i,"touchstart",g),e(i,"touchmove",w),e(i,"touchend",m)),t.simulateTouch&&(e(i,"mousedown",g),e(document,"mousemove",w),e(document,"mouseup",m))),t.autoResize&&e(window,"resize",k.resizeFix),a(),t.paginationClickable&&x(),t.mousewheelControl&&k._wheelEvent&&e(k.container,k._wheelEvent,d),t.keyboardControl&&e(document,"keydown",l),t.autoplay&&k.stopAutoplay(),k.callPlugins("onDestroy"),k=null},k.disableKeyboardControl=function(){t.keyboardControl=!1,k.h.removeEventListener(document,"keydown",l)},k.enableKeyboardControl=function(){t.keyboardControl=!0,k.h.addEventListener(document,"keydown",l)};var q=(new Date).getTime();if(k.disableMousewheelControl=function(){return k._wheelEvent?(t.mousewheelControl=!1,k.h.removeEventListener(k.container,k._wheelEvent,d),!0):!1},k.enableMousewheelControl=function(){return k._wheelEvent?(t.mousewheelControl=!0,k.h.addEventListener(k.container,k._wheelEvent,d),!0):!1},t.grabCursor){var j=k.container.style;j.cursor="move",j.cursor="grab",j.cursor="-moz-grab",j.cursor="-webkit-grab"}k.allowSlideClick=!0,k.allowLinks=!0;var K,Q,U,Z=!1,$=!0;k.swipeNext=function(e){!e&&t.loop&&k.fixLoop(),!e&&t.autoplay&&k.stopAutoplay(!0),k.callPlugins("onSwipeNext");var i=k.getWrapperTranslate(),n=i;if("auto"===t.slidesPerView){for(var s=0;s<k.snapGrid.length;s++)if(-i>=k.snapGrid[s]&&-i<k.snapGrid[s+1]){n=-k.snapGrid[s+1];break}}else{var o=A*t.slidesPerGroup;n=-(Math.floor(Math.abs(i)/Math.floor(o))*o+o)}return n<-r()&&(n=-r()),n===i?!1:(T(n,"next"),!0)},k.swipePrev=function(e){!e&&t.loop&&k.fixLoop(),!e&&t.autoplay&&k.stopAutoplay(!0),k.callPlugins("onSwipePrev");var i,n=Math.ceil(k.getWrapperTranslate());if("auto"===t.slidesPerView){i=0;for(var r=1;r<k.snapGrid.length;r++){if(-n===k.snapGrid[r]){i=-k.snapGrid[r-1];break}if(-n>k.snapGrid[r]&&-n<k.snapGrid[r+1]){i=-k.snapGrid[r];break}}}else{var s=A*t.slidesPerGroup;i=-(Math.ceil(-n/s)-1)*s}return i>0&&(i=0),i===n?!1:(T(i,"prev"),!0)},k.swipeReset=function(){k.callPlugins("onSwipeReset");{var e,i=k.getWrapperTranslate(),n=A*t.slidesPerGroup;-r()}if("auto"===t.slidesPerView){e=0;for(var s=0;s<k.snapGrid.length;s++){if(-i===k.snapGrid[s])return;if(-i>=k.snapGrid[s]&&-i<k.snapGrid[s+1]){e=k.positions.diff>0?-k.snapGrid[s+1]:-k.snapGrid[s];break}}-i>=k.snapGrid[k.snapGrid.length-1]&&(e=-k.snapGrid[k.snapGrid.length-1]),i<=-r()&&(e=-r())}else e=0>i?Math.round(i/n)*n:0,i<=-r()&&(e=-r());return t.scrollContainer&&(e=0>i?i:0),e<-r()&&(e=-r()),t.scrollContainer&&N>A&&(e=0),e===i?!1:(T(e,"reset"),!0)},k.swipeTo=function(e,i,n){e=parseInt(e,10),k.callPlugins("onSwipeTo",{index:e,speed:i}),t.loop&&(e+=k.loopedSlides);var s=k.getWrapperTranslate();if(!(e>k.slides.length-1||0>e)){var o;return o="auto"===t.slidesPerView?-k.slidesGrid[e]:-e*A,o<-r()&&(o=-r()),o===s?!1:(n=n===!1?!1:!0,T(o,"to",{index:e,speed:i,runCallbacks:n}),!0)}},k._queueStartCallbacks=!1,k._queueEndCallbacks=!1,k.updateActiveSlide=function(e){if(k.initialized&&0!==k.slides.length){k.previousIndex=k.activeIndex,"undefined"==typeof e&&(e=k.getWrapperTranslate()),e>0&&(e=0);var i;if("auto"===t.slidesPerView){if(k.activeIndex=k.slidesGrid.indexOf(-e),k.activeIndex<0){for(i=0;i<k.slidesGrid.length-1&&!(-e>k.slidesGrid[i]&&-e<k.slidesGrid[i+1]);i++);var n=Math.abs(k.slidesGrid[i]+e),r=Math.abs(k.slidesGrid[i+1]+e);k.activeIndex=r>=n?i:i+1}}else k.activeIndex=Math[t.visibilityFullFit?"ceil":"round"](-e/A);if(k.activeIndex===k.slides.length&&(k.activeIndex=k.slides.length-1),k.activeIndex<0&&(k.activeIndex=0),k.slides[k.activeIndex]){if(k.calcVisibleSlides(e),k.support.classList){var s;for(i=0;i<k.slides.length;i++)s=k.slides[i],s.classList.remove(t.slideActiveClass),k.visibleSlides.indexOf(s)>=0?s.classList.add(t.slideVisibleClass):s.classList.remove(t.slideVisibleClass);k.slides[k.activeIndex].classList.add(t.slideActiveClass)}else{var o=new RegExp("\\s*"+t.slideActiveClass),a=new RegExp("\\s*"+t.slideVisibleClass);for(i=0;i<k.slides.length;i++)k.slides[i].className=k.slides[i].className.replace(o,"").replace(a,""),k.visibleSlides.indexOf(k.slides[i])>=0&&(k.slides[i].className+=" "+t.slideVisibleClass);k.slides[k.activeIndex].className+=" "+t.slideActiveClass}if(t.loop){var l=k.loopedSlides;k.activeLoopIndex=k.activeIndex-l,k.activeLoopIndex>=k.slides.length-2*l&&(k.activeLoopIndex=k.slides.length-2*l-k.activeLoopIndex),k.activeLoopIndex<0&&(k.activeLoopIndex=k.slides.length-2*l+k.activeLoopIndex),k.activeLoopIndex<0&&(k.activeLoopIndex=0)
}else k.activeLoopIndex=k.activeIndex;t.pagination&&k.updatePagination(e)}}},k.createPagination=function(e){if(t.paginationClickable&&k.paginationButtons&&x(),k.paginationContainer=t.pagination.nodeType?t.pagination:i(t.pagination)[0],t.createPagination){var n="",r=k.slides.length,s=r;t.loop&&(s-=2*k.loopedSlides);for(var o=0;s>o;o++)n+="<"+t.paginationElement+' class="'+t.paginationElementClass+'"></'+t.paginationElement+">";k.paginationContainer.innerHTML=n}k.paginationButtons=i("."+t.paginationElementClass,k.paginationContainer),e||k.updatePagination(),k.callPlugins("onCreatePagination"),t.paginationClickable&&b()},k.updatePagination=function(e){if(t.pagination&&!(k.slides.length<1)){var n=i("."+t.paginationActiveClass,k.paginationContainer);if(n){var r=k.paginationButtons;if(0!==r.length){for(var s=0;s<r.length;s++)r[s].className=t.paginationElementClass;var o=t.loop?k.loopedSlides:0;if(t.paginationAsRange){k.visibleSlides||k.calcVisibleSlides(e);var a,l=[];for(a=0;a<k.visibleSlides.length;a++){var d=k.slides.indexOf(k.visibleSlides[a])-o;t.loop&&0>d&&(d=k.slides.length-2*k.loopedSlides+d),t.loop&&d>=k.slides.length-2*k.loopedSlides&&(d=k.slides.length-2*k.loopedSlides-d,d=Math.abs(d)),l.push(d)}for(a=0;a<l.length;a++)r[l[a]]&&(r[l[a]].className+=" "+t.paginationVisibleClass);t.loop?void 0!==r[k.activeLoopIndex]&&(r[k.activeLoopIndex].className+=" "+t.paginationActiveClass):r[k.activeIndex].className+=" "+t.paginationActiveClass}else t.loop?r[k.activeLoopIndex]&&(r[k.activeLoopIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass):r[k.activeIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass}}}},k.calcVisibleSlides=function(e){var i=[],n=0,r=0,s=0;O&&k.wrapperLeft>0&&(e+=k.wrapperLeft),!O&&k.wrapperTop>0&&(e+=k.wrapperTop);for(var o=0;o<k.slides.length;o++){n+=r,r="auto"===t.slidesPerView?O?k.h.getWidth(k.slides[o],!0,t.roundLengths):k.h.getHeight(k.slides[o],!0,t.roundLengths):A,s=n+r;var a=!1;t.visibilityFullFit?(n>=-e&&-e+N>=s&&(a=!0),-e>=n&&s>=-e+N&&(a=!0)):(s>-e&&-e+N>=s&&(a=!0),n>=-e&&-e+N>n&&(a=!0),-e>n&&s>-e+N&&(a=!0)),a&&i.push(k.slides[o])}0===i.length&&(i=[k.slides[k.activeIndex]]),k.visibleSlides=i};var J,et;k.startAutoplay=function(){if(k.support.transitions){if("undefined"!=typeof J)return!1;if(!t.autoplay)return;k.callPlugins("onAutoplayStart"),t.onAutoplayStart&&k.fireCallback(t.onAutoplayStart,k),L()}else{if("undefined"!=typeof et)return!1;if(!t.autoplay)return;k.callPlugins("onAutoplayStart"),t.onAutoplayStart&&k.fireCallback(t.onAutoplayStart,k),et=setInterval(function(){t.loop?(k.fixLoop(),k.swipeNext(!0)):k.swipeNext(!0)||(t.autoplayStopOnLast?(clearInterval(et),et=void 0):k.swipeTo(0))},t.autoplay)}},k.stopAutoplay=function(e){if(k.support.transitions){if(!J)return;J&&clearTimeout(J),J=void 0,e&&!t.autoplayDisableOnInteraction&&k.wrapperTransitionEnd(function(){L()}),k.callPlugins("onAutoplayStop"),t.onAutoplayStop&&k.fireCallback(t.onAutoplayStop,k)}else et&&clearInterval(et),et=void 0,k.callPlugins("onAutoplayStop"),t.onAutoplayStop&&k.fireCallback(t.onAutoplayStop,k)},k.loopCreated=!1,k.removeLoopedSlides=function(){if(k.loopCreated)for(var e=0;e<k.slides.length;e++)k.slides[e].getData("looped")===!0&&k.wrapper.removeChild(k.slides[e])},k.createLoop=function(){if(0!==k.slides.length){k.loopedSlides="auto"===t.slidesPerView?t.loopedSlides||1:t.slidesPerView+t.loopAdditionalSlides,k.loopedSlides>k.slides.length&&(k.loopedSlides=k.slides.length);var e,i="",n="",r="",s=k.slides.length,o=Math.floor(k.loopedSlides/s),a=k.loopedSlides%s;for(e=0;o*s>e;e++){var l=e;if(e>=s){var d=Math.floor(e/s);l=e-s*d}r+=k.slides[l].outerHTML}for(e=0;a>e;e++)n+=S(t.slideDuplicateClass,k.slides[e].outerHTML);for(e=s-a;s>e;e++)i+=S(t.slideDuplicateClass,k.slides[e].outerHTML);var p=i+r+P.innerHTML+r+n;for(P.innerHTML=p,k.loopCreated=!0,k.calcSlides(),e=0;e<k.slides.length;e++)(e<k.loopedSlides||e>=k.slides.length-k.loopedSlides)&&k.slides[e].setData("looped",!0);k.callPlugins("onCreateLoop")}},k.fixLoop=function(){var e;k.activeIndex<k.loopedSlides?(e=k.slides.length-3*k.loopedSlides+k.activeIndex,k.swipeTo(e,0,!1)):("auto"===t.slidesPerView&&k.activeIndex>=2*k.loopedSlides||k.activeIndex>k.slides.length-2*t.slidesPerView)&&(e=-k.slides.length+k.activeIndex+k.loopedSlides,k.swipeTo(e,0,!1))},k.loadSlides=function(){var e="";k.activeLoaderIndex=0;for(var i=t.loader.slides,n=t.loader.loadAllSlides?i.length:t.slidesPerView*(1+t.loader.surroundGroups),r=0;n>r;r++)e+="outer"===t.loader.slidesHTMLType?i[r]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+r+'">'+i[r]+"</"+t.slideElement+">";k.wrapper.innerHTML=e,k.calcSlides(!0),t.loader.loadAllSlides||k.wrapperTransitionEnd(k.reloadSlides,!0)},k.reloadSlides=function(){var e=t.loader.slides,i=parseInt(k.activeSlide().data("swiperindex"),10);if(!(0>i||i>e.length-1)){k.activeLoaderIndex=i;var n=Math.max(0,i-t.slidesPerView*t.loader.surroundGroups),r=Math.min(i+t.slidesPerView*(1+t.loader.surroundGroups)-1,e.length-1);if(i>0){var s=-A*(i-n);k.setWrapperTranslate(s),k.setWrapperTransition(0)}var o;if("reload"===t.loader.logic){k.wrapper.innerHTML="";var a="";for(o=n;r>=o;o++)a+="outer"===t.loader.slidesHTMLType?e[o]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+o+'">'+e[o]+"</"+t.slideElement+">";k.wrapper.innerHTML=a}else{var l=1e3,d=0;for(o=0;o<k.slides.length;o++){var p=k.slides[o].data("swiperindex");n>p||p>r?k.wrapper.removeChild(k.slides[o]):(l=Math.min(p,l),d=Math.max(p,d))}for(o=n;r>=o;o++){var u;l>o&&(u=document.createElement(t.slideElement),u.className=t.slideClass,u.setAttribute("data-swiperindex",o),u.innerHTML=e[o],k.wrapper.insertBefore(u,k.wrapper.firstChild)),o>d&&(u=document.createElement(t.slideElement),u.className=t.slideClass,u.setAttribute("data-swiperindex",o),u.innerHTML=e[o],k.wrapper.appendChild(u))}}k.reInit(!0)}},M()}};n.prototype={plugins:{},wrapperTransitionEnd:function(e,t){"use strict";function i(a){if(a.target===s&&(e(r),r.params.queueEndCallbacks&&(r._queueEndCallbacks=!1),!t))for(n=0;n<o.length;n++)r.h.removeEventListener(s,o[n],i)}var n,r=this,s=r.wrapper,o=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if(e)for(n=0;n<o.length;n++)r.h.addEventListener(s,o[n],i)},getWrapperTranslate:function(e){"use strict";var t,i,n,r,s=this.wrapper;return"undefined"==typeof e&&(e="horizontal"===this.params.mode?"x":"y"),this.support.transforms&&this.params.useCSS3Transforms?(n=window.getComputedStyle(s,null),window.WebKitCSSMatrix?r=new WebKitCSSMatrix("none"===n.webkitTransform?"":n.webkitTransform):(r=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),t=r.toString().split(",")),"x"===e&&(i=window.WebKitCSSMatrix?r.m41:parseFloat(16===t.length?t[12]:t[4])),"y"===e&&(i=window.WebKitCSSMatrix?r.m42:parseFloat(16===t.length?t[13]:t[5]))):("x"===e&&(i=parseFloat(s.style.left,10)||0),"y"===e&&(i=parseFloat(s.style.top,10)||0)),i||0},setWrapperTranslate:function(e,t,i){"use strict";var n,r=this.wrapper.style,s={x:0,y:0,z:0};3===arguments.length?(s.x=e,s.y=t,s.z=i):("undefined"==typeof t&&(t="horizontal"===this.params.mode?"x":"y"),s[t]=e),this.support.transforms&&this.params.useCSS3Transforms?(n=this.support.transforms3d?"translate3d("+s.x+"px, "+s.y+"px, "+s.z+"px)":"translate("+s.x+"px, "+s.y+"px)",r.webkitTransform=r.MsTransform=r.msTransform=r.MozTransform=r.OTransform=r.transform=n):(r.left=s.x+"px",r.top=s.y+"px"),this.callPlugins("onSetWrapperTransform",s),this.params.onSetWrapperTransform&&this.fireCallback(this.params.onSetWrapperTransform,this,s)},setWrapperTransition:function(e){"use strict";var t=this.wrapper.style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e/1e3+"s",this.callPlugins("onSetWrapperTransition",{duration:e}),this.params.onSetWrapperTransition&&this.fireCallback(this.params.onSetWrapperTransition,this,e)},h:{getWidth:function(e,t,i){"use strict";var n=window.getComputedStyle(e,null).getPropertyValue("width"),r=parseFloat(n);return(isNaN(r)||n.indexOf("%")>0||0>r)&&(r=e.offsetWidth-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),t&&(r+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),i?Math.ceil(r):r},getHeight:function(e,t,i){"use strict";if(t)return e.offsetHeight;var n=window.getComputedStyle(e,null).getPropertyValue("height"),r=parseFloat(n);return(isNaN(r)||n.indexOf("%")>0||0>r)&&(r=e.offsetHeight-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),t&&(r+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),i?Math.ceil(r):r},getOffset:function(e){"use strict";var t=e.getBoundingClientRect(),i=document.body,n=e.clientTop||i.clientTop||0,r=e.clientLeft||i.clientLeft||0,s=window.pageYOffset||e.scrollTop,o=window.pageXOffset||e.scrollLeft;return document.documentElement&&!window.pageYOffset&&(s=document.documentElement.scrollTop,o=document.documentElement.scrollLeft),{top:t.top+s-n,left:t.left+o-r}},windowWidth:function(){"use strict";return window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:void 0},windowHeight:function(){"use strict";return window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:void 0},windowScroll:function(){"use strict";return"undefined"!=typeof pageYOffset?{left:window.pageXOffset,top:window.pageYOffset}:document.documentElement?{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}:void 0},addEventListener:function(e,t,i,n){"use strict";"undefined"==typeof n&&(n=!1),e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},removeEventListener:function(e,t,i,n){"use strict";"undefined"==typeof n&&(n=!1),e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)}},setTransform:function(e,t){"use strict";var i=e.style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t},setTranslate:function(e,t){"use strict";var i=e.style,n={x:t.x||0,y:t.y||0,z:t.z||0},r=this.support.transforms3d?"translate3d("+n.x+"px,"+n.y+"px,"+n.z+"px)":"translate("+n.x+"px,"+n.y+"px)";i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=r,this.support.transforms||(i.left=n.x+"px",i.top=n.y+"px")},setTransition:function(e,t){"use strict";var i=e.style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t+"ms"},support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){"use strict";return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){"use strict";var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),transforms:window.Modernizr&&Modernizr.csstransforms===!0||function(){"use strict";var e=document.createElement("div").style;return"transform"in e||"WebkitTransform"in e||"MozTransform"in e||"msTransform"in e||"MsTransform"in e||"OTransform"in e}(),transitions:window.Modernizr&&Modernizr.csstransitions===!0||function(){"use strict";var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"MsTransition"in e||"OTransition"in e}(),classList:function(){"use strict";var e=document.createElement("div").style;return"classList"in e}()},browser:{ie8:function(){"use strict";var e=-1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,i=new RegExp(/MSIE ([0-9]{1,}[\.0-9]{0,})/);null!==i.exec(t)&&(e=parseFloat(RegExp.$1))}return-1!==e&&9>e}(),ie10:window.navigator.msPointerEnabled,ie11:window.navigator.pointerEnabled}},(window.jQuery||window.Zepto)&&!function(e){"use strict";e.fn.swiper=function(t){var i=new n(e(this)[0],t);return e(this).data("swiper",i),i}}(window.jQuery||window.Zepto),"undefined"!=typeof i&&(i.exports=n),"function"==typeof define&&define.amd&&define([],function(){"use strict";return n})});
;define("common:widget/ui/voice_check/voice_check.js",function(t,i,e){function a(t){var i={type:1,passuid:"",avaiBtn:"j-avai-but-bar",disableBut:"j-disable-but-bar",waitingBut:"j-waiting-but-bar",verifyCodeInput:"j-verify-input-bar",verifyNow:"j-verify-now-bar",errMsg:"j-err-msg-bar"};this.opt=$.extend(i,t),this.checkFlag=!0,this.avaiBtn=$("."+this.opt.avaiBtn),this.disableBut=$("."+this.opt.disableBut),this.waitingBut=$("."+this.opt.waitingBut),this.errMsg=$("."+this.opt.errMsg),this.verifyCodeInput=$("."+this.opt.verifyCodeInput),this.verifyNow=$("."+this.opt.verifyNow),this.verifyDialog=null}var n=t("common:widget/ui/dialog/dialog.js"),o=t("common:widget/ui/placeholder/placeholder.js"),s=window.location.href.replace(/#.*$/,"");a.prototype={handleAntiCheat:function(t){var i=this;$.post("/uc/user/getanticheatinfo",{cheat:t},function(t){var e=$.parseJSON(t);if(e&&e.data&&1==e.data.state){var a=e.data.leftCount,n=e.data.mobile;i.opt.passuid=e.data.passUid,i.antiCheatDialog(a,n)}})},antiCheatDialog:function(t,i){var e=this;n.confirm({customClassName:"ui-anticheat-confirm",content:'<p class="anti-cheat-p">您的账号存在异常，目前不能参加优惠活动，无法使用优惠券、红包。为了保障您的权益和账号安全，请先验证账号。</p>',width:465,footer:['<a href="javascript:;" class="dialog-btn-ok j-dialog-btn" data-event="ok">立即验证</a>','<a href="javascript:;" class="dialog-btn-cancel j-dialog-btn" data-event="cancel">下次再说</a>'].join(""),mask:{enable:!0,opacity:.25},onok:function(){var a,o;t>0&&(a='style="display:none;"'),0==t&&(o='style="display:none;"');var s=['<div class="anti-cheat-p">','<p class="tel-title">手机号</p>','<p><input class="tel-input input" value="'+i+'">','<a class="'+e.opt.disableBut+'  disable-but receive-but"'+a+">接听获取验证码</a>",'<a class="'+e.opt.avaiBtn+'  available-but receive-but"'+o+">接听获取验证码</a>",'<a class="'+e.opt.waitingBut+'  disable-but receive-but" style="display:none;">重新发送&nbsp;(&nbsp;60&nbsp;)</a></p>','<p class="verify-title">验证码</p>','<p><input class="'+e.opt.verifyCodeInput+' verify-input input"></p>','<p class="err-msg '+e.opt.errMsg+'"></p>',"</div>"].join("");e.verifyDialog=n.confirm({title:"账号验证",customClassName:"ui-anticheat-verify",content:s,width:465,footer:['<a href="javascript:;" class="dialog-btn-ok '+e.opt.verifyNow+'" data-event="ok">立即验证</a>','<a href="javascript:;" class="dialog-btn-cancel j-dialog-btn" data-event="cancel">取消</a>'].join(""),mask:{enable:!0,opacity:.25}}),e.verifyDialog.center(),e.verifyNow=$("."+e.opt.verifyNow),e.verifyCodeInput=$("."+e.opt.verifyCodeInput),e.errMsg=$("."+e.opt.errMsg),e.avaiBtn=$("."+e.opt.avaiBtn),e.waitingBut=$("."+e.opt.waitingBut),e.disableBut=$("."+e.opt.disableBut),e.verifyNow.on("click",function(){e.checkVerifyCode()}),e.avaiBtn.on("click",function(){e.sendVerifyCode()}),e.verifyCodeInput.on("blur",function(){e.verifyBlurHandler()}),e.verifyCodeInput.on("focus",function(){e.verifyFocusHandler()})}}).center()},handleAntiCheatUserCenter:function(){var t=this;new o({element:this.verifyCodeInput}),this.verifyNow.on("click",function(){t.checkVerifyCode()}),this.avaiBtn.on("click",function(){t.sendVerifyCode()}),this.verifyCodeInput.on("blur",function(){t.verifyBlurHandler()}),this.verifyCodeInput.on("focus",function(){t.verifyFocusHandler()})},sendVerifyCode:function(){var t,i=this;$.post("/uc/user/sendverifycode",{passuid:i.opt.passuid},function(e){var a=$.parseJSON(e);a&&0==a.errno&&a.data?(t=a.data.leftCount,i.avaiBtn.hide(),0==t?i.disableBut.show():(i.waitingBut.show(),i.countDown())):a&&2==a.errno&&(i.avaiBtn.hide(),i.waitingBut.show(),i.countDown(),0==i.opt.type?n.alert({customClassName:"ui-anticheat-alert",content:"<p>验证码请求失败，请稍后重试</p>",width:300}).center():1==i.opt.type&&i.errMsg.html("验证码请求失败，请稍后重试"))})},checkVerifyCode:function(){var t=this;if(this.checkFlag){var i=t.verifyCodeInput.val();$.post("/uc/user/checkverifycode",{verifyCode:i},function(i){var e=$.parseJSON(i);0==e.errno?(1==t.opt.type&&t.verifyDialog&&t.verifyDialog.hide(),n.alert({customClassName:"ui-anticheat-alert",content:"<p>验证成功</p>",width:300,oncancel:function(){window.location=s},onok:function(){window.location=s}}).center()):t.errMsg.html('<span class="error-icon"></span>验证码填写错误')})}},countDown:function(){function t(){e--,e>0?i.waitingBut.html("重新发送&nbsp;(&nbsp;"+e+"&nbsp;)"):(clearInterval(a),i.waitingBut.hide(),i.avaiBtn.show())}var i=this,e=60;this.waitingBut.html("重新发送&nbsp;(&nbsp;60&nbsp;)");var a=setInterval(t,1100)},verifyBlurHandler:function(){var t=/^\d{4}$/,i=this.verifyCodeInput.val();1==this.opt.type?this.checkFlag=t.test(i):0==this.opt.type&&(this.checkFlag=t.test(i)||"请输入接收到的验证码"==i),this.checkFlag||this.errMsg.html('<span class="error-icon"></span>验证码填写错误')},verifyFocusHandler:function(){this.errMsg.html("")}},e.exports=a});
;define("common:widget/util/encrypt.js",function(e,n,t){var c=e("common:widget/dep/tool/jsencrypt.min.js"),i=e("common:widget/dep/tool/md5.min.js"),n={},o="-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCyl036gxLZy7gXde/x66Z3u0gg\nlezngIt/OKH8/64yMvluWi/4pOKYwMeGcidu8M0c5Pyx279qDR7psMTKCsMIg1Q3\n7zY9vk18tNBLgYBltLF/YMkgeGF1e2itxVZhnGhZK9bBjIXU3gMcPwryGohGlkey\nt4prvcDeu+61ucpPdQIDAQAB\n-----END PUBLIC KEY-----";n.encrypt=function(e,n){var t=new c;t.setPublicKey(o);var n=n||"";return t.encrypt(i(e)+n)},t.exports=n});
;define("common:widget/util/request_check.js",function(n,e,o){var t=n("common:widget/dep/tool/base64.js"),i=function(n,e){var o=[];for(var t in e)e.hasOwnProperty(t)&&o.push([t,e[t]].map(encodeURIComponent).join("="));return o=o.join("&"),n+(n.indexOf("?")>=0?"&":"?")+o},c=function(n,e,o){$.ajax({type:"GET",url:n,beforeSend:function(n){n.setRequestHeader("X-Bd-Bwsc",e)},success:o})},a=function(n,e,o){var a=i(window.location.search,{_:+new Date}),r=[n,"query",t.encode(a)].join("|");c(a,r,function(n){o(n.length===e,n)})},r=function(n,e){var o=i("",{_:+new Date,length:e.length,content:e}),t=[n,"log"].join("|");c(o,t)},u=function(n,e){Math.random()<2||(e=e||97,$(window).on("load",function(){a(n,e,function(e,o){e||r(n,o)})}))};o.exports={init:u}});
;define("common:widget/util/sms.js",function(t,i,e){function n(t){t=t||{},this.main=$(t.main),this.state="",this.maxTimer=t.timer||60,this.type=t.type||"",this.prepare()}var s=t("common:widget/util/ejson.js"),a="disabled",r="enabled";n.prototype={constructor:n,prepare:function(){this._orginText=this.main.val()},send:function(t,i){var e=this;return this._state===a?s.reject({msg:"不能重复点击"}):s.post(t,{data:i}).then(function(t){return e.disable(),e.startCount(),t})},disable:function(){this._state=a,this.main.addClass("n-disabled")},enable:function(){this._state=r,this.main.removeClass("n-disabled")},startCount:function(){var t=this;t.count=this.maxTimer,this.intervalTimer&&clearInterval(this.intervalTimer),this.intervalTimer=setInterval(function(){t.update(),t.endCount()},1e3)},endCount:function(){this.count--,this.intervalTimer&&1===this.count&&(clearInterval(this.intervalTimer),this.reset(),this.enable())},update:function(){this.main.val(this.count+"秒后重发")},reset:function(){this.count=this.maxTimer,this.main.val(this._orginText)},isEnable:function(){return this._state===r},validate:function(t,i){return s.post(t,{data:i})},dispose:function(){clearInterval(this.intervalTimer),this.reset()}},i.create=function(t,i){return"object"==typeof t?i=t:(i=i||{},i.main=t),new n(i)},i.SMS=n,e.exports=i});